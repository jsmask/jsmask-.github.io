{"version":3,"sources":["view/PlayBox.js","view/ChangeBese64.js","view/ShowBox.js","App.js","index.js"],"names":["TabPane","Tabs","PlayBox","props","state","isfirst","player","list","progress","custnum","columns","iscust","colors","colorindex","iscreate","canvas","createRef","downloader","Downloader","parser","Parser","Player","this","current","createTable","a","get","file","fileData","do","svgaData","set","loop","fillMode","mount","key","obj","_renderer","_bitmapCache","hasOwnProperty","src","setState","length","name","pic","timer","$on","setInterval","createImages","_animator","duration","clearInterval","e","videoItem","frames","setTimeout","start","onPlay","toDataURL","title","dataIndex","width","render","alt","style","height","backgroundColor","record","index","onClick","onDownLoad","bind","type","marginRight","onDel","danger","splice","saveAs","onclear","_isRunning","zip","JSZip","img","folder","forEach","item","split","base64","generateAsync","then","content","value","className","defaultActiveKey","onChange","callback","tab","ref","percent","showInfo","marginTop","videoSize","map","onChangeColor","disabled","onCreate","onDownloadAll","icon","DownloadOutlined","onClear","marginBottom","size","defaultChecked","onChangeSlider","max","min","defaultValue","dataSource","React","Component","Search","Input","ChangeBese64","error","trim","createAnimation","message","l","len","$chars","maxPos","pwd","i","charAt","Math","floor","random","randomString","marginLeft","placeholder","enterButton","onSearch","margin","onDownload","Header","Layout","Footer","Content","ShowBox","isdrop","ischange","showbox","fileinput","ondragover","ondrop","ondragenterbox","ondragleavebox","ondropintobox","loadMyFile","document","addEventListener","stopPropagation","preventDefault","dataTransfer","files","names","reader","FileReader","readAsDataURL","onload","console","log","result","target","changeBase64State","href","rel","GithubOutlined","shape","SyncOutlined","accept","onChangeFile","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.876408ac.chunk.js","sourcesContent":["import React, { createRef } from 'react';\r\nimport { Downloader, Parser, Player } from 'svga.lite';\r\nimport { Button, Progress, Table, Tabs, Switch, Slider } from 'antd';\r\nimport { DownloadOutlined } from '@ant-design/icons';\r\nimport JSZip from 'jszip'\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nclass PlayBox extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isfirst: true,\r\n            player: null,\r\n            list: [],\r\n            progress: 0,\r\n            custnum: 1,\r\n            columns: [],\r\n            iscust: false,\r\n            colors: ['#000000', '#ffffff', 'rgb(234, 236, 63)', 'rgb(235, 75, 47)', '#596feb', '#b4e93a'],\r\n            colorindex: 0,\r\n            iscreate:true\r\n        }\r\n        this.canvas = createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const downloader = new Downloader();\r\n        const parser = new Parser();\r\n        const player = new Player(this.canvas.current);\r\n\r\n        this.createTable();\r\n\r\n        ; (async () => {\r\n\r\n            // this.canvas.current.width = this.canvas.current.clientWidth;\r\n            // this.canvas.current.height = this.canvas.current.clientHeight;\r\n\r\n            const fileData = await downloader.get(this.props.file)\r\n            const svgaData = await parser.do(fileData)\r\n\r\n            player.set({\r\n                loop: 1,\r\n                fillMode: 'forwards'\r\n            });\r\n\r\n            await player.mount(svgaData);\r\n\r\n            let obj = player._renderer._bitmapCache;\r\n            for (const key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    const src = obj[key].src;\r\n                    this.setState({\r\n                        list: [...this.state.list, {\r\n                            key: this.state.list.length,\r\n                            name: `img_${this.state.list.length}`,\r\n                            pic: src\r\n                        }]\r\n                    })\r\n                }\r\n            }\r\n\r\n            var timer = null;\r\n\r\n            player\r\n                .$on('start', () => {\r\n                    this.setState({\r\n                        progress: 0\r\n                    });\r\n                    if(this.state.iscreate){\r\n                        // if(player.videoItem.frames>this.state.list.length&&!this.state.iscust){\r\n                        //     this.createImages();\r\n                        // }\r\n                        if(this.state.iscust){\r\n                            //this.createImages();\r\n                            timer = setInterval(()=>{\r\n                                this.createImages();\r\n                            },player._animator.duration/this.state.custnum);\r\n                        }\r\n                    }\r\n                })\r\n                .$on('pause', () => {                   \r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('stop', () => {\r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('end', () => {\r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('clear', () => {\r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('process', (e) => {\r\n                    this.setState({\r\n                        progress: player.progress\r\n                    });\r\n                    if(this.state.iscreate&&!this.state.iscust){\r\n                        if(player.videoItem.frames>this.state.list.length){\r\n                            this.createImages();\r\n                        }\r\n                    }\r\n                });\r\n\r\n            this.setState({\r\n                player\r\n            });\r\n\r\n            //this.state.player.start();\r\n\r\n            //console.log(this.state.player)\r\n        })()\r\n    }\r\n\r\n    onPlay(){\r\n        this.setState({\r\n            iscreate:false\r\n        });\r\n        setTimeout(() => {\r\n            this.state.player.start();\r\n        }, 200)\r\n    }\r\n\r\n    onCreate() {\r\n        this.onPlay();\r\n        this.setState({\r\n            list: [],\r\n            iscreate:true\r\n        });\r\n    }\r\n\r\n    createImages() {\r\n        this.setState({\r\n            list: [...this.state.list, {\r\n                key: this.state.list.length,\r\n                name: `img_${this.state.list.length}`,\r\n                pic: this.canvas.current.toDataURL(\"image/png\")\r\n            }]\r\n        });\r\n    }\r\n\r\n    callback(key) {\r\n        //console.log(key);\r\n    }\r\n\r\n    createTable() {\r\n        this.setState({\r\n            columns: [\r\n                {\r\n                    title: 'Name',\r\n                    dataIndex: 'name',\r\n                    key: 'name',\r\n                    width: 120,\r\n                },\r\n                {\r\n                    title: 'Image',\r\n                    dataIndex: 'pic',\r\n                    key: 'pic',\r\n                    render: src => (\r\n                        <>\r\n                            <img alt=\"\" src={src} style={{ height: \"100px\", backgroundColor: `${this.state.colors[this.state.colorindex]}` }} />\r\n                        </>\r\n                    ),\r\n                    width: 180,\r\n                },\r\n                {\r\n                    title: 'Edit',\r\n                    dataIndex: 'key',\r\n                    key: 'key',\r\n                    render: (key, record, index) => (\r\n                        <>\r\n                            <Button onClick={this.onDownLoad.bind(this, key, record, index)} type=\"primary\" style={{ marginRight: \"10px\" }}>download</Button>\r\n                            <Button onClick={this.onDel.bind(this, key, record, index)} type=\"primary\" danger>delete</Button>\r\n                        </>\r\n                    )\r\n                }\r\n            ]\r\n        });\r\n    }\r\n\r\n    onDel(key, record, index) {\r\n        let list = [...this.state.list];\r\n        list.splice(index, 1);\r\n        this.setState({\r\n            list\r\n        })\r\n    }\r\n\r\n    onDownLoad(key, record, index) {\r\n        saveAs(record[\"pic\"], `${record[\"name\"]}.png`);\r\n    }\r\n\r\n    onClear() {\r\n        this.setState({\r\n            list: [],\r\n            player: null,\r\n            custnum:1\r\n        });\r\n        this.props.onclear();\r\n    }\r\n\r\n    onChange() {\r\n        if(this.state.player._animator._isRunning){\r\n            return false;\r\n        }\r\n        this.setState({\r\n            iscust: !this.state.iscust\r\n        })\r\n    }\r\n\r\n    onDownloadAll() {\r\n        let zip = new JSZip();\r\n        let img = zip.folder(\"images\");\r\n        this.state.list.forEach(item => {\r\n            img.file(`${item[\"name\"]}.png`, item[\"pic\"].split(',')[1], { base64: true });\r\n        })\r\n        zip.generateAsync({ type: \"blob\" })\r\n            .then(function (content) {\r\n                saveAs(content, \"images.zip\");\r\n            });\r\n    }\r\n\r\n    onChangeColor(index) {\r\n        this.setState({\r\n            colorindex: index\r\n        })\r\n    }\r\n\r\n    onChangeSlider(value){\r\n        if(this.state.player._animator._isRunning){\r\n            return false;\r\n        }\r\n        this.setState({\r\n            custnum:value\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { player, progress, columns, list, iscust, custnum, colors, colorindex } = this.state;\r\n        return (\r\n            <>\r\n                <div className=\"play-box\">\r\n\r\n                    <Tabs defaultActiveKey=\"1\" onChange={this.callback.bind(this)}>\r\n                        <TabPane tab=\"Control\" key=\"1\">\r\n                            <canvas style={{ backgroundColor: colors[colorindex] }} ref={this.canvas}></canvas>\r\n\r\n                            <Progress percent={progress} showInfo={false} style={{ marginTop: \"30px\" }} />\r\n\r\n                            <ul className=\"play-box-info\">\r\n                                <li>\r\n                                    status: {player != null ? (player._animator._isRunning ? 'playing' : 'complete') : 'stop'}\r\n                                </li>\r\n                                <li>\r\n                                    duration: {player != null ? (player._animator.duration + 'ms') : 'null'}\r\n                                </li>\r\n                                <li>\r\n                                    frames: {player != null ? (player.videoItem.frames) : '0'}\r\n                                </li>\r\n                                <li>\r\n                                    {player != null ? (`width: ${player.videoItem.videoSize.width} height: ${player.videoItem.videoSize.height}`) : \"\"}\r\n                                </li>\r\n                            </ul>\r\n\r\n                            <ul className=\"color-box\">\r\n                                {colors.map((item, index) => (<li onClick={this.onChangeColor.bind(this, index)} key={index} style={{ backgroundColor: `${item}` }}></li>))}\r\n                            </ul>\r\n\r\n                            <div>\r\n                                <Button type=\"primary\" onClick={this.onPlay.bind(this)} style={{ marginRight: \"10px\" }} disabled={player && player._animator._isRunning}>Play</Button>\r\n                                <Button type=\"primary\" onClick={this.onCreate.bind(this)} style={{ marginRight: \"10px\" }} disabled={player && player._animator._isRunning}>Create</Button>\r\n                                <Button type=\"primary\" onClick={this.onDownloadAll.bind(this)} icon={<DownloadOutlined />} style={{ marginRight: \"10px\" }} disabled={player && player._animator._isRunning}>Download all</Button>\r\n                                <Button type=\"primary\" onClick={this.onClear.bind(this)} disabled={player && player._animator._isRunning} danger>Destroy</Button>\r\n                            </div>\r\n\r\n                            {\r\n                                player&&player._animator._isRunning?\"\":(\r\n                                    <div style={{marginTop: \"30px\", marginBottom: \"30px\" }}>\r\n                                        <label>custom：</label> <Switch size=\"small\" defaultChecked={iscust} onChange={this.onChange.bind(this)} />\r\n                                        <Slider onChange={this.onChangeSlider.bind(this)} max={player != null?(player.videoItem.frames):100} min={1} defaultValue={custnum} disabled={!iscust} />\r\n                                    </div>\r\n                                )\r\n                            }\r\n\r\n\r\n                        </TabPane>\r\n\r\n                        <TabPane tab=\"More\" key=\"2\">\r\n                            {<Table columns={columns} dataSource={list} />}\r\n                        </TabPane>\r\n                    </Tabs>\r\n\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PlayBox;","import { Downloader, Parser, Player } from 'svga.lite';\r\nimport React, { Component, createRef } from 'react';\r\nimport { DownloadOutlined } from '@ant-design/icons';\r\nimport { saveAs } from 'file-saver';\r\nimport { Input,message,Button } from 'antd';\r\nconst { Search } = Input;\r\n\r\n\r\nclass ChangeBese64 extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            error:null,\r\n            file:\"\"\r\n        }\r\n        this.onChange = this.onChange.bind(this);\r\n        this.canvas = createRef();\r\n    }\r\n\r\n    onChange(value) {\r\n        if (value === '' || value.trim() === '') {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n          this.createAnimation(value);\r\n          this.setState({\r\n              file:value\r\n          })\r\n        }\r\n        catch{\r\n            message.error(\"error svga\")\r\n        }\r\n    }\r\n\r\n    randomString(l) {\r\n        let len = l || 32;\r\n        let $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n        let maxPos = $chars.length;\r\n        let pwd = '';\r\n        for (let i = 0; i < len; i++) {\r\n            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n        }\r\n        return pwd;\r\n    }\r\n\r\n    createAnimation(file) {\r\n        const downloader = new Downloader();\r\n        const parser = new Parser();\r\n        const player = new Player(this.canvas.current);\r\n\r\n        ; (async () => {\r\n            const fileData = await downloader.get(file);\r\n            \r\n            const svgaData = await parser.do(fileData);\r\n            player.set({\r\n                loop: -1,\r\n                fillMode: 'forwards'\r\n            });\r\n           \r\n            await player.mount(svgaData);\r\n            player.start();\r\n        })();\r\n\r\n    }\r\n\r\n    // dataURLtoFile(dataurl, filename) {\r\n    //     let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n    //         bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n    //     while(n--){\r\n    //         u8arr[n] = bstr.charCodeAt(n);\r\n    //     }\r\n    //     return new File([u8arr], filename, {type:mime});\r\n    // }\r\n\r\n    onDownload(){\r\n        if(this.state.file===\"\") return;\r\n        saveAs(this.state.file, `${this.randomString(8)}.svga`);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Search\r\n                    style={{ width: \"640px\", marginLeft: \"27px\", marginTop: \"30px\", marginBottom: \"30px\" }}\r\n                    placeholder=\"input base64 text\"\r\n                    enterButton=\"change\"\r\n                    size=\"large\"\r\n                    onSearch={this.onChange}\r\n                />\r\n                <div style={{margin:\"30px\"}}>\r\n                    <canvas style={{ backgroundColor: \"#000000\" }} ref={this.canvas}></canvas>\r\n                </div>\r\n                <Button style={{marginLeft:\"30px\"}} disabled={ this.state.file ===\"\"} type=\"primary\" icon={<DownloadOutlined />} onClick={this.onDownload.bind(this)} >\r\n                    Download\r\n                </Button>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default ChangeBese64;","import React, { createRef } from 'react';\r\nimport PlayBox from './PlayBox';\r\nimport ChangeBese64 from './ChangeBese64';\r\n\r\nimport { GithubOutlined,SyncOutlined } from '@ant-design/icons';\r\nimport { message, Layout, Button } from 'antd';\r\nconst { Header, Footer, Content } = Layout;\r\n\r\n\r\n\r\nclass ShowBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            file: \"\",\r\n            isdrop: false,\r\n            ischange: false\r\n        }\r\n        this.showbox = createRef();\r\n        this.fileinput = createRef();\r\n\r\n        this.ondragover = this.ondragover.bind(this);\r\n        this.ondrop = this.ondrop.bind(this);\r\n        this.ondragenterbox = this.ondragenterbox.bind(this);\r\n        this.ondragleavebox = this.ondragleavebox.bind(this);\r\n        this.ondropintobox = this.ondropintobox.bind(this);\r\n        this.loadMyFile = this.loadMyFile.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener(\"drop\", this.ondrop);\r\n        document.addEventListener(\"dragover\", this.ondragover);\r\n        this.showbox.current.addEventListener(\"dragenter\", this.ondragenterbox);\r\n        this.showbox.current.addEventListener(\"dragleave\", this.ondragleavebox);\r\n        this.showbox.current.addEventListener(\"drop\", this.ondropintobox);\r\n    }\r\n\r\n    ondragover(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondrop(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondragleavebox(e) {\r\n        this.setState({ isdrop: false })\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondragenterbox(e) {\r\n        this.setState({ isdrop: true })\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondropintobox(e) {\r\n        this.setState({\r\n            isdrop: false\r\n        });\r\n        let file = e.dataTransfer.files[0];\r\n        let names = file.name.split(\".\");\r\n        if (names[names.length - 1] !== \"svga\") {\r\n            message.error('no svga');\r\n            return false;\r\n        }\r\n        this.loadMyFile(file);\r\n    }\r\n\r\n    loadMyFile(file) {\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => {\r\n            console.log(reader.result)\r\n            this.setState({\r\n                file: reader.result\r\n            })\r\n        }\r\n    }\r\n\r\n    onClear() {\r\n        if(this.fileinput.current) this.fileinput.current.value = \"\";\r\n        this.setState({\r\n            file: \"\"\r\n        })\r\n    }\r\n\r\n    onChangeFile(e) {\r\n        if (this.fileinput.current.value === \"\") return false;\r\n        let names = e.target.files[0].name.split(\".\");\r\n        if (names[names.length - 1] !== \"svga\") {\r\n            message.error('no svga');\r\n            return false;\r\n        }\r\n        this.loadMyFile(e.target.files[0])\r\n    }\r\n\r\n    changeBase64State(state){\r\n        this.setState({\r\n            ischange:state\r\n        });\r\n        this.onClear();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Layout className=\"main\">\r\n                    <Layout>\r\n                        <Header>\r\n                            <span className=\"logo\" onClick={this.changeBase64State.bind(this,false)}>SVGA TO PNGS</span>\r\n                            <a className=\"github-link\" href=\"https://github.com/jsmask\" rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                <GithubOutlined className=\"github-svg\" />\r\n                            </a>\r\n\r\n                            <Button style={{marginLeft:\"60px\"}} onClick={this.changeBase64State.bind(this,!this.state.ischange)}  type=\"primary\" shape=\"round\">\r\n                                <SyncOutlined />\r\n                                {\r\n                                    !this.state.ischange?'base64 change':'to pngs'\r\n                                }\r\n                                \r\n                            </Button>\r\n\r\n                        </Header>\r\n                        <Content>\r\n                            {\r\n                                this.state.ischange === false ?\r\n                                    (\r\n                                        <div ref={this.showbox} className={`show-box ${this.state.isdrop === true ? 'is-active' : ''}`}>\r\n                                            <input ref={this.fileinput} type=\"file\" accept=\"*.svga\" onChange={this.onChangeFile.bind(this)} />\r\n                                            {this.state.file === \"\" ? \"\" : <PlayBox file={this.state.file} onclear={this.onClear.bind(this)} />}\r\n                                        </div>\r\n                                    ) : <ChangeBese64 />\r\n                            }\r\n\r\n\r\n                        </Content>\r\n                        <Footer>\r\n\r\n                        </Footer>\r\n                    </Layout>\r\n                </Layout>\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShowBox;","import React from 'react';\nimport ShowBox from './view/ShowBox';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <>\n        <ShowBox></ShowBox>\n      </>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css'\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}