(this["webpackJsonpsvga-to-pngs"]=this["webpackJsonpsvga-to-pngs"]||[]).push([[0],{165:function(e,t,a){e.exports=a(301)},171:function(e,t,a){},301:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),l=a.n(i),o=(a(170),a(171),a(64)),s=a(65),c=a(74),u=a(73),d=a(50),m=a(116),h=a.n(m),p=a(106),g=a(138),f=a(104),v=a(304),b=a(62),y=a(306),k=a(310),E=a(305),x=a(303),C=a(309),w=a(139),O=a.n(w),j=a(117),S=v.a.TabPane,_=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={isfirst:!0,player:null,list:[],progress:0,custnum:1,columns:[],iscust:!1,colors:["#000000","#ffffff","rgb(234, 236, 63)","rgb(235, 75, 47)","#596feb","#b4e93a"],colorindex:0,iscreate:!0},r.canvas=Object(n.createRef)(),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new f.Downloader,a=new f.Parser,n=new f.Player(this.canvas.current);this.createTable(),Object(g.a)(h.a.mark((function r(){var i,l,o,s,c,u;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e.props.file);case 2:return i=r.sent,r.next=5,a.do(i);case 5:return l=r.sent,n.set({loop:1,fillMode:"forwards"}),r.next=9,n.mount(l);case 9:for(s in o=n._renderer._bitmapCache)o.hasOwnProperty(s)&&(c=o[s].src,e.setState({list:[].concat(Object(p.a)(e.state.list),[{key:e.state.list.length,name:"img_".concat(e.state.list.length),pic:c}])}));u=null,n.$on("start",(function(){e.setState({progress:0}),e.state.iscreate&&(n.videoItem.frames>e.state.list.length&&!e.state.iscust&&e.createImages(),e.state.iscust&&(e.createImages(),u=setInterval((function(){e.createImages()}),n._animator.duration/e.state.custnum)))})).$on("pause",(function(){clearInterval(u),u=null})).$on("stop",(function(){clearInterval(u),u=null})).$on("end",(function(){clearInterval(u),u=null})).$on("clear",(function(){clearInterval(u),u=null})).$on("process",(function(t){e.setState({progress:n.progress}),e.state.iscreate&&!e.state.iscust&&n.videoItem.frames>e.state.list.length&&e.createImages()})),e.setState({player:n});case 14:case"end":return r.stop()}}),r)})))()}},{key:"onPlay",value:function(){var e=this;this.setState({iscreate:!1}),setTimeout((function(){e.state.player.start()}),200)}},{key:"onCreate",value:function(){this.onPlay(),this.setState({list:[],iscreate:!0})}},{key:"createImages",value:function(){this.setState({list:[].concat(Object(p.a)(this.state.list),[{key:this.state.list.length,name:"img_".concat(this.state.list.length),pic:this.canvas.current.toDataURL("image/png")}])})}},{key:"callback",value:function(e){}},{key:"createTable",value:function(){var e=this;this.setState({columns:[{title:"Name",dataIndex:"name",key:"name",width:120},{title:"Image",dataIndex:"pic",key:"pic",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{alt:"",src:t,style:{height:"100px",backgroundColor:"".concat(e.state.colors[e.state.colorindex])}}))},width:180},{title:"Edit",dataIndex:"key",key:"key",render:function(t,a,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{onClick:e.onDownLoad.bind(e,t,a,n),type:"primary",style:{marginRight:"10px"}},"download"),r.a.createElement(b.a,{onClick:e.onDel.bind(e,t,a,n),type:"primary",danger:!0},"delete"))}}]})}},{key:"onDel",value:function(e,t,a){var n=Object(p.a)(this.state.list);n.splice(a,1),this.setState({list:n})}},{key:"onDownLoad",value:function(e,t,a){Object(j.saveAs)(t.pic,"".concat(t.name,".png"))}},{key:"onClear",value:function(){this.setState({list:[],player:null,custnum:1}),this.props.onclear()}},{key:"onChange",value:function(){if(this.state.player._animator._isRunning)return!1;this.setState({iscust:!this.state.iscust})}},{key:"onDownloadAll",value:function(){var e=new O.a,t=e.folder("images");this.state.list.forEach((function(e){t.file("".concat(e.name,".png"),e.pic.split(",")[1],{base64:!0})})),e.generateAsync({type:"blob"}).then((function(e){Object(j.saveAs)(e,"images.zip")}))}},{key:"onChangeColor",value:function(e){this.setState({colorindex:e})}},{key:"onChangeSlider",value:function(e){if(this.state.player._animator._isRunning)return!1;this.setState({custnum:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.player,n=t.progress,i=t.columns,l=t.list,o=t.iscust,s=t.custnum,c=t.colors,u=t.colorindex;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"play-box"},r.a.createElement(v.a,{defaultActiveKey:"1",onChange:this.callback.bind(this)},r.a.createElement(S,{tab:"Control",key:"1"},r.a.createElement("canvas",{style:{backgroundColor:c[u]},ref:this.canvas}),r.a.createElement(y.a,{percent:n,showInfo:!1,style:{marginTop:"30px"}}),r.a.createElement("ul",{className:"play-box-info"},r.a.createElement("li",null,"status: ",null!=a?a._animator._isRunning?"playing":"complete":"stop"),r.a.createElement("li",null,"duration: ",null!=a?a._animator.duration+"ms":"null"),r.a.createElement("li",null,"frames: ",null!=a?a.videoItem.frames:"0"),r.a.createElement("li",null,null!=a?"width: ".concat(a.videoItem.videoSize.width," height: ").concat(a.videoItem.videoSize.height):"")),r.a.createElement("ul",{className:"color-box"},c.map((function(t,a){return r.a.createElement("li",{onClick:e.onChangeColor.bind(e,a),key:a,style:{backgroundColor:"".concat(t)}})}))),r.a.createElement("div",null,r.a.createElement(b.a,{type:"primary",onClick:this.onPlay.bind(this),style:{marginRight:"10px"},disabled:a&&a._animator._isRunning},"Play"),r.a.createElement(b.a,{type:"primary",onClick:this.onCreate.bind(this),style:{marginRight:"10px"},disabled:a&&a._animator._isRunning},"Create"),r.a.createElement(b.a,{type:"primary",onClick:this.onDownloadAll.bind(this),icon:r.a.createElement(C.a,null),style:{marginRight:"10px"},disabled:a&&a._animator._isRunning},"Download all"),r.a.createElement(b.a,{type:"primary",onClick:this.onClear.bind(this),disabled:a&&a._animator._isRunning,danger:!0},"Destroy")),a&&a._animator._isRunning?"":r.a.createElement("div",{style:{marginTop:"30px",marginBottom:"30px"}},r.a.createElement("label",null,"custom\uff1a")," ",r.a.createElement(k.a,{size:"small",defaultChecked:o,onChange:this.onChange.bind(this)}),r.a.createElement(E.a,{onChange:this.onChangeSlider.bind(this),max:null!=a?a.videoItem.frames:100,min:1,defaultValue:s,disabled:!o}))),r.a.createElement(S,{tab:"More",key:"2"},r.a.createElement(x.a,{columns:i,dataSource:l})))))}}]),a}(r.a.Component),I=a(308),R=a(302),D=a(307),F=R.a.Header,P=R.a.Footer,N=R.a.Content,L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={file:"",isdrop:!1},r.showbox=Object(n.createRef)(),r.fileinput=Object(n.createRef)(),r.ondragover=r.ondragover.bind(Object(d.a)(r)),r.ondrop=r.ondrop.bind(Object(d.a)(r)),r.ondragenterbox=r.ondragenterbox.bind(Object(d.a)(r)),r.ondragleavebox=r.ondragleavebox.bind(Object(d.a)(r)),r.ondropintobox=r.ondropintobox.bind(Object(d.a)(r)),r.loadMyFile=r.loadMyFile.bind(Object(d.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("drop",this.ondrop),document.addEventListener("dragover",this.ondragover),this.showbox.current.addEventListener("dragenter",this.ondragenterbox),this.showbox.current.addEventListener("dragleave",this.ondragleavebox),this.showbox.current.addEventListener("drop",this.ondropintobox)}},{key:"ondragover",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"ondrop",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"ondragleavebox",value:function(e){return this.setState({isdrop:!1}),e.stopPropagation(),e.preventDefault(),!1}},{key:"ondragenterbox",value:function(e){return this.setState({isdrop:!0}),e.stopPropagation(),e.preventDefault(),!1}},{key:"ondropintobox",value:function(e){this.setState({isdrop:!1});var t=e.dataTransfer.files[0],a=t.name.split(".");if("svga"!==a[a.length-1])return D.a.error("no svga"),!1;this.loadMyFile(t)}},{key:"loadMyFile",value:function(e){var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(){t.setState({file:a.result})}}},{key:"onClear",value:function(){this.fileinput.current.value="",this.setState({file:""})}},{key:"onChangeFile",value:function(e){if(""===this.fileinput.current.value)return!1;var t=e.target.files[0].name.split(".");if("svga"!==t[t.length-1])return D.a.error("no svga"),!1;this.loadMyFile(e.target.files[0])}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:"main"},r.a.createElement(R.a,null,r.a.createElement(F,null,r.a.createElement("span",{className:"logo"},"SVGA TO PNGS"),r.a.createElement("a",{className:"github-link",href:"https://github.com/jsmask",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(I.a,{className:"github-svg"}))),r.a.createElement(N,null,r.a.createElement("div",{ref:this.showbox,className:"show-box ".concat(!0===this.state.isdrop?"is-active":"")},r.a.createElement("input",{ref:this.fileinput,type:"file",accept:"*.svga",onChange:this.onChangeFile.bind(this)}),""===this.state.file?"":r.a.createElement(_,{file:this.state.file,onclear:this.onClear.bind(this)}))),r.a.createElement(P,null))))}}]),a}(r.a.Component),M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null))}}]),a}(r.a.Component);l.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.2b13b855.chunk.js.map