(this["webpackJsonpsvga-to-pngs"]=this["webpackJsonpsvga-to-pngs"]||[]).push([[0],{168:function(e,t,a){e.exports=a(308)},174:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),s=a.n(i),o=(a(173),a(174),a(57)),l=a(58),c=a(64),u=a(63),h=a(44),d=a(78),m=a.n(d),p=a(110),g=a(93),f=a(65),v=a(311),b=a(48),y=a(313),k=a(316),x=a(312),E=a(310),C=a(317),w=a(142),S=a.n(w),j=a(83),O=v.a.TabPane,D=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={isfirst:!0,player:null,list:[],progress:0,custnum:1,columns:[],iscust:!1,colors:["#000000","#ffffff","rgb(234, 236, 63)","rgb(235, 75, 47)","#596feb","#b4e93a"],colorindex:0,iscreate:!0,timer:null},r.canvas=Object(n.createRef)(),r}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.state.player&&this.state.player.clear()}},{key:"componentDidMount",value:function(){var e=this,t=new f.Downloader,a=new f.Parser,n=new f.Player(this.canvas.current);this.createTable(),Object(g.a)(m.a.mark((function r(){var i,s,o,l,c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e.props.file);case 2:return i=r.sent,r.next=5,a.do(i);case 5:return s=r.sent,n.set({loop:1,fillMode:"forwards"}),r.next=9,n.mount(s);case 9:for(l in o=n._renderer._bitmapCache)o.hasOwnProperty(l)&&(c=o[l].src,e.setState({list:[].concat(Object(p.a)(e.state.list),[{key:e.state.list.length,name:"img_".concat(e.state.list.length),pic:c}])}));n.$on("start",(function(){if(e.setState({progress:0}),e.state.iscreate&&e.state.iscust){var t=setInterval((function(){e.createImages()}),n._animator.duration/e.state.custnum);e.setState({timer:t})}})).$on("pause",(function(){e.clearTimer()})).$on("stop",(function(){e.clearTimer()})).$on("end",(function(){e.clearTimer()})).$on("clear",(function(){e.clearTimer()})).$on("process",(function(t){e.setState({progress:n.progress}),e.state.iscreate&&!e.state.iscust&&n.videoItem.frames>e.state.list.length&&e.createImages()})),e.setState({player:n});case 13:case"end":return r.stop()}}),r)})))()}},{key:"clearTimer",value:function(){this.state.timer&&clearInterval(this.state.timer),this.setState({timer:null})}},{key:"onPlay",value:function(){var e=this;this.setState({iscreate:!1}),setTimeout((function(){e.state.player.start()}),200)}},{key:"onCreate",value:function(){this.onPlay(),this.setState({list:[],iscreate:!0})}},{key:"createImages",value:function(){this.setState({list:[].concat(Object(p.a)(this.state.list),[{key:this.state.list.length,name:"img_".concat(this.state.list.length),pic:this.canvas.current.toDataURL("image/png")}])})}},{key:"callback",value:function(e){}},{key:"createTable",value:function(){var e=this;this.setState({columns:[{title:"Name",dataIndex:"name",key:"name",width:120},{title:"Image",dataIndex:"pic",key:"pic",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{alt:"",src:t,style:{height:"100px",backgroundColor:"".concat(e.state.colors[e.state.colorindex])}}))},width:180},{title:"Edit",dataIndex:"key",key:"key",render:function(t,a,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{onClick:e.onDownLoad.bind(e,t,a,n),type:"primary",style:{marginRight:"10px"}},"download"),r.a.createElement(b.a,{onClick:e.onDel.bind(e,t,a,n),type:"primary",danger:!0},"delete"))}}]})}},{key:"onDel",value:function(e,t,a){var n=Object(p.a)(this.state.list);n.splice(this.getListIndex(t,n),1),this.setState({list:n})}},{key:"getListIndex",value:function(e,t){for(var a=0;a<t.length;a++)if(e.key===t[a].key)return a;return-1}},{key:"onDownLoad",value:function(e,t,a){Object(j.saveAs)(t.pic,"".concat(t.name,".png"))}},{key:"onClear",value:function(){this.setState({list:[],player:null,custnum:1}),this.props.onclear()}},{key:"onChange",value:function(){if(this.state.player._animator._isRunning)return!1;this.setState({iscust:!this.state.iscust})}},{key:"onDownloadAll",value:function(){var e=new S.a,t=e.folder("images");this.state.list.forEach((function(e){t.file("".concat(e.name,".png"),e.pic.split(",")[1],{base64:!0})})),e.generateAsync({type:"blob"}).then((function(e){Object(j.saveAs)(e,"images.zip")}))}},{key:"onChangeColor",value:function(e){this.setState({colorindex:e})}},{key:"onChangeSlider",value:function(e){if(this.state.player._animator._isRunning)return!1;this.setState({custnum:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.player,n=t.progress,i=t.columns,s=t.list,o=t.iscust,l=t.custnum,c=t.colors,u=t.colorindex;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"play-box"},r.a.createElement(v.a,{defaultActiveKey:"1",onChange:this.callback.bind(this)},r.a.createElement(O,{tab:"Control",key:"1"},r.a.createElement("canvas",{style:{backgroundColor:c[u]},ref:this.canvas}),r.a.createElement(y.a,{percent:n,showInfo:!1,style:{marginTop:"30px"}}),r.a.createElement("ul",{className:"play-box-info"},r.a.createElement("li",null,"status: ",null!=a?a._animator._isRunning?"playing":"complete":"stop"),r.a.createElement("li",null,"duration: ",null!=a?a._animator.duration+"ms":"null"),r.a.createElement("li",null,"frames: ",null!=a?a.videoItem.frames:"0"),r.a.createElement("li",null,null!=a?"width: ".concat(a.videoItem.videoSize.width," height: ").concat(a.videoItem.videoSize.height):"")),r.a.createElement("ul",{className:"color-box"},c.map((function(t,a){return r.a.createElement("li",{onClick:e.onChangeColor.bind(e,a),key:a,style:{backgroundColor:"".concat(t)}})}))),r.a.createElement("div",null,r.a.createElement(b.a,{type:"primary",onClick:this.onPlay.bind(this),style:{marginRight:"10px"},disabled:a&&a._animator._isRunning},"Play"),r.a.createElement(b.a,{type:"primary",onClick:this.onCreate.bind(this),style:{marginRight:"10px"},disabled:a&&a._animator._isRunning},"Create"),r.a.createElement(b.a,{type:"primary",onClick:this.onDownloadAll.bind(this),icon:r.a.createElement(C.a,null),style:{marginRight:"10px"},disabled:a&&a._animator._isRunning},"Download all"),r.a.createElement(b.a,{type:"primary",onClick:this.onClear.bind(this),disabled:a&&a._animator._isRunning,danger:!0},"Destroy")),a&&a._animator._isRunning?"":r.a.createElement("div",{style:{marginTop:"30px",marginBottom:"30px"}},r.a.createElement("label",null,"custom\uff1a")," ",r.a.createElement(k.a,{size:"small",defaultChecked:o,onChange:this.onChange.bind(this)}),r.a.createElement(x.a,{onChange:this.onChangeSlider.bind(this),max:null!=a?a.videoItem.frames:100,min:1,defaultValue:l,disabled:!o}))),r.a.createElement(O,{tab:"More",key:"2"},r.a.createElement(E.a,{columns:i,dataSource:s})))))}}]),a}(r.a.Component),_=a(314),R=a(315),I=_.a.Search,L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={error:null,file:"",player:null},r.onChange=r.onChange.bind(Object(h.a)(r)),r.canvas=Object(n.createRef)(),r}return Object(l.a)(a,[{key:"onChange",value:function(e){if(""===e||""===e.trim())return!1;this.createAnimation(e),this.setState({file:e})}},{key:"randomString",value:function(e){for(var t=e||32,a="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=a.length,r="",i=0;i<t;i++)r+=a.charAt(Math.floor(Math.random()*n));return r}},{key:"createAnimation",value:function(e){var t=this,a=new f.Downloader,n=new f.Parser;Object(g.a)(m.a.mark((function r(){var i,s,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=null,null==t.state.player?(i=new f.Player(t.canvas.current),t.setState({player:i})):i=t.state.player,r.prev=2,r.next=5,a.get(e);case 5:return s=r.sent,r.next=8,n.do(s);case 8:return o=r.sent,i.clear(),i.set({loop:-1,fillMode:"forwards"}),r.next=13,i.mount(o);case 13:i.start(),r.next=20;break;case 16:r.prev=16,r.t0=r.catch(2),t.setState({file:""}),R.a.error("error svga");case 20:case"end":return r.stop()}}),r,null,[[2,16]])})))()}},{key:"onDownload",value:function(){""!==this.state.file&&Object(j.saveAs)(this.state.file,"".concat(this.randomString(8),".svga"))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{style:{width:"640px",marginLeft:"27px",marginTop:"30px",marginBottom:"30px"},placeholder:"input base64 text",enterButton:"change",size:"large",onSearch:this.onChange}),r.a.createElement("div",{style:{margin:"30px"}},r.a.createElement("canvas",{style:{backgroundColor:"#000000",maxHeight:"480px"},ref:this.canvas})),r.a.createElement(b.a,{style:{marginLeft:"30px"},disabled:""===this.state.file,type:"primary",icon:r.a.createElement(C.a,null),onClick:this.onDownload.bind(this)},"Download"))}}]),a}(n.Component),F=a(319),P=a(318),T=a(309),A=T.a.Header,M=T.a.Footer,N=T.a.Content,B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={file:"",isdrop:!1,ischange:!1},r.showbox=Object(n.createRef)(),r.fileinput=Object(n.createRef)(),r.ondragover=r.ondragover.bind(Object(h.a)(r)),r.ondrop=r.ondrop.bind(Object(h.a)(r)),r.ondragenterbox=r.ondragenterbox.bind(Object(h.a)(r)),r.ondragleavebox=r.ondragleavebox.bind(Object(h.a)(r)),r.ondropintobox=r.ondropintobox.bind(Object(h.a)(r)),r.loadMyFile=r.loadMyFile.bind(Object(h.a)(r)),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("drop",this.ondrop),document.addEventListener("dragover",this.ondragover),this.showbox.current.addEventListener("dragenter",this.ondragenterbox),this.showbox.current.addEventListener("dragleave",this.ondragleavebox),this.showbox.current.addEventListener("drop",this.ondropintobox)}},{key:"componentDidUpdate",value:function(e,t){t.ischange&&(this.showbox.current.addEventListener("dragenter",this.ondragenterbox),this.showbox.current.addEventListener("dragleave",this.ondragleavebox),this.showbox.current.addEventListener("drop",this.ondropintobox))}},{key:"ondragover",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"ondrop",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"ondragleavebox",value:function(e){return this.setState({isdrop:!1}),e.stopPropagation(),e.preventDefault(),!1}},{key:"ondragenterbox",value:function(e){return this.setState({isdrop:!0}),e.stopPropagation(),e.preventDefault(),!1}},{key:"ondropintobox",value:function(e){this.setState({isdrop:!1});var t=e.dataTransfer.files[0],a=t.name.split(".");if("svga"!==a[a.length-1])return R.a.error("no svga"),!1;this.loadMyFile(t)}},{key:"loadMyFile",value:function(e){var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(){console.log(a.result),t.setState({file:a.result})}}},{key:"onClear",value:function(){this.fileinput.current&&(this.fileinput.current.value=""),this.setState({file:""})}},{key:"onChangeFile",value:function(e){if(""===this.fileinput.current.value)return!1;var t=e.target.files[0].name.split(".");if("svga"!==t[t.length-1])return R.a.error("no svga"),!1;this.loadMyFile(e.target.files[0])}},{key:"changeBase64State",value:function(e){this.setState({ischange:e}),this.onClear()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{className:"main"},r.a.createElement(T.a,null,r.a.createElement(A,null,r.a.createElement("span",{className:"logo",onClick:this.changeBase64State.bind(this,!1)},"SVGA TO PNGS"),r.a.createElement("a",{className:"github-link",href:"https://github.com/jsmask",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(F.a,{className:"github-svg"})),r.a.createElement(b.a,{style:{marginLeft:"60px"},onClick:this.changeBase64State.bind(this,!this.state.ischange),type:"primary",shape:"round"},r.a.createElement(P.a,null),this.state.ischange?"to pngs":"base64 change")),r.a.createElement(N,null,!1===this.state.ischange?r.a.createElement("div",{ref:this.showbox,className:"show-box ".concat(!0===this.state.isdrop?"is-active":"")},r.a.createElement("input",{ref:this.fileinput,type:"file",accept:"*.svga",onChange:this.onChangeFile.bind(this)}),""===this.state.file?"":r.a.createElement(D,{file:this.state.file,onclear:this.onClear.bind(this)})):r.a.createElement(L,null)),r.a.createElement(M,null))))}}]),a}(r.a.Component),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null))}}]),a}(r.a.Component);s.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.ce47f61a.chunk.js.map