{"version":3,"sources":["view/PlayBox.js","view/ShowBox.js","App.js","index.js"],"names":["TabPane","Tabs","PlayBox","props","state","isfirst","player","list","progress","custnum","columns","iscust","colors","colorindex","iscreate","canvas","createRef","downloader","Downloader","parser","Parser","Player","this","current","createTable","a","get","file","fileData","do","svgaData","set","loop","fillMode","mount","key","obj","_renderer","_bitmapCache","hasOwnProperty","src","setState","length","name","pic","timer","$on","videoItem","frames","createImages","setInterval","_animator","duration","clearInterval","e","setTimeout","start","onPlay","toDataURL","title","dataIndex","width","render","alt","style","height","backgroundColor","record","index","onClick","onDownLoad","bind","type","marginRight","onDel","danger","splice","saveAs","onclear","_isRunning","zip","JSZip","img","folder","forEach","item","split","base64","generateAsync","then","content","value","className","defaultActiveKey","onChange","callback","tab","ref","percent","showInfo","marginTop","videoSize","map","onChangeColor","disabled","onCreate","onDownloadAll","icon","DownloadOutlined","onClear","marginBottom","size","defaultChecked","onChangeSlider","max","min","defaultValue","dataSource","React","Component","Header","Layout","Footer","Content","ShowBox","isdrop","showbox","fileinput","ondragover","ondrop","ondragenterbox","ondragleavebox","ondropintobox","loadMyFile","document","addEventListener","stopPropagation","preventDefault","dataTransfer","files","names","message","error","reader","FileReader","readAsDataURL","onload","result","target","accept","onChangeFile","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.a5b8676a.chunk.js","sourcesContent":["import React, { createRef } from 'react';\r\nimport { Downloader, Parser, Player } from 'svga.lite';\r\nimport { Button, Progress, Table, Tabs, Switch, Slider } from 'antd';\r\nimport { DownloadOutlined } from '@ant-design/icons';\r\nimport JSZip from 'jszip'\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nclass PlayBox extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isfirst: true,\r\n            player: null,\r\n            list: [],\r\n            progress: 0,\r\n            custnum: 1,\r\n            columns: [],\r\n            iscust: false,\r\n            colors: ['#000000', '#ffffff', 'rgb(234, 236, 63)', 'rgb(235, 75, 47)', '#596feb', '#b4e93a'],\r\n            colorindex: 0,\r\n            iscreate:true\r\n        }\r\n        this.canvas = createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const downloader = new Downloader();\r\n        const parser = new Parser();\r\n        const player = new Player(this.canvas.current);\r\n\r\n        this.createTable();\r\n\r\n        ; (async () => {\r\n\r\n            // this.canvas.current.width = this.canvas.current.clientWidth;\r\n            // this.canvas.current.height = this.canvas.current.clientHeight;\r\n\r\n            const fileData = await downloader.get(this.props.file)\r\n            const svgaData = await parser.do(fileData)\r\n\r\n            player.set({\r\n                loop: 1,\r\n                fillMode: 'forwards'\r\n            });\r\n\r\n            await player.mount(svgaData);\r\n\r\n            let obj = player._renderer._bitmapCache;\r\n            for (const key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    const src = obj[key].src;\r\n                    this.setState({\r\n                        list: [...this.state.list, {\r\n                            key: this.state.list.length,\r\n                            name: `img_${this.state.list.length}`,\r\n                            pic: src\r\n                        }]\r\n                    })\r\n                }\r\n            }\r\n\r\n            var timer = null;\r\n\r\n            player\r\n                .$on('start', () => {\r\n                    this.setState({\r\n                        progress: 0\r\n                    });\r\n                    if(this.state.iscreate){\r\n                        if(player.videoItem.frames>this.state.list.length&&!this.state.iscust){\r\n                            this.createImages();\r\n                        }\r\n                        if(this.state.iscust){\r\n                            this.createImages();\r\n                            timer = setInterval(()=>{\r\n                                this.createImages();\r\n                            },player._animator.duration/this.state.custnum);\r\n                        }\r\n                    }\r\n                })\r\n                .$on('pause', () => {                   \r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('stop', () => {\r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('end', () => {\r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('clear', () => {\r\n                    clearInterval(timer)\r\n                    timer = null;\r\n                })\r\n                .$on('process', (e) => {\r\n                    this.setState({\r\n                        progress: player.progress\r\n                    });\r\n                    if(this.state.iscreate&&!this.state.iscust){\r\n                        if(player.videoItem.frames>this.state.list.length){\r\n                            this.createImages();\r\n                        }\r\n                    }\r\n                });\r\n\r\n            this.setState({\r\n                player\r\n            });\r\n\r\n            //this.state.player.start();\r\n\r\n            //console.log(this.state.player)\r\n        })()\r\n    }\r\n\r\n    onPlay(){\r\n        this.setState({\r\n            iscreate:false\r\n        });\r\n        setTimeout(() => {\r\n            this.state.player.start();\r\n        }, 200)\r\n    }\r\n\r\n    onCreate() {\r\n        this.onPlay();\r\n        this.setState({\r\n            list: [],\r\n            iscreate:true\r\n        });\r\n    }\r\n\r\n    createImages() {\r\n        this.setState({\r\n            list: [...this.state.list, {\r\n                key: this.state.list.length,\r\n                name: `img_${this.state.list.length}`,\r\n                pic: this.canvas.current.toDataURL(\"image/png\")\r\n            }]\r\n        });\r\n    }\r\n\r\n    callback(key) {\r\n        //console.log(key);\r\n    }\r\n\r\n    createTable() {\r\n        this.setState({\r\n            columns: [\r\n                {\r\n                    title: 'Name',\r\n                    dataIndex: 'name',\r\n                    key: 'name',\r\n                    width: 120,\r\n                },\r\n                {\r\n                    title: 'Image',\r\n                    dataIndex: 'pic',\r\n                    key: 'pic',\r\n                    render: src => (\r\n                        <>\r\n                            <img alt=\"\" src={src} style={{ height: \"100px\", backgroundColor: `${this.state.colors[this.state.colorindex]}` }} />\r\n                        </>\r\n                    ),\r\n                    width: 180,\r\n                },\r\n                {\r\n                    title: 'Edit',\r\n                    dataIndex: 'key',\r\n                    key: 'key',\r\n                    render: (key, record, index) => (\r\n                        <>\r\n                            <Button onClick={this.onDownLoad.bind(this, key, record, index)} type=\"primary\" style={{ marginRight: \"10px\" }}>download</Button>\r\n                            <Button onClick={this.onDel.bind(this, key, record, index)} type=\"primary\" danger>delete</Button>\r\n                        </>\r\n                    )\r\n                }\r\n            ]\r\n        });\r\n    }\r\n\r\n    onDel(key, record, index) {\r\n        let list = [...this.state.list];\r\n        list.splice(index, 1);\r\n        this.setState({\r\n            list\r\n        })\r\n    }\r\n\r\n    onDownLoad(key, record, index) {\r\n        saveAs(record[\"pic\"], `${record[\"name\"]}.png`);\r\n    }\r\n\r\n    onClear() {\r\n        this.setState({\r\n            list: [],\r\n            player: null,\r\n            custnum:1\r\n        });\r\n        this.props.onclear();\r\n    }\r\n\r\n    onChange() {\r\n        if(this.state.player._animator._isRunning){\r\n            return false;\r\n        }\r\n        this.setState({\r\n            iscust: !this.state.iscust\r\n        })\r\n    }\r\n\r\n    onDownloadAll() {\r\n        let zip = new JSZip();\r\n        let img = zip.folder(\"images\");\r\n        this.state.list.forEach(item => {\r\n            img.file(`${item[\"name\"]}.png`, item[\"pic\"].split(',')[1], { base64: true });\r\n        })\r\n        zip.generateAsync({ type: \"blob\" })\r\n            .then(function (content) {\r\n                saveAs(content, \"images.zip\");\r\n            });\r\n    }\r\n\r\n    onChangeColor(index) {\r\n        this.setState({\r\n            colorindex: index\r\n        })\r\n    }\r\n\r\n    onChangeSlider(value){\r\n        if(this.state.player._animator._isRunning){\r\n            return false;\r\n        }\r\n        this.setState({\r\n            custnum:value\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { player, progress, columns, list, iscust, custnum, colors, colorindex } = this.state;\r\n        return (\r\n            <>\r\n                <div className=\"play-box\">\r\n\r\n                    <Tabs defaultActiveKey=\"1\" onChange={this.callback.bind(this)}>\r\n                        <TabPane tab=\"Control\" key=\"1\">\r\n                            <canvas style={{ backgroundColor: colors[colorindex] }} ref={this.canvas}></canvas>\r\n\r\n                            <Progress percent={progress} showInfo={false} style={{ marginTop: \"30px\" }} />\r\n\r\n                            <ul className=\"play-box-info\">\r\n                                <li>\r\n                                    status: {player != null ? (player._animator._isRunning ? 'playing' : 'complete') : 'stop'}\r\n                                </li>\r\n                                <li>\r\n                                    duration: {player != null ? (player._animator.duration + 'ms') : 'null'}\r\n                                </li>\r\n                                <li>\r\n                                    frames: {player != null ? (player.videoItem.frames) : '0'}\r\n                                </li>\r\n                                <li>\r\n                                    {player != null ? (`width: ${player.videoItem.videoSize.width} height: ${player.videoItem.videoSize.height}`) : \"\"}\r\n                                </li>\r\n                            </ul>\r\n\r\n                            <ul className=\"color-box\">\r\n                                {colors.map((item, index) => (<li onClick={this.onChangeColor.bind(this, index)} key={index} style={{ backgroundColor: `${item}` }}></li>))}\r\n                            </ul>\r\n\r\n                            <div>\r\n                                <Button type=\"primary\" onClick={this.onPlay.bind(this)} style={{ marginRight: \"10px\" }} disabled={player && player._animator._isRunning}>Play</Button>\r\n                                <Button type=\"primary\" onClick={this.onCreate.bind(this)} style={{ marginRight: \"10px\" }} disabled={player && player._animator._isRunning}>Create</Button>\r\n                                <Button type=\"primary\" onClick={this.onDownloadAll.bind(this)} icon={<DownloadOutlined />} style={{ marginRight: \"10px\" }} disabled={player && player._animator._isRunning}>Download all</Button>\r\n                                <Button type=\"primary\" onClick={this.onClear.bind(this)} disabled={player && player._animator._isRunning} danger>Destroy</Button>\r\n                            </div>\r\n\r\n                            {\r\n                                player&&player._animator._isRunning?\"\":(\r\n                                    <div style={{marginTop: \"30px\", marginBottom: \"30px\" }}>\r\n                                        <label>custom：</label> <Switch size=\"small\" defaultChecked={iscust} onChange={this.onChange.bind(this)} />\r\n                                        <Slider onChange={this.onChangeSlider.bind(this)} max={player != null?(player.videoItem.frames):100} min={1} defaultValue={custnum} disabled={!iscust} />\r\n                                    </div>\r\n                                )\r\n                            }\r\n\r\n\r\n                        </TabPane>\r\n\r\n                        <TabPane tab=\"More\" key=\"2\">\r\n                            {<Table columns={columns} dataSource={list} />}\r\n                        </TabPane>\r\n                    </Tabs>\r\n\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PlayBox;","import React, { createRef } from 'react';\r\nimport PlayBox from './PlayBox';\r\nimport { message,Layout } from 'antd';\r\nconst { Header, Footer, Content } = Layout;\r\n\r\nclass ShowBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            file: \"\",\r\n            isdrop: false\r\n        }\r\n        this.showbox = createRef();\r\n        this.fileinput = createRef();\r\n\r\n        this.ondragover = this.ondragover.bind(this);\r\n        this.ondrop = this.ondrop.bind(this);\r\n        this.ondragenterbox = this.ondragenterbox.bind(this);\r\n        this.ondragleavebox = this.ondragleavebox.bind(this);\r\n        this.ondropintobox = this.ondropintobox.bind(this);\r\n        this.loadMyFile = this.loadMyFile.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener(\"drop\", this.ondrop);\r\n        document.addEventListener(\"dragover\", this.ondragover);\r\n        this.showbox.current.addEventListener(\"dragenter\", this.ondragenterbox);\r\n        this.showbox.current.addEventListener(\"dragleave\", this.ondragleavebox);\r\n        this.showbox.current.addEventListener(\"drop\", this.ondropintobox);\r\n    }\r\n\r\n    ondragover(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondrop(e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondragleavebox(e) {\r\n        this.setState({ isdrop: false })\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondragenterbox(e) {\r\n        this.setState({ isdrop: true })\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ondropintobox(e) {\r\n        this.setState({\r\n            isdrop: false\r\n        });\r\n        let file = e.dataTransfer.files[0];\r\n        let names = file.name.split(\".\");\r\n        if (names[names.length - 1] !== \"svga\") {\r\n            message.error('no svga');\r\n            return false;\r\n        }\r\n        this.loadMyFile(file);\r\n    }\r\n\r\n    loadMyFile(file) {\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => {\r\n            this.setState({\r\n                file: reader.result\r\n            })\r\n        }\r\n    }\r\n\r\n    onClear(){    \r\n        this.fileinput.current.value = \"\";    \r\n        this.setState({\r\n            file:\"\"\r\n        })\r\n    }\r\n\r\n    onChangeFile(e){\r\n        if(this.fileinput.current.value===\"\") return false;\r\n        let names = e.target.files[0].name.split(\".\");\r\n        if (names[names.length - 1] !== \"svga\") {\r\n            message.error('no svga');\r\n            return false;\r\n        }\r\n        this.loadMyFile(e.target.files[0])\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Layout className=\"main\">\r\n                    <Layout>\r\n                        <Header>\r\n                           <span className=\"logo\">SVGA TO PNGS</span>\r\n                        </Header>\r\n                        <Content>\r\n                            <div ref={this.showbox} className={`show-box ${this.state.isdrop === true ? 'is-active' : ''}`}>\r\n                                <input ref={this.fileinput} type=\"file\" accept=\"*.svga\" onChange={this.onChangeFile.bind(this)} />\r\n                                {this.state.file === \"\" ? \"\" : <PlayBox file={this.state.file} onclear = {this.onClear.bind(this)} />}\r\n                            </div>\r\n                        </Content>\r\n                        <Footer></Footer>\r\n                    </Layout>\r\n                </Layout>\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShowBox;","import React from 'react';\nimport ShowBox from './view/ShowBox';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <>\n        <ShowBox></ShowBox>\n      </>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css'\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}