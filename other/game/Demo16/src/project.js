window.__require=function t(e,o,i){function n(r,c){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!c&&p)return p(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return n(e[r][1][t]||t)},u,u.exports,t,e,o,i)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({boom:[function(t,e,o){"use strict";cc._RF.push(e,"f453dnIUo1EULmz8geOrukz","boom"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sound=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this;this.sound&&this.sound.play();var e=this.node.getComponent(cc.Animation);e.play(),e.on("finished",function(){return t.node.destroy()},this)},__decorate([a(cc.AudioSource)],e.prototype,"sound",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"52b0cMYvdJOda6d4yvrWC3t","bullet"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.power=1,e.isDestroy=!1,e.sendTime=1,e.sender="",e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this,e=cc.moveBy(this.sendTime,cc.v2(0,-1500));"player"==this.sender&&(e=cc.moveBy(this.sendTime,cc.v2(0,1500))),this.node.runAction(cc.sequence(e,cc.callFunc(function(){t.isDestroy=!0})))},e.prototype.onCollisionEnter=function(t){t.node.name!=this.sender&&(this.isDestroy=!0)},e.prototype.update=function(t){this.isDestroy&&this.node.destroy()},__decorate([a(Number)],e.prototype,"power",void 0),__decorate([a(Number)],e.prototype,"sendTime",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],common:[function(t,e,o){"use strict";cc._RF.push(e,"176aeoCDVtC+JmGiEFb+XFt","common"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./dialogBox"),n=t("./config"),a=t("./toastBox"),r=function(){function t(t){var e=t.msg,o=t.type,i=t.callFunc,n=t.parent;this.msg="",this.type=1,this.callFunc=null,this.parent=null,this.msg=e,this.type=o,this.callFunc=i,this.parent=n,this.open()}return t.prototype.open=function(){this.load()},t.prototype.load=function(){var t=this;cc.loader.loadRes("prefab/ui/dialog",function(e,o){if(e)return e;t.create(o)})},t.prototype.create=function(t){var e=cc.instantiate(t).getComponent(i.default);e.msg=this.msg,e.type=this.type,e.callback=this.callFunc,e.node.setParent(this.parent),e.init()},t}();o.Dialog=r;var c=function(){function t(){this.ip="",this.ip=n.default.BASEURL}return t.prototype.showLoading=function(){n.default.GLOBAL.load&&n.default.GLOBAL.load.show()},t.prototype.hideLoading=function(){n.default.GLOBAL.load&&n.default.GLOBAL.load.hide()},t.prototype.get=function(t,e,o,i){var n=this;for(var a in void 0===i&&(i=!0),i&&this.showLoading(),t+="?",e)t+=a+"="+e[a]+"&";""!=t&&(t=t.substring(0,t.length-1));var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){if(r.status>=200&&r.status<400){var t=r.responseText;if(t){var e=JSON.parse(t);o(e)}else o(!1)}else o(!1);i&&n.hideLoading()}},r.open("GET",this.ip+t,!0),r.send()},t.prototype.post=function(t,e,o,i){var n=this;void 0===i&&(i=!0),i&&this.showLoading();var a="";for(var r in e)a+=r+"="+e[r]+"&";""!=a&&(a=a.substring(0,t.length-1));var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState){if(c.status>=200&&c.status<400){var t=c.responseText;if(t){var e=JSON.parse(t);o(e)}else o(!1)}else o(!1);i&&n.hideLoading()}},c.open("POST",this.ip+t,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(a)},t}();o.Ajax=c;var s=function(){function t(t){this.audio=null,this.init(t)}return t.prototype.init=function(t){var e=this;cc.loader.loadRes("prefab/other/tap",function(o,i){if(o)return o;e.create(i),t&&t()})},t.prototype.create=function(t){this.audio=cc.instantiate(t).getComponent(cc.AudioSource),cc.game.addPersistRootNode(this.audio.node)},t.prototype.play=function(){this.audio&&this.audio.play()},t.prototype.pause=function(){this.audio&&this.audio.pause()},t}();o.TapAudio=s;var p=function(){function t(){this.node=null,this.init()}return t.prototype.init=function(){var t=this;cc.loader.loadRes("prefab/ui/loading",function(e,o){if(e)return e;t.node=cc.instantiate(o),t.node.active=!1,cc.game.addPersistRootNode(t.node)})},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t}();o.Load=p,o.deepClone=function(t,e){e=e||{};var o=Object.prototype.toString,i=o.call([]);for(var n in t)t.hasOwnProperty(n)&&(null!==t[n]&&"object"==typeof t[n]?(e[n]=o.call(t[n])==i?[]:{},this.deepClone(t[n],e[n])):e[n]=t[n]);return e},o.setSpriteFrame=function(t,e){cc.loader.load(t,function(t,o){if(t)return t;e.spriteFrame=new cc.SpriteFrame(o)})},o.createToast=function(){return new Promise(function(t,e){cc.loader.loadRes("prefab/ui/toastBox",function(o,i){if(o)return e(o);var n=cc.instantiate(i).getComponent(a.default);cc.game.addPersistRootNode(n.node),t(n)})})},cc._RF.pop()},{"./config":"config","./dialogBox":"dialogBox","./toastBox":"toastBox"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"5dda1clbEZG7JG20QWwuke9","config"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={BASEURL:"https://www.easy-mock.com/mock/5d53751d2a7de64a06747cc6/",BGMSWICH:!1,GLOBAL:{load:null,tap:null,toast:null},GROUPTYPE:{DEFAULT:"default",PLAYER:"player",ENEMY:"enemy",BULLET:"bullet",UI:"ui"},PLAYERINFO:{0:{user_id:102012,has:[1],nickname:"JSMask",sorce:0,life:1,type:1,history:800,head_pic:"http://s.aigei.com/src/img/png/08/08eff37f0818417e8195a4a001756e72.png?imageMogr2/auto-orient/thumbnail/!99x99r/gravity/Center/crop/99x99/quality/85/&e=1735488000&token=P7S2Xpzfz11vAkASLTkfHN7Fw-oOZBecqeJaxypL:T3UUntkL-979CaY7FvjNKq04D2Q="},1:{user_id:102013,has:[1],nickname:"\u4eca\u665a\u6253\u8001\u864e",sorce:555,life:0,type:1,history:12800,head_pic:"http://s.aigei.com/src/img/png/2c/2c8f1ee165ea4b9ab8b38e7d88eb8531.png?imageMogr2/auto-orient/thumbnail/!99x99r/gravity/Center/crop/99x99/quality/85/&e=1735488000&token=P7S2Xpzfz11vAkASLTkfHN7Fw-oOZBecqeJaxypL:UY_MwNbe7cDZyaSW4ltjWOkVhS4="}}},cc._RF.pop()},{}],dialogBox:[function(t,e,o){"use strict";cc._RF.push(e,"31c05NJSyFGbqS5TwT093Jt","dialogBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msgLabel=null,e.okBtn=null,e.okFrame=[],e.msg="",e.type=0,e.callback=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.open=function(){},e.prototype.playAudio=function(){i.default.GLOBAL.tap&&i.default.GLOBAL.tap.play()},e.prototype.start=function(){},e.prototype.init=function(){this.msgLabel.string=""+this.msg,this.okBtn.spriteFrame=this.okFrame[this.type]},e.prototype.onClose=function(){this.playAudio(),this.node.destroy()},e.prototype.onOk=function(){this.callback&&this.callback(),this.playAudio(),this.onClose()},__decorate([r(cc.Label)],e.prototype,"msgLabel",void 0),__decorate([r(cc.Sprite)],e.prototype,"okBtn",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"okFrame",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./config":"config"}],end:[function(t,e,o){"use strict";cc._RF.push(e,"508457LtYpDz5Au3InVBs19","end"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./common"),a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.myScore=null,e.otherScore=null,e.leftBox=null,e.rightBox=null,e.myInfo=null,e.otherInfo=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.leftBox=this.node.getChildByName("left"),this.rightBox=this.node.getChildByName("right"),this.myInfo=n.deepClone(i.default.PLAYERINFO[0],{}),this.otherInfo=n.deepClone(i.default.PLAYERINFO[1],{}),this.myScore.string=this.myInfo.sorce+"\u5206",this.otherScore.string=this.otherInfo.sorce+"\u5206",this.leftBox.getChildByName("nickname").getComponent(cc.Label).string=""+this.myInfo.nickname,this.rightBox.getChildByName("nickname").getComponent(cc.Label).string=""+this.otherInfo.nickname,this.myInfo.sorce<=this.myInfo.history&&(this.leftBox.getChildByName("head").getChildByName("icon_new").active=!1),this.otherInfo.sorce<=this.otherInfo.history&&(this.rightBox.getChildByName("head").getChildByName("icon_new").active=!1);var t=this.leftBox.getChildByName("head").getChildByName("mask").getChildByName("face").getComponent(cc.Sprite),e=this.rightBox.getChildByName("head").getChildByName("mask").getChildByName("face").getComponent(cc.Sprite);n.setSpriteFrame(this.myInfo.head_pic,t),n.setSpriteFrame(this.otherInfo.head_pic,e),this.playAnimation(),i.default.PLAYERINFO[0].sorce>i.default.PLAYERINFO[0].history&&(i.default.PLAYERINFO[0].history=i.default.PLAYERINFO[0].sorce)},e.prototype.playAudio=function(){i.default.GLOBAL.tap&&i.default.GLOBAL.tap.play()},e.prototype.start=function(){},e.prototype.playAnimation=function(){var t=this,e=this.myInfo.sorce>=this.otherInfo.sorce?"success":"fail";this.node.getComponent(cc.Animation).play(),this.scheduleOnce(function(){var o=t.node.getChildByName(e+"_audio");t.node.getChildByName(e).getComponent(cc.Animation).play(),o&&o.getComponent(cc.AudioSource).play()},.2)},e.prototype.showLoading=function(){i.default.GLOBAL.load&&i.default.GLOBAL.load.show()},e.prototype.hideLoading=function(){i.default.GLOBAL.load&&i.default.GLOBAL.load.hide()},e.prototype.onAgain=function(){var t=this;this.playAudio(),this.showLoading(),this.scheduleOnce(function(){cc.director.loadScene("start"),t.hideLoading()},.25)},e.prototype.onShare=function(){this.playAudio(),cc.log("\u5206\u4eab")},__decorate([c(cc.Label)],e.prototype,"myScore",void 0),__decorate([c(cc.Label)],e.prototype,"otherScore",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./common":"common","./config":"config"}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"3ae06rzB3ND35QbJ1pgKml4","enemy"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./bullet"),n=t("./config"),a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=[],e.boom=null,e.maxhp=1,e.sprintCycle=-1,e.sprintTime=-1,e.score=100,e.speed=3,e.fireTime=1,e.isMove=!1,e.hp=1,e.bulletType=0,e.main=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.hp=this.maxhp},e.prototype.start=function(){var t=this;this.node.runAction(cc.sequence(cc.cardinalSplineBy(Math.abs(10-this.speed),[cc.v2(0,0),cc.v2(this.getRandom(-100,100),-1500)],1),cc.callFunc(function(){t.node.destroy()})))},e.prototype.getRandom=function(t,e){return Math.random()*(e-t)+t},e.prototype.onCollisionEnter=function(t){var e=t.node;if(e.group===n.default.GROUPTYPE.BULLET){var o=e.getComponent(i.default);o.sender!=this.node.name&&(this.hp-=o.power)}e.group==n.default.GROUPTYPE.PLAYER&&(this.hp-=10),this.hp<=0&&this.onByby()},e.prototype.onfire=function(){},e.prototype.onByby=function(){this.createBoom(),this.node.destroy(),this.main&&this.main.destroyEnemy(this.score)},e.prototype.createBoom=function(){var t=cc.instantiate(this.boom);t&&(t.setPosition(this.node.position),t.setParent(this.node.parent))},e.prototype.update=function(t){},__decorate([c([cc.Prefab])],e.prototype,"bulletPrefab",void 0),__decorate([c(cc.Prefab)],e.prototype,"boom",void 0),__decorate([c(Number)],e.prototype,"maxhp",void 0),__decorate([c(Number)],e.prototype,"sprintCycle",void 0),__decorate([c(Number)],e.prototype,"sprintTime",void 0),__decorate([c(Number)],e.prototype,"score",void 0),__decorate([c(Number)],e.prototype,"speed",void 0),__decorate([c(Number)],e.prototype,"fireTime",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./bullet":"bullet","./config":"config"}],equipItem:[function(t,e,o){"use strict";cc._RF.push(e,"c18efP/6QhOlqbg/v0O7JGX","equipItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.face=null,e.starFrame=[],e.priceTxt=null,e.price=0,e.star=0,e.id=0,e.type=0,e.statusBox=null,e.starBox=null,e.main=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.starBox=this.node.getChildByName("starBox"),this.statusBox=this.node.getChildByName("statusBox")},e.prototype.playAudio=function(){i.default.GLOBAL.tap&&i.default.GLOBAL.tap.play()},e.prototype.start=function(){var t=this;this.statusBox.getChildByName("btn0").on(cc.Node.EventType.TOUCH_START,function(){t.main&&t.main.onExchange(t),t.playAudio()},this),this.statusBox.getChildByName("btn1").on(cc.Node.EventType.TOUCH_START,function(){t.main&&t.main.onWear(t),t.playAudio()},this)},e.prototype.setAttr=function(t){this.price=t.price,this.type=t.type,this.star=t.star,this.id=t.id,this.priceTxt.string=""+this.price,this.setSpriteFrame(),this.setStar(),this.setStatus()},e.prototype.setStatus=function(){-1===i.default.PLAYERINFO[0].has.indexOf(this.type)&&this.changeStatus("btn0"),i.default.PLAYERINFO[0].has.indexOf(this.type)>-1&&this.type!=i.default.PLAYERINFO[0].type&&this.changeStatus("btn1"),i.default.PLAYERINFO[0].has.indexOf(this.type)>-1&&this.type==i.default.PLAYERINFO[0].type&&this.changeStatus("btn2")},e.prototype.changeStatus=function(t){this.statusBox.children.forEach(function(e){(e.group=i.default.GROUPTYPE.UI)&&(e.name.indexOf(""+t)>-1?e.active=!0:e.active=!1)})},e.prototype.setStar=function(){var t=this;this.starBox.children.map(function(e,o){var i=2*t.star;e.getComponent(cc.Sprite).spriteFrame=i%2==0?i/2>o?t.starFrame[2]:t.starFrame[0]:(i-1)/2>o?t.starFrame[2]:(i-1)/2===o?t.starFrame[1]:t.starFrame[0]})},e.prototype.setSpriteFrame=function(){var t=this;cc.loader.loadRes("pic/arms/"+(this.type<10?"0"+this.type:this.type)+"/zhanji_1_150",function(e,o){t.face.spriteFrame=new cc.SpriteFrame(o)})},__decorate([r(cc.Sprite)],e.prototype,"face",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"starFrame",void 0),__decorate([r(cc.Label)],e.prototype,"priceTxt",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./config":"config"}],equip:[function(t,e,o){"use strict";cc._RF.push(e,"60c2bG9HZtPrJM5HtU23rQU","equip"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./equipItem"),n=t("./config"),a=t("./common"),r=cc._decorator,c=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.equipPreb=null,e.data=[],e.ajax=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.ajax=new a.Ajax,this.getData()},e.prototype.playAudio=function(){n.default.GLOBAL.tap&&n.default.GLOBAL.tap.play()},e.prototype.getData=function(){var t=this;this.ajax.get("mmgame/equip",{},function(e){if(!e)return n.default.GLOBAL.toast&&n.default.GLOBAL.toast.show("\u7cfb\u7edf\u9519\u8bef"),!1;1==e.status?(t.data=e.result.data,t.addItem()):n.default.GLOBAL.toast&&n.default.GLOBAL.toast.show(e.msg)})},e.prototype.onClose=function(){this.playAudio(),this.node.active=!1},e.prototype.start=function(){},e.prototype.onExchange=function(t){var e=this;new a.Dialog({msg:"\u662f\u5426\u786e\u8ba4\u5151\u6362\uff1f",parent:this.node,type:1,callFunc:function(){e.ajax.post("mmgame/exchange",{uid:n.default.PLAYERINFO[0].user_id,id:t.id},function(o){if(!o)return n.default.GLOBAL.toast&&n.default.GLOBAL.toast.show("\u7cfb\u7edf\u9519\u8bef"),!1;1==o.status?(n.default.PLAYERINFO[0].has.push(t.type),e.render()):n.default.GLOBAL.toast&&n.default.GLOBAL.toast.show(o.msg)})}})},e.prototype.onWear=function(t){var e=this;this.ajax.post("mmgame/wear",{uid:n.default.PLAYERINFO[0].user_id,id:t.id},function(o){if(!o)return n.default.GLOBAL.toast&&n.default.GLOBAL.toast.show("\u7cfb\u7edf\u9519\u8bef"),!1;1==o.status?(n.default.PLAYERINFO[0].type=t.type,e.render()):n.default.GLOBAL.toast&&n.default.GLOBAL.toast.show(o.msg)})},e.prototype.render=function(){this.content.children.forEach(function(t){t.getComponent(i.default).setStatus()})},e.prototype.addItem=function(){var t=this;this.data.map(function(e){var o=t.createItem();o.main=t,o.setAttr({id:e.id,price:e.price,type:e.type,star:e.star})})},e.prototype.createItem=function(){var t=cc.instantiate(this.equipPreb).getComponent(i.default);return t.node.setParent(this.content),t},__decorate([s(cc.Node)],e.prototype,"content",void 0),__decorate([s(cc.Prefab)],e.prototype,"equipPreb",void 0),e=__decorate([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common":"common","./config":"config","./equipItem":"equipItem"}],loading:[function(t,e,o){"use strict";cc._RF.push(e,"bc072JKtmhBN7ycgfsV8sl6","loading"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="Loading",e.space=2,e.unit=".",e.count=0,e.speed=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.createUnit=function(){for(var t="",e=0;e<this.count;e++)t+=this.unit;return t},e.prototype.update=function(t){this.speed+=this.space*t,this.speed>1&&(this.label.string=this.text+this.createUnit(),this.count++,this.count%=4,this.speed=0)},__decorate([a(cc.Label)],e.prototype,"label",void 0),__decorate([a],e.prototype,"text",void 0),__decorate([a(Number)],e.prototype,"space",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"ddf70mai5FO6bElPZovAJhw","main"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./enemy"),n=t("./config"),a=t("./sky"),r=cc._decorator,c=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemyPrefab=[],e.bmm=null,e.waitUI=null,e.bgm=null,e.bmmNum=1,e.cycle=0,e.control=null,e.isStart=!1,e.sky=null,e.btn_ui=null,e.top_ui=null,e.enemyHistory=0,e.space=.6,e.playerPreb=null,e.wait_ui=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDrawBoundingBox=!0,this.init()},e.prototype.init=function(){var t=this;this.sceenWidth=this.node.width,this.sceenHeight=this.node.height,this.control=this.node.getChildByName("control"),this.sky=this.node.getChildByName("sky"),this.sky.getComponent(a.default).main=this,this.btn_ui=this.node.getChildByName("btn_ui"),this.top_ui=this.node.getChildByName("top_ui"),this.control.active=this.top_ui.active=this.sky.active=this.btn_ui.active=!1,this.wait_ui=this.createWaitUI(),this.loadPlayer(),this.node.on("waitIsFinished",function(){return t.onLoadGameFinished()})},e.prototype.start=function(){},e.prototype.destroyEnemy=function(t){n.default.PLAYERINFO[0].sorce+=t},e.prototype.createWaitUI=function(){var t=cc.instantiate(this.waitUI);return t.setParent(this.node),t},e.prototype.loadPlayer=function(){var t=this;cc.loader.loadRes("prefab/player/player"+n.default.PLAYERINFO[0].type,function(e,o){t.playerPreb=o})},e.prototype.onLoadGameFinished=function(){this.createPlayer(),this.checkVideo(),this.wait_ui.destroy(),this.control.active=this.top_ui.active=this.sky.active=this.btn_ui.active=!0,this.isStart=!0},e.prototype.createPlayer=function(){var t=cc.instantiate(this.playerPreb);return t.setParent(this.control),t},e.prototype.createEnemy=function(){var t=cc.instantiate(this.enemyPrefab[~~(Math.random()*this.enemyPrefab.length)]).getComponent(i.default),e=(this.sceenWidth-t.node.width)*Math.random()-(this.sceenWidth-t.node.width)/2;return t.node.position=cc.v2(e,this.sceenHeight/2+t.node.height),t.node.setParent(this.control),t.main=this,this.enemyHistory++,t},e.prototype.createBmm=function(){if(this.bmm){var t=cc.instantiate(this.bmm);return t.setParent(this.control),t}},e.prototype.onBmm=function(){var t=this;if(this.bmmNum>0){var e=this.createBmm(),o=e.getComponent(cc.Animation);o.play(),this.scheduleOnce(function(){t.checkAllEnemy().forEach(function(t){t.onByby()})},1),o.on("finished",function(){o.off("finished"),e.destroy()},this),this.bmmNum--}0===this.bmmNum&&this.scheduleOnce(function(){t.node.getChildByName("btn_ui").getChildByName("bmmBtn").active=!1},.1)},e.prototype.onVideo=function(){n.default.BGMSWICH=!n.default.BGMSWICH,this.checkVideo()},e.prototype.checkVideo=function(){var t=this.node.getChildByName("btn_ui").getChildByName("videoBtn");n.default.BGMSWICH?(t.getChildByName("video0").active=!1,this.bgm.play()):(t.getChildByName("video0").active=!0,this.bgm.pause()),t.getChildByName("video1").active=!t.getChildByName("video0").active},e.prototype.checkAllEnemy=function(){var t=[];return this.control.children.forEach(function(e){if(e.group===n.default.GROUPTYPE.ENEMY){var o=e.getComponent(i.default);o.hp>0&&t.push(o)}}),t},e.prototype.changeSpace=function(){n.default.PLAYERINFO[0].life<=0||(this.enemyHistory>=10&&(this.space=.5),this.enemyHistory>=30&&(this.space=.45),this.enemyHistory>=50&&(this.space=.4),this.enemyHistory>=80&&(this.space=.35),this.enemyHistory>=100&&(this.space=.3),this.enemyHistory>=150&&(this.space=.25),this.enemyHistory>=200&&(this.space=.2),this.enemyHistory>=300&&(this.space=.16),this.enemyHistory>=500&&(this.space=.12),this.enemyHistory>=700&&(this.space=.1),this.enemyHistory>=1e3&&(this.space=.08),this.enemyHistory>=1500&&(this.space=.05),this.enemyHistory>=2e3&&(this.space=.02),this.enemyHistory>=5e3&&(this.space=.01))},e.prototype.gameOver=function(){this.isStart=!1,cc.director.loadScene("end")},e.prototype.update=function(t){if(this.isStart){if(this.cycle+=t,this.cycle>this.space&&(this.createEnemy(),this.changeSpace(),this.cycle=0),n.default.PLAYERINFO[0].life<=0){var e=this.btn_ui.getChildByName("bmmBtn");e.active&&(e.active=!1)}n.default.PLAYERINFO[0].life<=0&&n.default.PLAYERINFO[1].life<=0&&this.gameOver()}},__decorate([s([cc.Prefab])],e.prototype,"enemyPrefab",void 0),__decorate([s(cc.Prefab)],e.prototype,"bmm",void 0),__decorate([s(cc.Prefab)],e.prototype,"waitUI",void 0),__decorate([s(cc.AudioSource)],e.prototype,"bgm",void 0),e=__decorate([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./config":"config","./enemy":"enemy","./sky":"sky"}],player:[function(t,e,o){"use strict";cc._RF.push(e,"41826+j+x1AqJQ8VT9um6po","player"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./bullet"),n=t("./config"),a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=[],e.birthpos=cc.v2(0,-345),e.boom=null,e.maxhp=1,e.sendTime=.25,e.isMove=!1,e.hp=1,e.pos=cc.v2(0,0),e.bulletType=0,e.isDestroy=!1,e.isRevive=!1,e.advance=null,e.main=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.hp=this.maxhp,this.node.position=this.birthpos,this.pos=this.birthpos,this.advance=this.node.getChildByName("advance"),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this)},e.prototype.start=function(){var t=this;this.onLaunch();this.schedule(function(){t.isDestroy||t.onFire()},this.sendTime)},e.prototype.onCollisionEnter=function(t){"enemy"==t.node.group&&(this.hp=0,this.isDestroy=!0,this.createBoom())},e.prototype.onTouchStart=function(t){this.isMove=!0,this.pos=this.node.parent.convertToNodeSpaceAR(t.getLocation())},e.prototype.createBoom=function(){var t=cc.instantiate(this.boom);t&&(t.scale=1.5,t.setPosition(this.node.position),t.setParent(this.node.parent))},e.prototype.onTouchMove=function(t){this.isMove&&(this.pos=this.node.parent.convertToNodeSpaceAR(t.getLocation()))},e.prototype.onTouchEnd=function(t){},e.prototype.onFire=function(){this.createBullet(-35),this.createBullet(35)},e.prototype.createBullet=function(t){var e=this.bulletPrefab[this.bulletType],o=cc.instantiate(e);o.getComponent(i.default).sender=this.node.group,o.setPosition(this.node.x+t,this.node.y+55),o.setParent(this.node.parent)},e.prototype.onLaunch=function(){this.advance&&this.advance.runAction(cc.repeatForever(cc.blink(3,10)))},e.prototype.checkPos=function(){var t=this.node.parent.width,e=this.node.parent.height,o=this.node.width,i=this.node.height;this.pos.x<-(t/2-o/2)&&(this.pos.x=-(t/2-o/2)),this.pos.x>t/2-o/2&&(this.pos.x=t/2-o/2),this.pos.y<-(e/2-i/2)&&(this.pos.y=-(e/2-i/2)),this.pos.y>e/2-i/2&&(this.pos.y=e/2-i/2)},e.prototype.update=function(t){this.isDestroy?(this.node.destroy(),n.default.PLAYERINFO[0].life-=1):this.isMove&&this.checkPos(),this.node.setPosition(this.pos)},__decorate([c([cc.Prefab])],e.prototype,"bulletPrefab",void 0),__decorate([c(cc.Vec2)],e.prototype,"birthpos",void 0),__decorate([c(cc.Prefab)],e.prototype,"boom",void 0),__decorate([c(Number)],e.prototype,"maxhp",void 0),__decorate([c(Number)],e.prototype,"sendTime",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./bullet":"bullet","./config":"config"}],rankItem:[function(t,e,o){"use strict";cc._RF.push(e,"c4dd7vQCfFL8prugElN5x6e","rankItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./common"),n=cc._decorator,a=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankNum=null,e.nickName=null,e.scoreNum=null,e.face=null,e.numSprite=null,e.numFrame=[],e.index=0,e.data=null,e.main=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setAttr=function(){this.data&&(this.index>3?this.rankNum.string=""+this.index:this.numSprite.spriteFrame=this.numFrame[this.index-1],this.rankNum.string=""+this.index,this.scoreNum.string=""+this.data.history_score,this.nickName.string=""+this.data.nickname,i.setSpriteFrame(this.data.head_pic,this.face))},e.prototype.start=function(){},e.prototype.onInfo=function(){this.main&&this.main.onInfo(this.data)},__decorate([r(cc.Label)],e.prototype,"rankNum",void 0),__decorate([r(cc.Label)],e.prototype,"nickName",void 0),__decorate([r(cc.Label)],e.prototype,"scoreNum",void 0),__decorate([r(cc.Sprite)],e.prototype,"face",void 0),__decorate([r(cc.Sprite)],e.prototype,"numSprite",void 0),__decorate([r([cc.SpriteFrame])],e.prototype,"numFrame",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./common":"common"}],rank:[function(t,e,o){"use strict";cc._RF.push(e,"2d870qsNoND7Ifg9hjo7pEV","rank"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./rankItem"),a=t("./common"),r=cc._decorator,c=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.max=null,e.msg=null,e.content=null,e.rankItemPreb=null,e.ajax=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.ajax=new a.Ajax,this.render()},e.prototype.playAudio=function(){i.default.GLOBAL.tap&&i.default.GLOBAL.tap.play()},e.prototype.getData=function(){var t=this;this.ajax.get("mmgame/rank",{uid:i.default.PLAYERINFO[0].user_id},function(e){if(!e)return i.default.GLOBAL.toast&&i.default.GLOBAL.toast.show("\u7cfb\u7edf\u9519\u8bef"),!1;1===e.status?(t.max.string="\u4f60\u7684\u6700\u9ad8\u7eaa\u5f55\u662f"+i.default.PLAYERINFO[0].history+"\u5206",e.result.ranking?t.msg.string="\u6392\u540d<color=#FBDB76>"+e.result.ranking+"</color>\u4f4d\uff0c\u4e0e\u4e0a\u4e00\u540d\u5dee\u8ddd<color=#FBDB76>"+e.result.gap+"</color>\u5206":t.msg.string="\u6682\u672a\u8fdb\u5165\u6392\u884c\u699c\uff0c\u52a0\u6cb9\u54e6~",t.addRankItem(e.result.data)):i.default.GLOBAL.toast&&i.default.GLOBAL.toast.show(e.msg)})},e.prototype.render=function(){this.clearList(),this.getData()},e.prototype.clearList=function(){this.content.children.forEach(function(t){t.destroy()})},e.prototype.start=function(){},e.prototype.onInfo=function(t){this.playAudio(),cc.log(t)},e.prototype.addRankItem=function(t){var e=this;t.forEach(function(t,o){e.createRankItem(t,o)})},e.prototype.createRankItem=function(t,e){var o=cc.instantiate(this.rankItemPreb).getComponent(n.default);return o.node.setParent(this.content),o.main=this,o.data=t,o.index=e+1,o.setAttr(),o},e.prototype.onClose=function(){this.playAudio(),this.node.active=!1},__decorate([s(cc.Label)],e.prototype,"max",void 0),__decorate([s(cc.RichText)],e.prototype,"msg",void 0),__decorate([s(cc.Node)],e.prototype,"content",void 0),__decorate([s(cc.Prefab)],e.prototype,"rankItemPreb",void 0),e=__decorate([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common":"common","./config":"config","./rankItem":"rankItem"}],sky:[function(t,e,o){"use strict";cc._RF.push(e,"449cftGt6RByLYFqy1ZU8vX","sky"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=20,e.bg1=null,e.bg2=null,e.main=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.bg1=this.node.getChildByName("bg1"),this.bg2=this.node.getChildByName("bg2")},e.prototype.start=function(){},e.prototype.update=function(t){if(this.main.isStart&&(this.node.y-=this.speed*t,this.bg1.convertToWorldSpaceAR(cc.v2(0,0)).y<=0)){this.bg1.y=this.bg2.y+this.bg1.height;var e=this.bg1;this.bg1=this.bg2,this.bg2=e}},__decorate([a(Number)],e.prototype,"speed",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],start:[function(t,e,o){"use strict";cc._RF.push(e,"59d5dnWFvhDR7NRPcR0+jdU","start"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./rank"),a=t("./common"),r=cc._decorator,c=r.ccclass,s=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.equipPreb=null,e.rankPreb=null,e.content=null,e.equipBox=null,e.rankBox=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.init=function(){this.createTapAudio(),this.createLoad(),this.createToastBox(),this.content=this.node.getChildByName("content");var t=this.content.getChildByName("head0").getChildByName("mask").getChildByName("face").getComponent(cc.Sprite);a.setSpriteFrame(i.default.PLAYERINFO[0].head_pic,t),this.checkStatusBtn(0)},e.prototype.createLoad=function(){i.default.GLOBAL.load||(i.default.GLOBAL.load=new a.Load)},e.prototype.createTapAudio=function(){i.default.GLOBAL.tap||(i.default.GLOBAL.tap=new a.TapAudio)},e.prototype.playAudio=function(){i.default.GLOBAL.tap&&i.default.GLOBAL.tap.play()},e.prototype.showLoading=function(){i.default.GLOBAL.load&&i.default.GLOBAL.load.show()},e.prototype.hideLoading=function(){i.default.GLOBAL.load&&i.default.GLOBAL.load.hide()},e.prototype.createToastBox=function(){a.createToast().then(function(t){i.default.GLOBAL.toast=t})},e.prototype.onPlayGame=function(){var t=this;this.playAudio(),i.default.PLAYERINFO[0].life=1,i.default.PLAYERINFO[0].sorce=0,this.showLoading(),this.scheduleOnce(function(){t.hideLoading(),cc.director.loadScene("main")},.25)},e.prototype.onPlanGame=function(){this.playAudio()},e.prototype.onShareGame=function(){var t=this;this.playAudio();var e=this.content.getChildByName("head1").getChildByName("mask").getChildByName("face").getComponent(cc.Sprite);a.setSpriteFrame(i.default.PLAYERINFO[1].head_pic,e),this.checkStatusBtn(3),this.scheduleOnce(function(){t.checkStatusBtn(4)},2)},e.prototype.checkStatusBtn=function(t){void 0===t&&(t=0);var e=["shareBtn","planBtn","waitBtn","waitotherBtn","startBtn"];this.content.children.forEach(function(o){o.group===i.default.GROUPTYPE.UI&&(o.name===e[t]?o.active||(o.active=!0):o.active&&(o.active=!1))}),this.content.getChildByName("head1").getChildByName("mask").active=0!==t},e.prototype.openEquipBox=function(){this.playAudio(),null==this.equipBox?this.equipBox=this.createEquipBox():this.equipBox.active=!0},e.prototype.openRankBox=function(){this.playAudio(),this.rankBox?(this.rankBox.active=!0,this.rankBox.getComponent(n.default).render()):this.rankBox=this.createRankBox()},e.prototype.createEquipBox=function(){var t=cc.instantiate(this.equipPreb);return t.setParent(this.node),t},e.prototype.createRankBox=function(){var t=cc.instantiate(this.rankPreb);return t.setParent(this.node),t},__decorate([s(cc.Prefab)],e.prototype,"equipPreb",void 0),__decorate([s(cc.Prefab)],e.prototype,"rankPreb",void 0),e=__decorate([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common":"common","./config":"config","./rank":"rank"}],toastBox:[function(t,e,o){"use strict";cc._RF.push(e,"e58995WUXtEHImzwtOaEd2k","toastBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.message="",e.ani=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.active=!1,this.ani=this.node.getComponent(cc.Animation)},e.prototype.start=function(){},e.prototype.show=function(t,e){var o=this;void 0===t&&(t=""),void 0===e&&(e=2),this.node.active=!0,this.ani.play(),this.label.string=t,this.scheduleOnce(function(){o.hide()},e)},e.prototype.hide=function(){var t=this;this.ani.play().wrapMode=cc.WrapMode.Reverse,this.ani.on("finished",function(){t.ani.off("finished"),t.node.active=!1},this)},__decorate([a(cc.Label)],e.prototype,"label",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],top:[function(t,e,o){"use strict";cc._RF.push(e,"8b429X88lhBNLRMa/MvxOea","top"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./common"),a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.myHead=null,e.otherHead=null,e.myScore=null,e.otherScore=null,e.myNode=null,e.otherNode=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.myNode.active=this.otherNode.active=!1,n.setSpriteFrame(i.default.PLAYERINFO[0].head_pic,this.myHead),n.setSpriteFrame(i.default.PLAYERINFO[1].head_pic,this.otherHead)},e.prototype.start=function(){},e.prototype.update=function(t){this.myScore.string=""+i.default.PLAYERINFO[0].sorce,this.otherScore.string=""+i.default.PLAYERINFO[1].sorce,i.default.PLAYERINFO[0].life<1&&!this.myNode.active&&(this.myNode.active=!0),i.default.PLAYERINFO[1].life<1&&!this.otherNode.active&&(this.otherNode.active=!0)},__decorate([c(cc.Sprite)],e.prototype,"myHead",void 0),__decorate([c(cc.Sprite)],e.prototype,"otherHead",void 0),__decorate([c(cc.Label)],e.prototype,"myScore",void 0),__decorate([c(cc.Label)],e.prototype,"otherScore",void 0),__decorate([c(cc.Node)],e.prototype,"myNode",void 0),__decorate([c(cc.Node)],e.prototype,"otherNode",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./common":"common","./config":"config"}],wait:[function(t,e,o){"use strict";cc._RF.push(e,"c6315QhDJhEs5Ta9YZOdEOw","wait"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./common"),a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.myHead=null,e.otherHead=null,e.myHistory=null,e.otherHistory=null,e.myNickName=null,e.otherNickName=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=i.default.PLAYERINFO[0],e=i.default.PLAYERINFO[1];this.myHistory.string="\u6700\u9ad8\u7eaa\u5f55\uff1a"+t.history+"\u5206",this.otherHistory.string="\u6700\u9ad8\u7eaa\u5f55\uff1a"+e.history+"\u5206",this.myNickName.string=""+t.nickname,this.otherNickName.string=""+e.nickname,n.setSpriteFrame(t.head_pic,this.myHead),n.setSpriteFrame(e.head_pic,this.otherHead)},e.prototype.start=function(){var t=this,e=this.getComponent(cc.Animation);e.play(),e.on("finished",function(){e.off("finished"),t.node.dispatchEvent(new cc.Event.EventCustom("waitIsFinished",!0))},this)},__decorate([c(cc.Sprite)],e.prototype,"myHead",void 0),__decorate([c(cc.Sprite)],e.prototype,"otherHead",void 0),__decorate([c(cc.Label)],e.prototype,"myHistory",void 0),__decorate([c(cc.Label)],e.prototype,"otherHistory",void 0),__decorate([c(cc.Label)],e.prototype,"myNickName",void 0),__decorate([c(cc.Label)],e.prototype,"otherNickName",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./common":"common","./config":"config"}]},{},["boom","bullet","common","config","dialogBox","end","enemy","equip","equipItem","loading","main","player","rank","rankItem","sky","start","toastBox","top","wait"]);