require=function t(e,i,n){function s(c,a){if(!i[c]){if(!e[c]){var r="function"==typeof require&&require;if(!a&&r)return r(c,!0);if(o)return o(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[c]={exports:{}};e[c][0].call(u.exports,function(t){var i=e[c][1][t];return s(i||t)},u,u.exports,t,e,i,n)}return i[c].exports}for(var o="function"==typeof require&&require,c=0;c<n.length;c++)s(n[c]);return s}({BuildSystem:[function(t,e,i){"use strict";cc._RF.push(e,"7ad47PYW/FIyIeKMLydOhxv","BuildSystem");var n=t("./parameter/setparms");cc.Class({extends:cc.Component,properties:{},onLoad:function(){for(var t=this,e=this.node.getChildByName("list").getChildren(),i=0;i<e.length;i++)e[0].on(cc.Node.EventType.TOUCH_END,function(e){t.node.active=!1,n.setBuild("land_herb"),n.setAbility("Money",-500),console.log(n.getAll())})}}),cc._RF.pop()},{"./parameter/setparms":"setparms"}],bindBack:[function(t,e,i){"use strict";cc._RF.push(e,"7c599d/pzVOS5LUf+gVOdeK","bindBack"),cc.Class({extends:cc.Component,properties:{box:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.box.active=!1})}}),cc._RF.pop()},{}],common:[function(t,e,i){"use strict";cc._RF.push(e,"d9bb9zDxLVOFYb8QbL00Wxa","common");t("system");var n={getDate:function(){for(var t=~~arguments[0],e=["零","一","二","三","四","五","六","七","八","九"],i=["","十","百","千"],n="",s="",o=0,c=!0;t>0;){var a=t%10;0===a?c||(c=!0,s=e[a]+s):(c=!1,n=e[a],s=(n+=i[o])+s),o++,t=Math.floor(t/10)}return s}};e.exports=n,cc._RF.pop()},{system:"system"}],lead:[function(t,e,i){"use strict";cc._RF.push(e,"8fbdbgK+1xBWZoK6pj8bPOa","lead"),e.exports={option:[],name:"",school:"",ability:{Money:1e3,MAXHP:50,HP:50,MAXMP:20,MP:20,ATN:5,DEF:5,SPD:5,WIL:5,LER:5,WGT:50,repute:0,justice:50},equipment:[],skill:[],prop:[],army:[],build:[]},cc._RF.pop()},{}],loadGame:[function(t,e,i){"use strict";cc._RF.push(e,"c332e3gL/ZHPZlXq9kMCYAr","loadGame");var n=t("./common/common"),s=t("./common/system"),o=t("./parameter/setparms");cc.Class({extends:cc.Component,properties:{around:{default:null,type:cc.Label},moeny:{default:null,type:cc.Label},repute:{default:null,type:cc.Label},instructions_build:{default:null,type:cc.Node}},onLoad:function(){var t=this.node.getChildByName("build_system"),e=this.node.getChildByName("stu_box"),i=this.node.getChildByName("sys_box");t.active=!1,this.around.string="第"+n.getDate(s.around)+"回合",this.moeny.string=o.getAbility("Money"),this.repute.string=o.getAbility("repute"),e.runAction(cc.moveTo(.4,0,290)),i.runAction(cc.moveTo(.4,0,-270)),this.instructions_build.on(cc.Node.EventType.TOUCH_END,function(){t.active=!0});for(var c=this.node.getChildByName("landbox").getChildren(),a=0;a<c.length;a++){var r=c[a]._name;o.getBuild().indexOf(r)>-1&&!c[a].active&&(c[a].active=!0)}},start:function(){},update:function(t){for(var e=this.node.getChildByName("landbox").getChildren(),i=0;i<e.length;i++){var n=e[i]._name;o.getBuild().indexOf(n)>-1&&!e[i].active&&(e[i].active=!0)}this.moeny.string=o.getAbility("Money")}}),cc._RF.pop()},{"./common/common":"common","./common/system":"system","./parameter/setparms":"setparms"}],loadTALK:[function(t,e,i){"use strict";cc._RF.push(e,"4d6daSz8KJP4Jbf1VnDwlAi","loadTALK");var n=t("./common/system"),s=t("./parameter/setparms"),o=t("./parameter/school"),c=t("./parameter/option");cc.Class({extends:cc.Component,properties:{input_box:{default:null,type:cc.Node},option_box:{default:null,type:cc.Node},next_ico:{default:null,type:cc.Node},bg_pic:{default:null,type:cc.Sprite},head_pic:{default:null,type:cc.Sprite},talk:{default:null,type:cc.RichText},role_name:{default:null,type:cc.Label},list:[],scenes:null,num:0,max:null,pause:!1},onLoad:function(){this.bindInit()},bindInit:function(){var t=this;this.option_box.active=!1,this.input_box.active=!1,cc.loader.loadRes("data/talk",cc.RawAsset,function(e,i){t.list=i.data[n.progress].list,t.scenes=i.data[n.progress].scenes,t.max=t.list.length,t.bg_pic.spriteFrame=t.loadFrame(i.data[n.progress].bg_pic),t.nextPlot()})},fadeAction:function(t){var e=cc.sequence(cc.fadeOut(1),cc.callFunc(function(){t&&t()}),cc.fadeIn(.6));this.node.runAction(e)},start:function(){var t=this;this.node.on("touchend",function(){t.nextPlot()});for(var e=0;e<this.option_box.getChildren().length;e++)!function(e){var i=t.option_box.children[e];~function(e){i.on(cc.Node.EventType.TOUCH_START,function(){i.scale=1.2},t),i.on(cc.Node.EventType.TOUCH_END,function(){i.scale=1,t.bindOption(e,i.children[0].getComponent(cc.Label).string)},t)}(e)}(e)},bindOption:function(t,e){s.setOption({id:t,name:e}),"不需要"==e&&(this.num=this.max),this.pause=!1,this.num++,this.next_ico.active=!0,this.option_box.active=!1},showOption:function(t){this.option_box.active=!0,this.next_ico.active=!1;for(var e=0;e<this.option_box.getChildren().length;e++){var i=this.option_box.children[e];i.scale=1,i.children[0].getComponent(cc.Label).string=t[e],t[e]?i.active=!0:i.active=!1}},showInput:function(t,e){this.input_box.active=!0,this.next_ico.active=!1;var i=this.input_box.getChildren()[0].getChildren()[0],n=this.input_box.getChildren()[1];switch(n.active=!1,t){case"name":i.getComponent(cc.EditBox).placeholder="姓甚名谁";break;case"school":i.getComponent(cc.EditBox).placeholder="何门何派"}i.on("editing-return",function(c){var a=i.getComponent(cc.EditBox).string;if(!a)return!1;switch(t){case"name":s.setName(a);break;case"school":var r=a.substr(a.length-1,a.length);if("派"!=r&&"门"!=r&&"寨"!=r&&"教"!=r&&"帮"!=r&&(a+="派"),o.querySchool(a))return n.active=!0,n.getComponent(cc.Label).string="你好像不是这一派的一份子，请重新填写",!1;n.active=!1,s.setSchool(a)}i.getComponent(cc.EditBox).string="",i.off("editing-return"),e&&e()})},nextPlot:function(){var t=this;if(this.max>this.num){if(!this.pause)switch(this.head_pic.spriteFrame=this.loadFrame(this.list[this.num].role_pic),0==this.list[this.num].status?this.role_name.string=(s.getName()||this.list[this.num].role_name)+":":this.role_name.string=this.list[this.num].role_name+":",this.list[this.num].type){case"0":this.talk.string=this.list[this.num].content,this.num++;break;case"1":this.talk.string=this.list[this.num].content,this.pause=!0,this.showOption(this.list[this.num].option);break;case"2":this.talk.string=""+this.list[this.num].content[0]+s.getOptionAll()[s.getOptionAll().length-1].name+this.list[this.num].content[1]+this.list[this.num].option[s.getOptionAll()[s.getOptionAll().length-1].id]+this.list[this.num].content[2],this.num++;break;case"3":this.talk.string=this.list[this.num].content,this.pause=!0,this.showInput(this.list[this.num].relation,function(){t.pause=!1,t.input_box.active=!1,t.num++,t.next_ico.active=!0,t.nextPlot()});break;case"4":var e="";switch(this.list[this.num].relation){case"name":e=s.getName();break;case"school":e=s.getSchool()}this.talk.string=""+this.list[this.num].content[0]+e+this.list[this.num].content[1],this.num++}}else{switch(n.progress){case 0:c.Opening(),this.pause=!0,n.progress=1,this.fadeAction(function(){t.bindInit(),t.pause=!1});break;case 1:this.pause=!0,n.progress=2,this.fadeAction(function(){t.bindInit(),t.pause=!1});break;case 2:console.log(s.getAll()),cc.director.loadScene("sc_02")}this.num=0}},loadFrame:function(){return new cc.SpriteFrame(cc.url.raw(arguments[0]))}}),cc._RF.pop()},{"./common/system":"system","./parameter/option":"option","./parameter/school":"school","./parameter/setparms":"setparms"}],option:[function(t,e,i){"use strict";cc._RF.push(e,"40371s0UHZEH7oY5TBdgsYQ","option");var n=t("setparms"),s=t("skill"),o=t("prop"),c={Opening:function(){var t=n.getOptionAll(5);switch(~~t[0].id){case 0:n.setAbility("HP",5),n.setAbility("MP",5),n.setAbility("MAXHP",5),n.setAbility("MAXMP",5),n.setAbility("ATN",1),n.setAbility("DEF",1);break;case 1:n.setAbility("HP",10),n.setAbility("MAXHP",10),n.setAbility("SPD",1),n.setAbility("WGT",5);break;case 2:n.setAbility("MP",5),n.setAbility("MAXMP",5),n.setAbility("LER",1),n.setAbility("WGT",-2);break;case 3:n.setAbility("HP",10),n.setAbility("MP",5),n.setAbility("MAXHP",10),n.setAbility("MAXMP",5),n.setAbility("WGT",10)}var e=null;switch(~~t[1].id){case 0:e=s.querySkill("太祖长拳");break;case 1:e=s.querySkill("御剑术");break;case 2:e=s.querySkill("柴刀十八路");break;case 3:e=s.querySkill("太祖棍法")}switch(e.level=1,n.setSkill(e),~~t[2].id){case 0:n.setAbility("ATN",1);break;case 1:n.setAbility("DEF",1);break;case 2:n.setAbility("SPD",1);break;case 3:n.setAbility("WIL",1)}switch(~~t[3].id){case 0:n.setAbility("HP",10),n.setAbility("MAXHP",10),n.setAbility("justice",5);break;case 1:n.setAbility("LER",1),n.setAbility("justice",5);break;case 2:n.setAbility("repute",-5),n.setAbility("SPD",1);break;case 3:n.setAbility("justice",-20),n.setAbility("WIL",1)}switch(~~t[4].id){case 0:n.setAbility("Money",2e3);break;case 1:var i=o.getProp(0);i.num=1,n.setProp(i);break;case 2:break;case 3:n.setAbility("repute",20)}}};e.exports=c,cc._RF.pop()},{prop:"prop",setparms:"setparms",skill:"skill"}],prop:[function(t,e,i){"use strict";cc._RF.push(e,"fca38fVlYtNCY1JiLLBt6yO","prop");var n=[{id:0,name:"吐纳秘典",describe:"可习得吐纳心法的典籍。"}];e.exports={getProp:function(){var t=arguments[0];return t?n[t]:n},queryProp:function(t){for(var e=0;e<n.length;e++)if(n[e].name===t)return Object.assign(n[e])}},cc._RF.pop()},{}],school:[function(t,e,i){"use strict";cc._RF.push(e,"ab4afjZICpI5p5lg3pm9QfI","school");var n=[{id:0,name:""},{id:1,name:"蓬莱派",populace:5},{id:2,name:"泰山派",populace:13},{id:3,name:"黑风寨",populace:9},{id:4,name:"巨鲸帮",populace:11}];e.exports={getSchool:function(){var t=arguments[0];return t?n[t]:skill},querySchool:function(t){for(var e=0;e<n.length;e++)if(n[e].name===t)return Object.assign(n[e])}},cc._RF.pop()},{}],setparms:[function(t,e,i){"use strict";cc._RF.push(e,"5dd5aw0vWZFIpIIF9pmC09c","setparms");var n=t("lead"),s={getAll:function(){return n},getName:function(){return n.name},getSchool:function(){return n.school},getOptionAll:function(){var t=arguments[0];return t?[].filter.call(n.option,function(e,i){return i<t}):n.option},getAbilityAll:function(){return n.ability},getSkillAll:function(){return n.skill},getEquipmentAll:function(){return n.equipment},getPropAll:function(){return n.prop},getAbility:function(t){return n.ability[t]},setAbility:function(t,e){switch(n.ability[t]+=~~e,t){case"Money":n.ability.Money=Math.min(n.ability.Money,99999999)}},setOption:function(t){n.option.push(t)},setSkill:function(t){n.skill.push(t)},setProp:function(t){n.prop.push(t)},setEquipment:function(t){n.equipment.push(t)},setName:function(t){n.name=t},setSchool:function(t){n.school=t},setBuild:function(t){n.build.push(t)},getBuild:function(t){return n.build}};e.exports=s,cc._RF.pop()},{lead:"lead"}],skill:[function(t,e,i){"use strict";cc._RF.push(e,"84e28ntB3VFFaJDdpg2nn38","skill");var n=[{id:0,name:"太祖长拳",power:5},{id:1,name:"御剑术",power:4},{id:2,name:"柴刀十八路",power:4},{id:3,name:"太祖棍法",power:3},{id:4,name:"吐纳心法",power:1}];e.exports={getSkill:function(){var t=arguments[0];return t?n[t]:n},querySkill:function(t){for(var e=0;e<n.length;e++)if(n[e].name===t)return Object.assign(n[e])}},cc._RF.pop()},{}],system:[function(t,e,i){"use strict";cc._RF.push(e,"0e21bv3UyBAhaHbWYI4xoyC","system"),e.exports={progress:0,around:1},cc._RF.pop()},{}]},{},["BuildSystem","bindBack","common","system","loadGame","loadTALK","lead","option","prop","school","setparms","skill"]);
//# sourceMappingURL=project.js.map