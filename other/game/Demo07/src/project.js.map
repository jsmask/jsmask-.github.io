{"version":3,"sources":["assets/script/dici.js","assets/script/game_begin.js","assets/script/game_end.js","assets/script/game_start.js"],"names":["cc","Class","extends","Component","properties","onLoad","_this","this","listener","event","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touches","goAction","moveBy","p","node","runAction","onTouchMoved","onTouchEnded","onTouchCancelled","eventManager","addListener","player","find","over","getComponent","AudioSource","start","update","dt","_rect0","getBoundingBoxToWorld","intersects","play","director","loadScene","btn","default","type","Node","bgm","on","EventType","TOUCH_START","e","score","Label","string","window","dici","Prefab","rpg","time","initTime","initScore","diciCount","dici_duration","gameover","createDici","_dici","instantiate","getChildByName","addChild","rd","random0To1","rotationY","setPosition","diciPosition","randD","randX","randY","width","height","jumpcilp","overcilp","preloadScene","i","schedule","unscheduleAllCallbacks","getLocationX","goL1","moveTo","getPositionY","goL2","sque","sequence","children","length","destroy"],"mappings":"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","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        var listener = {\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n            onTouchBegan: (touches, event) => {\r\n                var goAction = cc.moveBy(0.2, cc.p(0, 140));\r\n                this.node.runAction(goAction);\r\n                return true;\r\n            },\r\n            onTouchMoved: (touches, event) => {},\r\n            onTouchEnded: (touches, event) => {},\r\n            onTouchCancelled: (touches, event) => {}\r\n        }\r\n        cc.eventManager.addListener(listener, this.node);\r\n        this.player = cc.find(\"Canvas/GameBG/normal\");\r\n        this.over = cc.find(\"Canvas/GameBG/over\").getComponent(cc.AudioSource);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    update: function(dt) {\r\n\r\n        let _rect0 = this.node.getBoundingBoxToWorld();\r\n        let _rect1 = this.player.getBoundingBoxToWorld();\r\n        if (_rect1.intersects(_rect0)) {\r\n            this.over.play();\r\n            cc.director.loadScene('game_end');\r\n        }\r\n    }\r\n});","// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        btn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        bgm: {\r\n            default: null,\r\n            type: cc.AudioSource\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.bgm.play();\r\n        this.btn.on(cc.Node.EventType.TOUCH_START, (e) => {\r\n            cc.director.loadScene(\"game_start\");\r\n        }, this);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});","// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        btn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        score: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.score.string = window.score || 0;\r\n        this.btn.on(cc.Node.EventType.TOUCH_START, (e) => {\r\n            cc.director.loadScene(\"game_start\");\r\n            window.score = 0;\r\n        }, this)\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});","// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        dici: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        rpg: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        time: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        score: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        initTime: 60,\r\n        initScore: 0,\r\n        diciCount: 0,\r\n        dici_duration: 100\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    gameover() {\r\n        cc.director.loadScene(\"game_end\");\r\n    },\r\n\r\n    createDici() {\r\n        this.diciCount++;\r\n        let _dici = cc.instantiate(this.dici);\r\n        this.node.getChildByName(\"dicibox\").addChild(_dici);\r\n        var rd = cc.random0To1()\r\n        if (rd >= 0.5) _dici.rotationY = 0;\r\n        else _dici.rotationY = 180;\r\n        _dici.setPosition(this.diciPosition(rd));\r\n    },\r\n    diciPosition: function(randD) {\r\n        var randX = 0;\r\n        var randY = 0;\r\n        if (randD >= 0.5) {\r\n            randX = this.node.width / 2 - 80;\r\n        } else {\r\n            randX = -this.node.width / 2 + 80;\r\n        }\r\n        if (this.diciCount <= 8) {\r\n            randY = (this.node.height / 2) - (this.dici_duration * this.diciCount) - this.dici_duration * 1;\r\n        } else {\r\n            randY = (this.node.height / 2) - (this.dici_duration * 8) - this.dici_duration * 1;\r\n        }\r\n        return cc.p(randX, randY);\r\n    },\r\n    onLoad() {\r\n        this.jumpcilp = this.node.getChildByName(\"jump\").getComponent(cc.AudioSource);\r\n        this.overcilp = this.node.getChildByName(\"over\").getComponent(cc.AudioSource);\r\n        this.time.string = this.initTime;\r\n        this.score.string = this.initScore;\r\n        this.rpg.setPosition(-this.node.width / 2 + 80, this.node.height / 2 - 175);\r\n        cc.director.preloadScene(\"game_end\");\r\n        for (let i = 0; i < 8; i++) {;\r\n            this.createDici();\r\n        }\r\n        this.schedule(function() {\r\n            this.time.string--;\r\n            if (this.time.string <= 0) {\r\n                this.unscheduleAllCallbacks();\r\n                this.gameover();\r\n            }\r\n        }, 1);\r\n        this.node.on(cc.Node.EventType.TOUCH_START, (e) => {\r\n            if (e.getLocationX() >= this.node.width / 2) {\r\n                var goL1 = cc.moveTo(0.1, cc.p(this.node.width / 2 - 110, this.rpg.getPositionY()))\r\n                var goL2 = cc.moveTo(0.1, cc.p(this.node.width / 2 - 80, this.rpg.getPositionY()));\r\n                var sque = cc.sequence(goL1, goL2);\r\n                this.rpg.runAction(sque);\r\n                this.rpg.rotationY = 180;\r\n            } else {\r\n                var goL1 = cc.moveTo(0.1, cc.p(-this.node.width / 2 + 110, this.rpg.getPositionY()))\r\n                var goL2 = cc.moveTo(0.1, cc.p(-this.node.width / 2 + 80, this.rpg.getPositionY()));\r\n                var sque = cc.sequence(goL1, goL2);\r\n                this.rpg.runAction(sque);\r\n                this.rpg.rotationY = 0;\r\n            }\r\n            this.score.string += 1;\r\n            window.score = this.score.string;\r\n            this.jumpcilp.play();\r\n            this.createDici();\r\n            return true;\r\n            // this.node.getChildByName(\"dicibox\").children.forEach(item => {\r\n            //     item.runAction(cc.moveBy(.2, cc.p(0, 140)));\r\n            // })\r\n            // this.scheduleOnce(() => {\r\n            //     if (!this.isover()) {\r\n            //         this.createDici();\r\n            //         this.score.string += 1;\r\n            //         this.jumpcilp.play();\r\n            //     } else {\r\n            //         this.jumpcilp.stop();\r\n            //         this.overcilp.play();\r\n            //         this.unscheduleAllCallbacks();\r\n            //         this.gameover();\r\n            //     }\r\n            // }, .2)\r\n\r\n        }, this)\r\n    },\r\n    // isover() {\r\n    //     let bool = false;\r\n    //     this.node.getChildByName(\"dicibox\").children.forEach(item => {\r\n    //         let _rect0 = item.getBoundingBoxToWorld();\r\n    //         let _rect1 = this.rpg.getBoundingBoxToWorld();\r\n    //         if (_rect1.intersects(_rect0)) {\r\n    //             bool = true;\r\n    //         }\r\n    //     }, this);\r\n    //     return bool;\r\n    // },\r\n    start() {\r\n\r\n    },\r\n\r\n\r\n    update(dt) {\r\n        let len = this.node.getChildByName(\"dicibox\").children.length;\r\n        if (len > 12) {\r\n            this.node.getChildByName(\"dicibox\").children[0].destroy();\r\n        }\r\n    },\r\n});"],"sourceRoot":"/source/","file":"project.js"}