window.__require=function t(e,o,n){function a(r,c){if(!o[r]){if(!e[r]){var l=r.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return a(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({box:[function(t,e,o){"use strict";cc._RF.push(e,"4a1d81Z4HJN7I9jGrO53LIA","box");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),r=t("./item"),c=cc._decorator,l=c.ccclass,s=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e.Money=null,e.price=null,e.kname=null,e.describe=null,e.pic=null,e.content=null,e.noEnoughCoin=null,e.data=[],e.activeType=0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;i.default.GlobalData=i.default.getSave(),this.noEnoughCoin.active=!1,this.activeType=i.default.GlobalData.type,this.loadData().then(function(e){var o=t.getSelect();t.render(o),t.loadItem()})},e.prototype.start=function(){},e.prototype.onBack=function(){cc.director.loadScene("start")},e.prototype.onBuy=function(t){var e=this,o=this.getSelect();i.default.GlobalData.money>=o.price?(i.default.GlobalData.money-=o.price,-1==i.default.GlobalData.arms.indexOf(o.type)&&i.default.GlobalData.arms.push(o.type),i.default.GlobalData.type=o.type,i.default.GlobalData.power=o.power,this.price.active=!1,i.default.setSave()):(this.noEnoughCoin.active=!0,this.scheduleOnce(function(){return e.noEnoughCoin.active=!1},1))},e.prototype.render=function(t){var e=this;this.kname.string=t.name,this.describe.string=t.describe,-1!=i.default.GlobalData.arms.indexOf(t.type)?this.price.active=!1:(this.price.active=!0,this.price.getChildByName("num").getComponent(cc.Label).string=t.price),cc.loader.loadRes("knife"+t.type,cc.SpriteFrame,function(t,o){e.pic.spriteFrame=o})},e.prototype.loadItem=function(){var t=this;this.data.map(function(e){var o=cc.instantiate(t.item).getComponent(r.default);o.setData(e),o.box=t,o.node.setParent(t.content)})},e.prototype.getSelect=function(){var t=this,e=0;return this.data.map(function(o,n){o.type!=t.activeType||(e=n)}),this.data[e]},e.prototype.loadData=function(){var t=this;return new Promise(function(e,o){cc.loader.loadRes("data",function(n,a){t.data=a.json,e(a.json),o(n)})})},e.prototype.update=function(t){this.Money.string=""+i.default.GlobalData.money},a([s(cc.Prefab)],e.prototype,"item",void 0),a([s(cc.Label)],e.prototype,"Money",void 0),a([s(cc.Node)],e.prototype,"price",void 0),a([s(cc.Label)],e.prototype,"kname",void 0),a([s(cc.Label)],e.prototype,"describe",void 0),a([s(cc.Sprite)],e.prototype,"pic",void 0),a([s(cc.Node)],e.prototype,"content",void 0),a([s(cc.Node)],e.prototype,"noEnoughCoin",void 0),e=a([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./config":"config","./item":"item"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"bfd3aHsRR1BkIEMiagUU6PY","config"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getHistory=function(){return localStorage.getItem("fd_score")||0},t.setHistory=function(t){var e=~~localStorage.getItem("fd_score")||0;localStorage.setItem("fd_score",Math.max(t,e).toString())},t.setSave=function(){cc.sys.localStorage.setItem("fd_GlobalData",JSON.stringify(this.GlobalData))},t.getSave=function(){var t=cc.sys.localStorage.getItem("fd_GlobalData");return t||this.setSave(),JSON.parse(t)},t.Group={DEFAULT:"default",PLATE:"plate",KNIFE:"knife"},t.KnifeState={NORMAL:0,STOP:1,MOVE:2,TURN:3},t.GlobalData={level:1,num:3,max:3,score:0,hit:0,money:3e3,type:0,power:1,arms:[0]},t}();o.default=n,cc._RF.pop()},{}],item:[function(t,e,o){"use strict";cc._RF.push(e,"6e7e0cDt6lAAa16zWmx25Gk","item");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pic=null,e.normal=null,e.select=null,e.lock=null,e.box=null,e.data={},e.sprite=null,e}return n(e,t),e.prototype.onLoad=function(){this.sprite=this.node.getComponent(cc.Sprite)},e.prototype.start=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.box.render(t.data),t.box.activeType=t.data.type,t.hasArms()&&(i.default.GlobalData.type=t.data.type,i.default.GlobalData.power=t.data.power,i.default.setSave())})},e.prototype.setData=function(t){var e=this;this.data=t,cc.loader.loadRes("knife"+t.type,cc.SpriteFrame,function(t,o){e.pic.spriteFrame=o}),this.node.getChildByName("power").getComponent(cc.Label).string="power:"+t.power},e.prototype.hasArms=function(){return-1!=i.default.GlobalData.arms.indexOf(this.data.type)},e.prototype.update=function(t){i.default.GlobalData.type==this.data.type?this.sprite.spriteFrame=this.select:this.sprite.spriteFrame=this.normal,this.hasArms()?this.lock.active=!1:this.lock.active=!0},a([l(cc.Sprite)],e.prototype,"pic",void 0),a([l(cc.SpriteFrame)],e.prototype,"normal",void 0),a([l(cc.SpriteFrame)],e.prototype,"select",void 0),a([l(cc.Node)],e.prototype,"lock",void 0),e=a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],knifeNumBox:[function(t,e,o){"use strict";cc._RF.push(e,"69024p3l0NJXbdCnRpaa8fA","knifeNumBox");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.num=0,e}return n(e,t),e.prototype.onLoad=function(){this.num=i.default.GlobalData.num},e.prototype.start=function(){this.render()},e.prototype.render=function(){this.node.removeAllChildren();for(var t=0;t<i.default.GlobalData.max;t++)i.default.GlobalData.num<=t?this.createIcon(100):this.createIcon()},e.prototype.createIcon=function(t){void 0===t&&(t=255);var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=this.icon,e.opacity=t,e.setParent(this.node)},e.prototype.update=function(t){this.num!=i.default.GlobalData.num&&(this.num=i.default.GlobalData.num,this.render())},a([l(cc.SpriteFrame)],e.prototype,"icon",void 0),e=a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],knife:[function(t,e,o){"use strict";cc._RF.push(e,"3ad3czN7rNAT51MrJOrRs6A","knife");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioArr=[],e.state=i.default.KnifeState.NORMAL,e.rigidBody=null,e.speed=0,e.degree=0,e.center_pos=cc.v2(0,0),e.center_R=0,e.plate=null,e}return n(e,t),e.prototype.onLoad=function(){this.rigidBody=this.node.getComponent(cc.RigidBody)},e.prototype.start=function(){},e.prototype.setPlate=function(t){this.plate=t,this.speed=t.speed,this.center_pos=t.node.getPosition(),this.center_R=t.node.width/2},e.prototype.onBeginContact=function(t,e,o){this.state==i.default.KnifeState.MOVE&&(i.default.GlobalData.num--,o.node.group==i.default.Group.PLATE&&(cc.audioEngine.play(this.audioArr[1],!1,1),this.rigidBody.linearVelocity=cc.v2(0,0),this.state=i.default.KnifeState.TURN,i.default.GlobalData.hit++,i.default.GlobalData.score+=i.default.GlobalData.power+i.default.GlobalData.level,this.degree=270,this.plate.node.runAction(cc.sequence(cc.scaleTo(.05,1.05),cc.scaleTo(.05,1)))),o.node.group==i.default.Group.KNIFE&&(cc.audioEngine.play(this.audioArr[2],!1,1),this.state=i.default.KnifeState.STOP,this.rigidBody.angularVelocity=300,this.rigidBody.linearVelocity=cc.v2(50,-500)))},e.prototype.onSend=function(){i.default.GlobalData.num<=0||(cc.audioEngine.play(this.audioArr[0],!1,1),this.state=i.default.KnifeState.MOVE,this.rigidBody.linearVelocity=cc.v2(0,5e3))},e.prototype.onRurn=function(t){this.rigidBody.type=cc.RigidBodyType.Kinematic,this.degree-=t*this.speed,this.degree%=360;var e=this.degree*Math.PI/180,o=cc.v2(this.center_pos.x,this.center_pos.y);o.x+=this.center_R*Math.cos(e),o.y+=this.center_R*Math.sin(e),this.node.setPosition(o),this.node.rotation=360-this.degree+270},e.prototype.onStop=function(){var t=this;this.state=i.default.KnifeState.STOP,this.rigidBody.angularVelocity=100,this.rigidBody.linearVelocity=cc.v2(50,-1e3),this.scheduleOnce(function(){t.node.removeFromParent()},3)},e.prototype.update=function(t){this.state==i.default.KnifeState.TURN&&this.onRurn(t)},a([l([cc.AudioClip])],e.prototype,"audioArr",void 0),e=a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],main:[function(t,e,o){"use strict";cc._RF.push(e,"a85feJLRFxB+IkXO4SanYNa","main");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,t("./knife")),l=t("./plate"),s=t("./config"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stage=null,e.ui=null,e.knifePreb=null,e.plate=null,e.plateBox=null,e.num=0,e.max=0,e.hit=0,e.isBegin=!1,e.score=null,e.level=null,e.history=null,e.again=null,e}return n(e,t),e.prototype.onLoad=function(){s.default.GlobalData=s.default.getSave();var t=cc.director.getPhysicsManager();t.enabled=!0,t.debugDrawFlags=0,t.gravity=cc.v2(0,-1e3),this.stage=this.node.getChildByName("stage"),this.ui=this.node.getChildByName("ui"),this.plateBox=this.node.getChildByName("plateBox"),this.score=this.ui.getChildByName("score").getChildByName("label").getComponent(cc.Label),this.level=this.ui.getChildByName("level").getComponent(cc.Label),this.history=this.ui.getChildByName("history").getComponent(cc.Label),this.again=this.ui.getChildByName("again"),this.loadPlate(),this.hideBox();var e=s.default.GlobalData.hit;this.max=s.default.GlobalData.max,this.num=s.default.GlobalData.num=this.max,this.hit=s.default.GlobalData.hit=0,s.default.GlobalData.score-=e},e.prototype.loadKnife=function(){var t=this;cc.loader.loadRes("preb/knife"+s.default.GlobalData.type,function(e,o){t.knifePreb=o,t.isBegin=!0,t.createKnife()})},e.prototype.loadPlate=function(){var t=this;cc.loader.loadRes("preb/plate0",function(e,o){var n=cc.instantiate(o);n.setPosition(cc.v2(0,200)),n.setParent(t.plateBox),t.plate=n.getComponent(l.default),t.loadKnife()})},e.prototype.createKnife=function(){if(this.isBegin){var t=cc.instantiate(this.knifePreb).getComponent(c.default);t.node.setPosition(cc.v2(0,-500)),t.node.setParent(this.stage),t.setPlate(this.plate)}},e.prototype.start=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.stage.children.map(function(t){var e=t.getComponent(c.default);e.state==s.default.KnifeState.NORMAL&&e.onSend()})})},e.prototype.onGameOver=function(){this.checkMoney(0),this.onStop(),this.showBox()},e.prototype.checkMoney=function(t){s.default.GlobalData.money+=5*s.default.GlobalData.score,s.default.setSave()},e.prototype.onStop=function(){this.ui.getChildByName("kbox").removeAllChildren(),this.plate.isActive=!1,this.stage.children.map(function(t){t.getComponent(c.default).state==s.default.KnifeState.TURN&&(t.getComponent(c.default).state=s.default.KnifeState.STOP)})},e.prototype.showBox=function(){this.again.active=!0,this.history.node.active=!0,s.default.setHistory(s.default.GlobalData.score),this.history.string="\u5386\u53f2\u6700\u9ad8\uff1a"+s.default.getHistory()},e.prototype.hideBox=function(){this.again.active=!1,this.history.node.active=!1},e.prototype.onSccess=function(){var t=this;this.stage.children.map(function(t){var e=t.getComponent(c.default);e.state==s.default.KnifeState.TURN&&e.onStop()}),this.plate.onEnd(),s.default.GlobalData.max+=2,this.hit=s.default.GlobalData.hit=0,this.num=this.max=s.default.GlobalData.num=s.default.GlobalData.max,s.default.GlobalData.level+=1,s.default.setSave(),this.scheduleOnce(function(){t.loadPlate()},2)},e.prototype.creatScore=function(){this.score.string=""+s.default.GlobalData.score,this.level.string="level "+s.default.GlobalData.level},e.prototype.onBack=function(){this.isBegin=!1,this.onStop(),cc.director.loadScene("start")},e.prototype.onAgain=function(){var t=this;this.hideBox(),this.plate.node.destroy(),this.stage.children.map(function(t){t.destroy()}),s.default.GlobalData.max=3,this.hit=s.default.GlobalData.hit=0,this.num=this.max=s.default.GlobalData.num=s.default.GlobalData.max,s.default.GlobalData.level=1,s.default.GlobalData.score=0,s.default.setSave(),this.scheduleOnce(function(){return t.loadPlate()},1)},e.prototype.update=function(t){var e=this;this.isBegin&&(this.hit!=s.default.GlobalData.hit&&(this.hit=s.default.GlobalData.hit,this.num=s.default.GlobalData.num,this.scheduleOnce(function(){return e.createKnife()},.3)),s.default.GlobalData.hit+s.default.GlobalData.num!=s.default.GlobalData.max&&(this.isBegin=!1,this.onGameOver()),s.default.GlobalData.hit==s.default.GlobalData.max&&(this.isBegin=!1,this.onSccess()),this.creatScore()),this.ui.getChildByName("kbox").active=this.isBegin},e=a([r],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./config":"config","./knife":"knife","./plate":"plate"}],plate:[function(t,e,o){"use strict";cc._RF.push(e,"08e8eH9zdFI7aPKmDY5WEDi","plate");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=120,e.rigidBody=null,e.isActive=!0,e}return n(e,t),e.prototype.onLoad=function(){this.speed+=30*i.default.GlobalData.level,this.rigidBody=this.getComponent(cc.RigidBody)},e.prototype.start=function(){},e.prototype.chenageRotation=function(t){this.node.rotation+=t*this.speed,this.node.rotation%=360},e.prototype.onEnd=function(){var t=this;this.isActive=!1;var e=this.node.getComponent(cc.Animation);e.play(),e.on("finished",function(){t.node.removeFromParent()})},e.prototype.update=function(t){this.isActive?this.chenageRotation(t):this.rigidBody.active=!1},a([l(Number)],e.prototype,"speed",void 0),e=a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],start:[function(t,e,o){"use strict";cc._RF.push(e,"bc98dCijatMeaqN1YnA6RkF","start");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){i.default.GlobalData=i.default.getSave()},e.prototype.start=function(){cc.director.preloadScene("main"),cc.director.preloadScene("box")},e.prototype.onStart=function(){cc.director.loadScene("main")},e.prototype.openBox=function(){cc.director.loadScene("box")},e=a([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./config":"config"}]},{},["box","config","item","knife","knifeNumBox","main","plate","start"]);