require=function e(t,i,o){function n(c,s){if(!i[c]){if(!t[c]){var r="function"==typeof require&&require;if(!s&&r)return r(c,!0);if(a)return a(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[c]={exports:{}};t[c][0].call(h.exports,function(e){var i=t[c][1][e];return n(i||e)},h,h.exports,e,t,i,o)}return i[c].exports}for(var a="function"==typeof require&&require,c=0;c<o.length;c++)n(o[c]);return n}({BuildSystem:[function(e,t,i){"use strict";function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(t,"7ad47PYW/FIyIeKMLydOhxv","BuildSystem");var n,a=e("./common/common"),c=e("./parameter/setparms"),s=e("./parameter/build");cc.Class({extends:cc.Component,properties:(n={build:{default:null,type:cc.Prefab},describe:{default:null,type:cc.Label}},o(n,"describe",{default:null,type:cc.Label}),o(n,"money",{default:null,type:cc.Label}),n),onLoad:function(){var e=this;this.getMoney(),this.describe.string="";for(var t=this.node.getChildByName("list"),i=s.getBuildData(),o=0;o<i.length;o++)!function(o){var n=i[o],s=cc.instantiate(e.build),r=s.getChildByName("box"),l=r.getChildByName("name").getComponent(cc.Label),h=r.getChildByName("money").getComponent(cc.Label),p=r.getChildByName("land").getComponent(cc.Sprite),u=s.getChildByName("look"),m=s.getChildByName("add"),d=s.getChildByName("uplevel");l.string=n.name,p.spriteFrame=a.loadFrame("resources/img/build/"+n.src+".png");var y=e.checkBuild(n.name);y?(m.active=!1,d.active=!0,y.maxlevel<=y.level?h.string="已至最大":h.string=y.money[y.level]+a.getUnit()):h.string=n.money[n.level]+a.getUnit(),u.on(cc.Node.EventType.TOUCH_END,function(t){e.lookDescribe(n)},e),m.on(cc.Node.EventType.TOUCH_END,function(t){e.checkMoney(n)&&(c.setMyBuild(n.name),m.active=!1,d.active=!0,n.maxlevel<=n.level?h.string="已至最大":h.string=n.money[n.level]+a.getUnit(),e.lookDescribe(n))},e),d.on(cc.Node.EventType.TOUCH_END,function(t){n.maxlevel<=n.level?e.describe.string="已至最大，无法扩建":e.checkMoney(n)&&(c.upMyBuild(n.name),n.maxlevel<=n.level?h.string="已至最大":h.string=n.money[n.level]+a.getUnit(),e.lookDescribe(n))},e),t.addChild(s)}(o)},lookDescribe:function(e){this.describe.string=e.name+" (当前LV"+e.level+") : "+e.describe},getMoney:function(){this.money.string=c.getAbility("Money")},checkMoney:function(e){var t=~~c.getAbility("Money"),i=~~e.money[e.level];return t>=i?(c.setAbility("Money",-i),this.getMoney(),!0):(this.describe.string="囊中羞涩",!1)},checkBuild:function(e){for(var t=c.getMyBuild(),i=0;i<t.length;i++)if(t[i].name===e)return t[i]}}),cc._RF.pop()},{"./common/common":"common","./parameter/build":"build","./parameter/setparms":"setparms"}],DiplomacySystem:[function(e,t,i){"use strict";cc._RF.push(t,"dbfb81P1CpLaJv4ZExaaVsH","DiplomacySystem");var o=e("./common/common"),n=e("./parameter/setparms"),a=(e("./parameter/school"),e("./parameter/role"),"resources/img/role/head/");cc.Class({extends:cc.Component,properties:{box0:{default:null,type:cc.Node},box1:{default:null,type:cc.Node}},onLoad:function(){this.role={id:0,name:"凌云",headpic:"face_00.png",ability:{Level:1,MAXLevel:99,EXP:0,NEXT:5,MAXHP:52,HP:50,MAXMP:20,MP:20,ATN:35,DEF:19,SPD:28,WIL:42,LER:54,WGT:50,justice:50},type:0,equipment:[],skill:[],status:0,study:null,sex:1},this.chief={id:2,name:"都灵子",headpic:"face_20.png",ability:{Level:1,MAXLevel:70,EXP:0,NEXT:5,MAXHP:50,HP:50,MAXMP:20,MP:20,ATN:5,DEF:5,SPD:5,WIL:5,LER:5,WGT:50,justice:50},type:0,equipment:[],skill:[],status:0,study:null,sex:1}},start:function(){this.showSceWord()},showSceWord:function(){var e=this;this.map1=this.node.getChildByName("map1"),this.progress=0,this.role_name=this.box0.getChildByName("name").getComponent(cc.Label),this.role_face=this.box0.getChildByName("face").getComponent(cc.Sprite),this.role_word=this.box0.getChildByName("word").getComponent(cc.RichText),this.chief_name=this.box1.getChildByName("name").getComponent(cc.Label),this.chief_face=this.box1.getChildByName("face").getComponent(cc.Sprite),this.chief_word=this.box1.getChildByName("word").getComponent(cc.RichText),this.goProgress(),this.map1.on(cc.Node.EventType.TOUCH_END,function(t){e.goProgress()})},getRoleBox:function(e,t,i){0==e?(this.role_name.string=this.role.name,this.role_face.spriteFrame=o.loadFrame(""+a+this.role.headpic.split(".png")[0]+"_200x200.png"),this.role_word.string=i,this.box1.active=!1,this.box0.active=!0):(this.chief_name.string=this.chief.name,this.chief_face.spriteFrame=o.loadFrame(""+a+this.chief.headpic.split(".png")[0]+"_200x200.png"),this.chief_word.string=i,this.box0.active=!1,this.box1.active=!0)},goProgress:function(){switch(~~this.progress){case 0:this.getRoleBox(0,this.role,""+n.getSchool()+this.role.name+"拜见"+this.chief.name+"掌门。");break;case 1:this.getRoleBox(1,this.chief,"哦，原来是"+n.getSchool()+"的高手，不是前来何事啊？");break;case 2:this.getRoleBox(0,this.role,"在下特此送来<color=#ff1c00>唐三彩骆驼</color>，奉上薄礼略表心意，望"+this.chief.name+"掌门笑纳。");break;case 3:this.getRoleBox(1,this.chief,"哈哈哈哈，甚好甚好!");break;default:cc.director.loadScene("sc_02")}this.progress++}}),cc._RF.pop()},{"./common/common":"common","./parameter/role":"role","./parameter/school":"school","./parameter/setparms":"setparms"}],GoEvent:[function(e,t,i){"use strict";cc._RF.push(t,"2b187pPieNCRIMaeTxUsmyZ","GoEvent");e("./common/common"),e("./common/system");var o=e("./parameter/setparms");cc.Class({extends:cc.Component,properties:{type:0},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(t){var i=e.eventType(e.type);cc.director.loadScene(i.scenes)},this)},start:function(){},eventType:function(){switch(~~arguments[0]){case 0:return o.removeEvent("shop_event"),{scenes:"shop_system"}}}}),cc._RF.pop()},{"./common/common":"common","./common/system":"system","./parameter/setparms":"setparms"}],PropSystem:[function(e,t,i){"use strict";cc._RF.push(t,"739dbDxIxpG9513JV+AEPOm","PropSystem");var o=e("./common/common"),n=e("./parameter/setparms"),a=e("./parameter/school"),c=e("./parameter/role");cc.Class({extends:cc.Component,properties:{prop:{default:null,type:cc.Prefab},list:{default:null,type:cc.Node},showbox:{default:null,type:cc.Node},rolelist:{default:null,type:cc.Node},role:{default:null,type:cc.Prefab}},onLoad:function(){this.showbox.active=!1,this.getData(),this.getRoleList()},start:function(){},getData:function(){for(var e=this,t=n.getPropAll(),i=0;i<t.length;i++)!function(i){var n=t[i],a=cc.instantiate(e.prop),c=a.getChildByName("pic");a.getChildByName("name").getComponent(cc.Label).string=n.name,c.getComponent(cc.Sprite).spriteFrame=o.loadFrame("resources/img/prop/"+n.img),a.on(cc.Node.EventType.TOUCH_START,function(e){c.scale=1.25},e),a.on(cc.Node.EventType.TOUCH_END,function(t){c.scale=1,e._prop_obj=n,e.showData()},e),e.list.addChild(a)}(i)},showData:function(){var e=this._prop_obj;if(e){this.showbox.active=!0;var t=this.showbox,i=t.getChildByName("showimg").getChildByName("pic"),n=t.getChildByName("name").getComponent(cc.RichText),a=t.getChildByName("describe").getComponent(cc.RichText),c=t.getChildByName("num").getComponent(cc.RichText),s=t.getChildByName("type").getComponent(cc.RichText),r=t.getChildByName("xiaoguo").getComponent(cc.RichText),l=t.getChildByName("owner");i.getComponent(cc.Sprite).spriteFrame=o.loadFrame("resources/img/prop/"+e.img),l.active=!1,n.string="<b>"+e.name+"</b>",a.string=""+e.describe,c.string="<b>数量："+e.num+"</b>",s.string=""+this.checkType(e.type),r.string=this.getWord(e),this.changePropList()}else this.showbox.active=!1},getRoleList:function(){var e=this;this.player=o.getplayer(),this.school=a.getSchool(this.player);var t=this.getMyRole();this.roleData=t;for(var i=0;i<t.length;i++)!function(i){var a=t[i],c=cc.instantiate(e.role),s=c.getChildByName("pic"),r=c.getChildByName("name").getComponent(cc.Label),l=c.getChildByName("use"),h=c.getChildByName("up"),p=c.getChildByName("learn"),u=c.getChildByName("cp-learn");l.active=!1,h.active=!1,p.active=!1,u.active=!1,s.getComponent(cc.Sprite).spriteFrame=o.loadFrame("resources/img/role/head/"+a.headpic.split(".png")[0]+"_200x200.png"),r.string=""+a.name,l.on(cc.Node.EventType.TOUCH_END,function(t){e._prop_obj.num>0&&(e._prop_obj.num--,e.closePropItem(),e.getProperty(e._prop_obj).forEach(function(t){n.setAbility(t,e._prop_obj[t],a)}))},e),p.on(cc.Node.EventType.TOUCH_END,function(t){e.checkSkill(a,e._prop_obj.skill)||e._prop_obj.num>0&&(e._prop_obj.num--,e.closePropItem(),n.setSkill(e._prop_obj.skill,a),e.getProperty(e._prop_obj).forEach(function(t){n.setAbility(t,e._prop_obj[t],a)}))},e),h.on(cc.Node.EventType.TOUCH_END,function(t){n.setEquipment(e._prop_obj,a),e.getProperty(e._prop_obj).forEach(function(t){n.setAbility(t,e._prop_obj[t],a)}),console.log(e.getMyRole())},e),e.rolelist.addChild(c)}(i)},checkSkill:function(e,t){for(var i=!1,o=0;o<e.skill.length;o++)e.skill[o].name==t&&(i=!0);return i},getMyRole:function(){var e=[];return this.school.army.forEach(function(t){e.push(c.queryroleID(t))}),e},checkType:function(){switch(~~arguments[0]){case 0:return"材料";case 1:return"补药";case 2:return"宝物";case 3:return"药物";case 4:return"武具";case 5:return"秘籍";case 6:return"防具";case 7:return"奇物"}},getProperty:function(e){var t=[],i=["MAXHP","MAXMP","LER","DEF","ATN","SPD","WIL"];switch(e.type){case 1:for(var o in e)e.hasOwnProperty(o)&&i.indexOf(o)>-1&&t.push(o);break;case 3:e.hasOwnProperty("HP")&&t.push("HP"),e.hasOwnProperty("MP")&&t.push("MP");break;case 4:break;case 5:for(var n in e)e.hasOwnProperty(n)&&i.indexOf(n)>-1&&t.push(n);break;case 6:break;case 7:for(var a in e)e.hasOwnProperty(a)&&i.indexOf(a)>-1&&t.push(a)}return t},getWord:function(e){var t="";return e.hasOwnProperty("special")&&(t+="<size=16><color=#FF19ee>"+e.special+"</color></size><br/>"),e.hasOwnProperty("skill")&&(t+="<size=16>可以学习<color=#FFa955>"+e.skill+"</color></size><br/>"),e.hasOwnProperty("power")&&(t+="<size=16>可以增加<color=#FF3434>"+e.power+"</color>点伤害</size><br/>"),e.hasOwnProperty("MAXMP")&&(t+="<size=16>可以提高<color=#FFa955>"+e.MAXMP+"</color>点真气上限</size><br/>"),e.hasOwnProperty("MAXHP")&&(t+="<size=16>可以提高<color=#FFa955>"+e.MAXHP+"</color>点气血上限</size><br/>"),e.hasOwnProperty("diplomacy")&&(t+="<size=16>可以增加<color=#FFa955>"+e.diplomacy+"</color>点友好度</size><br/>"),e.hasOwnProperty("offset")&&(t+="<size=16>可以抵挡<color=#d449ff>"+e.offset+"</color>点伤害</size><br/>"),e.hasOwnProperty("HP")&&(t+="<size=16>可以恢复<color=#33aa66>"+e.HP+"</color>点气血</size><br/>"),e.hasOwnProperty("MP")&&(t+="<size=16>可以恢复<color=#33aa66>"+e.MP+"</color>点真气</size><br/>"),e.hasOwnProperty("LER")&&(t+="<size=16>可以提升<color=#008B45>"+e.LER+"</color>点悟性</size><br/>"),e.hasOwnProperty("DEF")&&(t+="<size=16>可以提升<color=#008B45>"+e.DEF+"</color>点硬功</size><br/>"),e.hasOwnProperty("ATN")&&(t+="<size=16>可以提升<color=#008B45>"+e.ATN+"</color>点气劲</size><br/>"),e.hasOwnProperty("SPD")&&(t+="<size=16>可以提升<color=#008B45>"+e.SPD+"</color>点轻功</size><br/>"),e.hasOwnProperty("WIL")&&(t+="<size=16>可以提升<color=#008B45>"+e.WIL+"</color>点内功</size><br/>"),t},changePropList:function(){for(var e=this,t=this.rolelist.getChildren(),i=this._prop_obj,o=0;o<t.length;o++)!function(o){var n=t[o],a=n.getChildByName("name").getComponent(cc.Label),s=n.getChildByName("attr").getComponent(cc.RichText),r=n.getChildByName("use"),l=n.getChildByName("up"),h=n.getChildByName("learn"),p=n.getChildByName("cp-learn");s.string="",p.active=!1,0==i.type||2==i.type?(r.active=!1,l.active=!1,h.active=!1):1==i.type||3==i.type?(i&&e.getProperty(e._prop_obj).forEach(function(t){var i=c.getRoleData(a.string).ability,o=i[t],n=0,r=~~o+e._prop_obj[t];n="HP"==t?r>~~i.MAXHP?i.MAXHP:r:"MP"==t?r>~~i.MAXMP?i.MAXMP:r:~~o+e._prop_obj[t],s.string=o>=n?"<color=#23cc00>"+o+" → "+n+"</color><br/>":"<color=#cc2300>"+o+" → "+n+"</color><br/>"}),r.active=!0,l.active=!1,h.active=!1):4==i.type||6==i.type||7==i.type?(r.active=!1,l.active=!0,h.active=!1):5==i.type&&(e.checkSkill(c.getRoleData(a.string),i.skill)?(p.active=!0,h.active=!1):(h.active=!0,p.active=!1),r.active=!1,l.active=!1)}(o)},closePropItem:function(){var e=this.list.getChildren(),t=this._prop_obj;if(0==t.num){for(var i=0;i<e.length;i++){var o=e[i];o.getChildByName("name").getComponent(cc.Label).string==t.name&&(o.active=!1)}n.removeProp(t)}},update:function(e){var t=this._prop_obj;if(t){var i=this.showbox.getChildByName("num").getComponent(cc.RichText),o=this.showbox.getChildByName("owner");if(4==t.type||6==t.type||7==t.type){o.active=!0;var n=t.owner||"无";o.getComponent(cc.RichText).string="拥有："+n}i.string="<b>数量："+t.num+"</b>",this.changePropList()}}}),cc._RF.pop()},{"./common/common":"common","./parameter/role":"role","./parameter/school":"school","./parameter/setparms":"setparms"}],RoleInfo:[function(e,t,i){"use strict";cc._RF.push(t,"e0e35QH+/pFEIZC6gpE/oKL","RoleInfo");var o=e("./common/common"),n=(e("./parameter/setparms"),e("./parameter/school"),e("./parameter/role"),"resources/img/prop/");cc.Class({extends:cc.Component,properties:{head:{default:null,type:cc.Sprite},graphics:{default:null,type:cc.Graphics},graphics2:{default:null,type:cc.Graphics},attrRich:{default:null,type:cc.Node},attrMore:{default:null,type:cc.Node},skillbox:{default:null,type:cc.Node},skillperfab:{default:null,type:cc.Prefab},wuqi:{default:null,type:cc.Node},fangju:{default:null,type:cc.Node},xiedai:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.node.on("postInfo",function(t){e.data=t.detail.data,e.showContent()})},start:function(){},showContent:function(){console.log(this.data);var e=this.data.sex;this.head.spriteFrame=o.loadFrame("resources/img/role/head/"+this.data.headpic.split(".png")[0]+"_200x200.png"),this.setUi(e),this.drawAttr(),this.getMoreAttr(),this.getSkill(),this.getEquipment()},getEquipment:function(){var e=this,t=this.data.equipment,i=null;this.wuqi.getChildByName("kong").active=!0,this.fangju.getChildByName("kong").active=!0,this.xiedai.getChildByName("kong").active=!0,this.wuqi.getChildByName("box").active=!1,this.fangju.getChildByName("box").active=!1,this.xiedai.getChildByName("box").active=!1,t.forEach(function(t){switch(~~t.type){case 4:e.wuqi.getChildByName("kong").active=!1,(i=e.wuqi.getChildByName("box")).active=!0,i.getChildByName("item").getComponent(cc.Sprite).spriteFrame=o.loadFrame(""+n+t.img);break;case 6:e.fangju.getChildByName("kong").active=!1,(i=e.fangju.getChildByName("box")).active=!0,i.getChildByName("item").getComponent(cc.Sprite).spriteFrame=o.loadFrame(""+n+t.img);break;case 7:e.xiedai.getChildByName("kong").active=!1,(i=e.xiedai.getChildByName("box")).active=!0,i.getChildByName("item").getComponent(cc.Sprite).spriteFrame=o.loadFrame(""+n+t.img)}})},setUi:function(){var e=this.node.getChildByName("man0"),t=this.node.getChildByName("man1");1==arguments[0]?(t.active=!0,e.active=!1):(t.active=!1,e.active=!0)},getMoreAttr:function(){var e=this.data.ability.HP,t=this.data.ability.MAXHP,i=this.attrMore.getChildByName("HP");i.getChildByName("num").width=i.width*e/t-2;var n=this.data.ability.MP,a=this.data.ability.MAXMP,c=this.attrMore.getChildByName("MP");c.getChildByName("num").width=c.width*n/a-2;var s=this.data.ability.EXP,r=this.data.ability.NEXT,l=this.attrMore.getChildByName("EXP");l.getChildByName("num").width=l.width*s/r-2;var h=this.data.ability.Level,p=this.data.ability.MAXLevel;if(this.attrMore.getChildByName("Level").getComponent(cc.RichText).string="<b><color=#AF1919>"+o.getDate(h)+"</color></b><br/><color=#666666><size=12>潜能"+p+"</size></color>",this.attrMore.getChildByName("HP_STR2").getComponent(cc.Label).string=e+"/"+t,this.attrMore.getChildByName("MP_STR2").getComponent(cc.Label).string=n+"/"+a,this.attrMore.getChildByName("EXP_STR2").getComponent(cc.Label).string=s+"/"+r,this.data.study){var u=this.data.study.name,m=this.data.study.Max,d=this.data.study.Exp,y=this.attrMore.getChildByName("study");y.getChildByName("num").width=y.width*d/m-2,this.attrMore.getChildByName("study_STR2").getComponent(cc.Label).string=u+" "+d+"/"+m}else this.attrMore.getChildByName("study").getChildByName("num").width=0,this.attrMore.getChildByName("study_STR2").getComponent(cc.Label).string="未修炼武功"},getSkill:function(){var e=this;this.skillbox.getChildren().forEach(function(e){e.destroy()}),this.data.skill.forEach(function(t){var i=cc.instantiate(e.skillperfab),n=i.getChildByName("icon").getChildByName("img").getComponent(cc.Sprite),a=i.getChildByName("name").getComponent(cc.RichText),c=i.getChildByName("type").getComponent(cc.RichText),s=i.getChildByName("btn");a.string=t.name+"  "+e.getSkillStatus(t.status),n.spriteFrame=o.loadFrame("resources/img/icon/"+t.icon),c.string=""+e.getSkillType(t.type),0==~~t.type||1==~~t.status?s.active=!1:s.active=!0,s.on(cc.Node.EventType.TOUCH_END,function(i){var o=t.type;e.data.skill.forEach(function(e){e.type==o&&(e.status=0)}),t.status=1,e.getSkill()},e),s.active=!1,e.skillbox.addChild(i)})},getSkillStatus:function(){switch(~~arguments[0]){case 1:return"<b><color=#fca500>运行中</color></b>";case 2:return"<b><color=#fca500>修炼中</color></b>";default:return""}},getSkillType:function(){switch(~~arguments[0]){case 0:return"<color=#fc2300>武</color>";case 1:return"<color=#0023fc>内</color>";case 2:return"<color=#23cc23>步</color>";default:return""}},drawAttr:function(){var e=Math.min(this.data.ability.LER,100),t=Math.min(this.data.ability.DEF,100),i=Math.min(this.data.ability.ATN,100),o=Math.min(this.data.ability.SPD,100),n=Math.min(this.data.ability.WIL,100);this.attrRich.getChildByName("LER").getComponent(cc.RichText).string="<b>悟性<br/><color=#333333>"+e+"</color></b>",this.attrRich.getChildByName("DEF").getComponent(cc.RichText).string="<b>硬功<br/><color=#333333>"+t+"</color></b>",this.attrRich.getChildByName("ATN").getComponent(cc.RichText).string="<b>气劲<br/><color=#333333>"+i+"</color></b>",this.attrRich.getChildByName("SPD").getComponent(cc.RichText).string="<b>轻功<br/><color=#333333>"+o+"</color></b>",this.attrRich.getChildByName("WIL").getComponent(cc.RichText).string="<b>内功<br/><color=#333333>"+n+"</color></b>",this.polygon(this.graphics,5,75,75,[100,100,100,100,100],Math.PI/5),this.polygon(this.graphics2,5,75,75,[e,t,i,o,n],Math.PI/5)},polygon:function(e,t,i,o,n,a,c){a=a||0,c=c||!1,e.clear();var s=2*Math.PI/t;e.moveTo(i+n[0]*Math.sin(a),o-n[0]*Math.cos(a));for(var r=1;r<t;r++)a+=c?-s:s,e.lineTo(i+~~n[r]*Math.sin(a),o-~~n[r]*Math.cos(a));e.close(),e.stroke(),e.fill()}}),cc._RF.pop()},{"./common/common":"common","./parameter/role":"role","./parameter/school":"school","./parameter/setparms":"setparms"}],RoleSystem:[function(e,t,i){"use strict";cc._RF.push(t,"c2c83RbYd9BRLAqVQqvxVJs","RoleSystem");var o=e("./common/common"),n=(e("./parameter/setparms"),e("./parameter/school")),a=e("./parameter/role");cc.Class({extends:cc.Component,properties:{rolebox:{default:null,type:cc.Prefab},list:{default:null,type:cc.Node},school_name:{default:null,type:cc.Label},showbox:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.player=o.getplayer(),this.school=n.getSchool(this.player),this.school_name.string=""+this.school.name,this.getMyRole().forEach(function(t){var i=cc.instantiate(e.rolebox),n=i.getChildByName("head_pic").getComponent(cc.Sprite),a=i.getChildByName("role_name").getChildByName("name").getComponent(cc.Label),c=i.getChildByName("status_box").getChildByName("status_a").getComponent(cc.RichText),s=i.getChildByName("status_box").getChildByName("status_b").getComponent(cc.Label),r=i.getChildByName("button");a.string=t.name,c.string=e.ckStatusA(t.type),s.string=e.ckStatusB(t.status),n.spriteFrame=o.loadFrame("resources/img/role/head/"+t.headpic.split(".png")[0]+"_200x200.png"),r.on(cc.Node.EventType.TOUCH_END,function(i){e.showInfoBox(t)},e),e.list.addChild(i)})},start:function(){var e=this;this.showbox.x=this.node.width,this.showbox.getChildByName("close").on(cc.Node.EventType.TOUCH_END,function(t){e.showbox.runAction(cc.moveTo(.3,e.node.width,-35)),e.school_name.string=""+e.school.name},this)},getMyRole:function(){var e=[];return this.school.army.forEach(function(t){e.push(a.queryroleID(t))}),e},ckStatusA:function(){var e="状态：";switch(arguments[0]){case 0:e+="<color=#53fe82>健康</color>";break;case 1:e+="<color=#fe5382>受伤</color>"}return e},ckStatusB:function(){var e="";switch(arguments[0]){case 0:e+="未执行任务";break;case 1:e+="已执行任务"}return e},showInfoBox:function(e){this.showbox.runAction(cc.moveTo(.3,0,-35)),this.school_name.string=""+e.name,this.showbox.emit("postInfo",{data:e})}}),cc._RF.pop()},{"./common/common":"common","./parameter/role":"role","./parameter/school":"school","./parameter/setparms":"setparms"}],ShopSystem:[function(e,t,i){"use strict";cc._RF.push(t,"0c03ewLQ2BD1IBlIdvWI7q5","ShopSystem");var o=e("./common/common"),n=e("./parameter/setparms");cc.Class({extends:cc.Component,properties:{money:{default:null,type:cc.Label},goods:{default:null,type:cc.Prefab},box:{default:null,type:cc.Node},word:{default:null,type:cc.RichText}},onLoad:function(){var e=this;this.getMoney(),cc.loader.loadRes("data/prop",cc.RawAsset,function(t,i){e.goodsData=[],n.setPropData(i.data),i.data.forEach(function(t){t.nosale||e.goodsData.push(t)}),e.InitData()})},start:function(){},InitData:function(){var e=this,t=this.goodsData,i=[],a=t.length,c=4+~~(3*Math.random());if(t.length>c)for(;i.length<c;){for(var s=t[~~(Math.random()*a)],r=!1,l=0;l<i.length;l++)if(i[l].name==s.name){r=!0;break}r||i.push(s)}i.forEach(function(t,i){var a=cc.instantiate(e.goods),c=a.getChildByName("box").getChildByName("pic").getComponent(cc.Sprite),s=a.getChildByName("name").getComponent(cc.RichText),r=a.getChildByName("mbox").getChildByName("price").getComponent(cc.RichText),l=a.getChildByName("buybtn"),h=a.getChildByName("lookbtn");c.spriteFrame=o.loadFrame("resources/img/prop/"+t.img),s.string=t.name,r.string=t.price.toString(),h.on(cc.Node.EventType.TOUCH_END,function(i){e.word.string=e.getWord(t)},e),l.on(cc.Node.EventType.TOUCH_END,function(i){if(~~n.getAbility("Money")<t.price){var o=["小伙子，你这钱好像不太够啊！？","穷光蛋走走走！别耽误我做生意。","您这不拿我寻开心不是！？就这点钱根本买不着！","看清楚啦！这个可是需要<color=#FFd900>"+t.price+"两</color>，要不你再看看别的？"];e.word.string=o[~~(Math.random()*o.length)]}else{n.setAbility("Money",-t.price);var a=["您收好啦，你这小伙子眼光可真好。","您真识货这<color=#FFd900>"+t.name+"</color>可算买着了。"];e.word.string=a[~~(Math.random()*a.length)],e.getMoney(),l.getComponent(cc.Button).interactable=!1,l.opacity=180,l.off(cc.Node.EventType.TOUCH_END),n.setProp(t)}},e),e.box.addChild(a)})},getWord:function(e){var t=e.describe+"<br/>";return e.hasOwnProperty("special")&&(t+="<size=14><color=#FFd900>"+e.special+"</color></size><br/>"),e.hasOwnProperty("skill")&&(t+="<size=14>可以学习<color=#FFd900>"+e.skill+"</color></size><br/>"),e.hasOwnProperty("power")&&(t+="<size=14>可以增加<color=#FF3434>"+e.power+"</color>点伤害</size><br/>"),e.hasOwnProperty("MAXMP")&&(t+="<size=14>可以提高<color=#FFd900>"+e.MAXMP+"</color>点真气上限</size><br/>"),e.hasOwnProperty("MAXHP")&&(t+="<size=14>可以提高<color=#FFd900>"+e.MAXHP+"</color>点气血上限</size><br/>"),e.hasOwnProperty("diplomacy")&&(t+="<size=14>可以增加<color=#FFd900>"+e.diplomacy+"</color>点友好度</size><br/>"),e.hasOwnProperty("offset")&&(t+="<size=14>可以抵挡<color=#34d9ff>"+e.offset+"</color>点伤害</size><br/>"),e.hasOwnProperty("HP")&&(t+="<size=14>可以恢复<color=#33FF66>"+e.HP+"</color>点气血</size><br/>"),e.hasOwnProperty("MP")&&(t+="<size=14>可以恢复<color=#33FF66>"+e.MP+"</color>点真气</size><br/>"),e.hasOwnProperty("LER")&&(t+="<size=14>可以提升<color=#008B45>"+e.LER+"</color>点悟性</size><br/>"),e.hasOwnProperty("DEF")&&(t+="<size=14>可以提升<color=#008B45>"+e.DEF+"</color>点硬功</size><br/>"),e.hasOwnProperty("ATN")&&(t+="<size=14>可以提升<color=#008B45>"+e.ATN+"</color>点气劲</size><br/>"),e.hasOwnProperty("SPD")&&(t+="<size=14>可以提升<color=#008B45>"+e.SPD+"</color>点轻功</size><br/>"),e.hasOwnProperty("WIL")&&(t+="<size=14>可以提升<color=#008B45>"+e.WIL+"</color>点内功</size><br/>"),t},getMoney:function(){this.money.string=n.getAbility("Money")}}),cc._RF.pop()},{"./common/common":"common","./parameter/setparms":"setparms"}],bindBack:[function(e,t,i){"use strict";cc._RF.push(t,"7c599d/pzVOS5LUf+gVOdeK","bindBack"),cc.Class({extends:cc.Component,properties:{box:{default:null,type:cc.Node}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.director.loadScene("sc_02")})}}),cc._RF.pop()},{}],build:[function(e,t,i){"use strict";cc._RF.push(t,"9c7af/GA+REPZlWq3zFm0az","build");var o=[{id:0,has:!1,name:"市场",level:0,maxlevel:5,money:[300,1200,4800,19200,76800],num:[100,300,500,700,1e3],src:"land_market",describe:"云游商人可访问。每回合获得一定收入。"},{id:1,has:!1,name:"演武房",level:0,maxlevel:1,money:[700],src:"land_fight",num:[],describe:"可执行外功的修炼动作。"},{id:2,has:!1,name:"闭关室",level:0,maxlevel:1,money:[1e3],src:"land_think",num:[],describe:"可执行内功的修炼动作。"},{id:3,has:!1,name:"酒家",level:0,maxlevel:1,money:[500],src:"land_hunt",num:[],describe:"可访问武林人士。"},{id:4,has:!1,name:"藏经阁",level:0,maxlevel:1,money:[2e3],src:"land_tang",num:[],describe:"可执行书写武功操作。"},{id:5,has:!1,name:"兵器房",level:0,maxlevel:1,money:[3e3],src:"land_weapon",num:[],describe:"可执行打造兵器。"},{id:6,has:!1,name:"织造房",level:0,maxlevel:1,money:[3e3],src:"land_weave",num:[],describe:"可执行制造防具。"},{id:7,has:!1,name:"炼丹房",level:0,maxlevel:1,money:[3e3],src:"land_medic",num:[],describe:"可执行制造丹药。"},{id:8,has:!1,name:"药材田",level:0,maxlevel:3,money:[1500,4500,12e3],num:[1,2,3],src:"land_herb",describe:"每回合可生产一定数量的草药。"},{id:9,has:!1,name:"伐木房",level:0,maxlevel:3,money:[1500,4500,12e3],num:[1,2,3],src:"land_wood",describe:"每回合可生产一定数量的木材。"},{id:10,has:!1,name:"冶炼房",level:0,maxlevel:3,money:[1500,4500,12e3],num:[1,2,3],src:"land_mine",describe:"每回合可生产一定数量的矿石。"},{id:11,has:!1,name:"牢房",level:0,maxlevel:1,money:[3e3],src:"land_ward",describe:"可关押俘虏。"}];t.exports={getBuildData:function(){var e=arguments[0];return e?o[e]:o},queryBuild:function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return Object.assign(o[t])}},cc._RF.pop()},{}],common:[function(e,t,i){"use strict";cc._RF.push(t,"d9bb9zDxLVOFYb8QbL00Wxa","common");var o=e("system"),n=e("../parameter/school"),a={getDate:function(){for(var e=~~arguments[0],t=["零","一","二","三","四","五","六","七","八","九"],i=["","十","百","千"],o="",n="",a=0,c=!0;e>0;){var s=e%10;0===s?c||(c=!0,n=t[s]+n):(c=!1,o=t[s],n=(o+=i[a])+n),a++,e=Math.floor(e/10)}return n},loadFrame:function(){return new cc.SpriteFrame(cc.url.raw(arguments[0]))},getUnit:function(){return o.unit},changeActive:function(){o.active=!o.active},getActive:function(){return o.active},getplayerData:function(){return n.getSchool(o.player)},getAround:function(){return o.around},getplayer:function(){return o.player},nextPlayer:function(){o.player++,o.player>n.get().length-1&&(o.player=0,o.around++)},getJSON:function(e){return new Promise(function(t,i){var o=new XMLHttpRequest;o.open("GET",e),o.onreadystatechange=function(){4===this.readyState&&(200===this.status?t(this.response):i(new Error(this.statusText)))},o.responseType="json",o.setRequestHeader("Accept","application/json"),o.send()})}};t.exports=a,cc._RF.pop()},{"../parameter/school":"school",system:"system"}],lead:[function(e,t,i){"use strict";cc._RF.push(t,"8fbdbgK+1xBWZoK6pj8bPOa","lead"),t.exports={option:[],name:"？？？",school:"逍遥派",headpic:"face_00.png",repute:0,Money:5e4,ability:{Level:1,MAXLevel:99,EXP:0,NEXT:5,MAXHP:55,HP:55,MAXMP:20,MP:20,ATN:10,DEF:10,SPD:15,WIL:0,LER:10,WGT:50,justice:50},type:0,status:0,study:{},equipment:[],skill:[],prop:[],build:[],event:[]},cc._RF.pop()},{}],loadGame:[function(e,t,i){"use strict";cc._RF.push(t,"c332e3gL/ZHPZlXq9kMCYAr","loadGame");var o=e("./common/common"),n=e("./common/system"),a=e("./parameter/setparms"),c=e("./parameter/school");cc.Class({extends:cc.Component,properties:{around:{default:null,type:cc.Label},moeny:{default:null,type:cc.Label},repute:{default:null,type:cc.Label},instructions_build:{default:null,type:cc.Node},instructions_army:{default:null,type:cc.Node},instructions_prop:{default:null,type:cc.Node},instructions_diplomacy:{default:null,type:cc.Node},instructions_next:{default:null,type:cc.Node},msg:{default:null,type:cc.Node},num:{default:null,type:cc.Label},shool:{default:null,type:cc.Label},standing:{default:null,type:cc.Label},pic:{default:null,type:cc.Sprite}},onLoad:function(){this.initAround()},start:function(){this.beginAction()},initAround:function(){var e=this,t=this.node.getChildByName("stu_box"),i=this.node.getChildByName("sys_box");this.showAround(),this.showMoney(),this.showRepute(),this.checkMyBuild();var n=this.node.getChildByName("tanhaobox");this.node.getChildByName("build_system"),this.node.getChildByName("role_system");this.instructions_build.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("build_system")}),this.instructions_army.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("role_system")}),this.instructions_prop.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("prop_system")}),this.instructions_diplomacy.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("diplomacy_system")}),this.instructions_next.on(cc.Node.EventType.TOUCH_END,function(){n.active=!1,t.runAction(cc.moveTo(.4,0,350)),i.runAction(cc.sequence(cc.moveTo(.4,0,-370),cc.callFunc(function(){o.changeActive(),o.nextPlayer(),e.beginAction(),e.clearEvent()})))})},beginAction:function(){var e=this,t=(this.node.getChildByName("tanhaobox"),o.getplayer()),i=(o.getAround(),o.getplayerData(),c.getSchool(t)),n=a.getMaster(t);this.pic.spriteFrame=o.loadFrame("resources/img/role/"+n.headpic),this.shool.string=""+i.name,this.num.string="成员："+i.army.length,this.standing.string="掌门："+n.name;var s=this.node.getChildByName("stu_box"),r=this.node.getChildByName("sys_box"),l=this.node.getChildByName("my_status");if(l.active=!1,o.getActive())this.checkEvent(),s.runAction(cc.moveTo(.4,0,290)),r.runAction(cc.moveTo(.4,0,-270));else{l.active=!0;var h=[];if(h.push(i.msg[~~(Math.random()*i.msg.length)]),0==t){var p=a.getMyBuild(),u=this.queryHas(p,"市场");if(u.level>0){var m=~~u.num[u.level-1]+~~(100*Math.random());h.push("上回合门派收益"+m+"两"),a.setAbility("Money",m)}this.showAround(),this.showMoney(),this.showRepute()}0!=t&&h.push(n.name+"正思考着什么...");var d=0;this.msg.getComponent(cc.Label).string=h[d],this.msg.x=960;var y=cc.sequence(cc.repeat(cc.sequence(cc.moveTo(.8,0,0),cc.delayTime(2),cc.moveTo(.8,-960,0),cc.callFunc(function(){e.msg.x=960,d++,e.msg.getComponent(cc.Label).string=h[d]})),h.length),cc.callFunc(function(){0==t?(l.active=!1,s.runAction(cc.moveTo(.4,0,290)),r.runAction(cc.moveTo(.4,0,-270)),o.changeActive(),e.initEvent()):(o.nextPlayer(),e.beginAction()),d=0}));this.msg.runAction(y)}},checkMyBuild:function(){for(var e=this.node.getChildByName("landbox").getChildren(),t=a.getMyBuild(),i=0;i<e.length;i++)for(var o=e[i]._name,n=0;n<t.length;n++)t[n].src!=o||e[i].active||(e[i].active=!0);this.showMoney()},showMoney:function(){this.moeny.string=a.getMoney()},showAround:function(){this.around.string="第"+o.getDate(n.around)+"回合"},showRepute:function(){this.repute.string=a.getRepute()},initEvent:function(){var e=a.getMyBuild();this.node.getChildByName("tanhaobox").active=!0;var t=this.queryHas(e,"市场");if(t){var i=~~(100*Math.random())<=15*~~t.level;console.log("shop_event："+i),i&&a.addEvent("shop_event")}this.checkEvent()},checkEvent:function(){var e=this.node.getChildByName("tanhaobox");e.getChildren().forEach(function(e){e.active=!1}),a.getEvent().forEach(function(t){e.getChildByName(t).active=!0})},clearEvent:function(){a.removeEvent("shop_event")},queryHas:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name==t)return e[i];return!1}}),cc._RF.pop()},{"./common/common":"common","./common/system":"system","./parameter/school":"school","./parameter/setparms":"setparms"}],loadTALK:[function(e,t,i){"use strict";cc._RF.push(t,"4d6daSz8KJP4Jbf1VnDwlAi","loadTALK");var o=e("./common/system"),n=e("./parameter/setparms"),a=e("./parameter/school"),c=e("./parameter/role"),s=e("./parameter/option");cc.Class({extends:cc.Component,properties:{input_box:{default:null,type:cc.Node},option_box:{default:null,type:cc.Node},next_ico:{default:null,type:cc.Node},bg_pic:{default:null,type:cc.Sprite},head_pic:{default:null,type:cc.Sprite},talk:{default:null,type:cc.RichText},role_name:{default:null,type:cc.Label},list:[],scenes:null,num:0,max:null,pause:!1},onLoad:function(){this.bindInit(),cc.director.setDisplayStats(!1)},bindInit:function(){var e=this;this.option_box.active=!1,this.input_box.active=!1,cc.loader.loadRes("data/talk",cc.RawAsset,function(t,i){e.list=i.data[o.progress].list,e.scenes=i.data[o.progress].scenes,e.max=e.list.length,e.bg_pic.spriteFrame=e.loadFrame(i.data[o.progress].bg_pic),e.nextPlot()})},fadeAction:function(e){var t=cc.sequence(cc.fadeOut(1),cc.callFunc(function(){e&&e()}),cc.fadeIn(.6));this.node.runAction(t)},start:function(){var e=this;this.node.on("touchend",function(){e.nextPlot()});for(var t=0;t<this.option_box.getChildren().length;t++)!function(t){var i=e.option_box.children[t];~function(t){i.on(cc.Node.EventType.TOUCH_START,function(){i.scale=1.2},e),i.on(cc.Node.EventType.TOUCH_END,function(){i.scale=1,e.bindOption(t,i.children[0].getComponent(cc.Label).string)},e)}(t)}(t)},bindOption:function(e,t){n.setOption({id:e,name:t}),"不需要"==t&&(this.num=this.max),this.pause=!1,this.num++,this.next_ico.active=!0,this.option_box.active=!1,this.nextPlot()},showOption:function(e){this.option_box.active=!0,this.next_ico.active=!1;for(var t=0;t<this.option_box.getChildren().length;t++){var i=this.option_box.children[t];i.scale=1,i.children[0].getComponent(cc.Label).string=e[t],e[t]?i.active=!0:i.active=!1}},showInput:function(e,t){this.input_box.active=!0,this.next_ico.active=!1;var i=this.input_box.getChildren()[0].getChildren()[0],o=this.input_box.getChildren()[1];switch(o.active=!1,e){case"name":i.getComponent(cc.EditBox).placeholder="姓甚名谁";break;case"school":i.getComponent(cc.EditBox).placeholder="何门何派"}i.on("editing-did-ended",function(c){var s=i.getComponent(cc.EditBox).string;if(!s)return!1;switch(e){case"name":n.setName(s);break;case"school":var r=s.substr(s.length-1,s.length);if("派"!=r&&"门"!=r&&"寨"!=r&&"教"!=r&&"帮"!=r&&(s+="派"),a.querySchool(s))return o.active=!0,o.getComponent(cc.Label).string="你好像不是这一派的一份子，请重新填写",!1;o.active=!1,n.setSchool(s)}i.getComponent(cc.EditBox).string="",i.off("editing-did-ended"),t&&t()})},nextPlot:function(){var e=this;if(this.max>this.num){if(!this.pause)switch(this.head_pic.spriteFrame=this.loadFrame(this.list[this.num].role_pic),0==this.list[this.num].status?this.role_name.string=(n.getName()||this.list[this.num].role_name)+":":this.role_name.string=this.list[this.num].role_name+":",this.list[this.num].type){case"0":this.talk.string=this.list[this.num].content,this.num++;break;case"1":this.talk.string=this.list[this.num].content,this.pause=!0,this.showOption(this.list[this.num].option);break;case"2":this.talk.string=""+this.list[this.num].content[0]+n.getOptionAll()[n.getOptionAll().length-1].name+this.list[this.num].content[1]+this.list[this.num].option[n.getOptionAll()[n.getOptionAll().length-1].id]+this.list[this.num].content[2],this.num++;break;case"3":this.talk.string=this.list[this.num].content,this.pause=!0,this.showInput(this.list[this.num].relation,function(){e.pause=!1,e.input_box.active=!1,e.num++,e.next_ico.active=!0});break;case"4":var t="";switch(this.list[this.num].relation){case"name":t=n.getName();break;case"school":t=n.getSchool()}this.talk.string=""+this.list[this.num].content[0]+t+this.list[this.num].content[1],this.num++}}else{switch(o.progress){case 0:s.Opening(),this.initSchool(),this.pause=!0,o.progress=1,this.fadeAction(function(){e.bindInit(),e.pause=!1});break;case 1:this.pause=!0,o.progress=2,this.fadeAction(function(){e.bindInit(),e.pause=!1});break;case 2:o.progress=3,cc.director.loadScene("sc_02")}this.num=0}},initSchool:function(){c.setRole(0).name=n.getAll().name,c.setRole(0).headpic=n.getAll().headpic,c.setRole(0).ability=n.getAll().ability,c.setRole(0).type=n.getAll().type,c.setRole(0).equipment=n.getAll().equipment,c.setRole(0).skill=n.getAll().skill,a.get()[0].name=n.getAll().school},loadFrame:function(){return new cc.SpriteFrame(cc.url.raw(arguments[0]))}}),cc._RF.pop()},{"./common/system":"system","./parameter/option":"option","./parameter/role":"role","./parameter/school":"school","./parameter/setparms":"setparms"}],option:[function(e,t,i){"use strict";cc._RF.push(t,"40371s0UHZEH7oY5TBdgsYQ","option");var o=e("setparms"),n=e("skill"),a=(e("prop"),e("build"),e("school"),{Opening:function(){var e=o.getOptionAll(5);switch(~~e[0].id){case 0:o.setAbility("HP",5),o.setAbility("MP",5),o.setAbility("MAXHP",5),o.setAbility("MAXMP",5),o.setAbility("ATN",1),o.setAbility("DEF",1);break;case 1:o.setAbility("HP",10),o.setAbility("MAXHP",10),o.setAbility("SPD",1),o.setAbility("WGT",5);break;case 2:o.setAbility("MP",5),o.setAbility("MAXMP",5),o.setAbility("LER",1),o.setAbility("WGT",-2);break;case 3:o.setAbility("HP",10),o.setAbility("MP",5),o.setAbility("MAXHP",10),o.setAbility("MAXMP",5),o.setAbility("WGT",10)}var t=null;switch(~~e[1].id){case 0:t=n.querySkill("太祖长拳");break;case 1:t=n.querySkill("御剑术");break;case 2:t=n.querySkill("柴刀十八路");break;case 3:t=n.querySkill("太祖棍法")}switch(o.setSkill(t),~~e[2].id){case 0:o.setAbility("ATN",1);break;case 1:o.setAbility("DEF",1);break;case 2:o.setAbility("SPD",1);break;case 3:o.setAbility("WIL",1)}switch(~~e[3].id){case 0:o.setAbility("HP",10),o.setAbility("MAXHP",10),o.setAbility("justice",5);break;case 1:o.setAbility("LER",1),o.setAbility("justice",5);break;case 2:o.setAbility("repute",-5),o.setAbility("SPD",1);break;case 3:o.setAbility("justice",-20),o.setAbility("WIL",1)}switch(~~e[4].id){case 0:o.setAbility("Money",2e3);break;case 1:i={img:"miji0.png",name:"吐纳秘典",price:2400,describe:"记录了吐纳心法修炼法门。",skill:"吐纳心法",type:5,MAXHP:"12",MAXMP:"18",nosale:!1,num:1};o.setProp(i);break;case 2:var i={id:-1,img:"xinyuanyima.png",name:"心猿意马",price:1,describe:"一只有灵性的乌龟。",special:"或许在一些事上能带来好运",MAXHP:25,LER:2,type:7,nosale:!0};o.setProp(i);break;case 3:o.setAbility("repute",20)}}});t.exports=a,cc._RF.pop()},{build:"build",prop:"prop",school:"school",setparms:"setparms",skill:"skill"}],prop:[function(e,t,i){"use strict";cc._RF.push(t,"fca38fVlYtNCY1JiLLBt6yO","prop");var o=[],n=[];t.exports={setData:function(e){o=e},getData:function(){return o},getLen:function(){return o.length+n.length},add:function(){n.push(arguments[0])},getProp:function(){var e=arguments[0];return e?o[e]:o},queryProp:function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return Object.assign(o[t])}},cc._RF.pop()},{}],role:[function(e,t,i){"use strict";cc._RF.push(t,"13c53cfrH9Nja6hoZb1oz5a","role");var o=[{id:0,name:"凌云",headpic:"face_00.png",ability:{Level:1,MAXLevel:99,EXP:0,NEXT:5,MAXHP:52,HP:50,MAXMP:20,MP:20,ATN:35,DEF:19,SPD:28,WIL:42,LER:54,WGT:50,justice:50},type:0,equipment:[],skill:[],status:0,study:null,sex:1},{id:1,name:"伽耶",headpic:"face_01.png",ability:{Level:1,MAXLevel:80,EXP:1,NEXT:5,MAXHP:63,HP:63,MAXMP:22,MP:22,ATN:32,DEF:11,SPD:21,WIL:44,LER:47,WGT:50},type:0,equipment:[],skill:[],status:0,study:null,sex:0},{id:2,name:"都灵子",headpic:"face_20.png",ability:{Level:1,MAXLevel:70,EXP:0,NEXT:5,MAXHP:50,HP:50,MAXMP:20,MP:20,ATN:5,DEF:5,SPD:5,WIL:5,LER:5,WGT:50,justice:50},type:0,equipment:[],skill:[],status:0,study:null,sex:1},{id:3,name:"天机子",headpic:"face_21.png",ability:{Level:1,MAXLevel:70,EXP:0,NEXT:5,MAXHP:50,HP:50,MAXMP:20,MP:20,ATN:5,DEF:5,SPD:5,WIL:5,LER:5,WGT:50,justice:50},type:0,equipment:[],skill:[],status:0,study:null,sex:1},{id:4,name:"韩青风",headpic:"face_22.png",ability:{Level:1,MAXLevel:60,EXP:0,NEXT:5,MAXHP:50,HP:50,MAXMP:20,MP:20,ATN:35,DEF:63,SPD:34,WIL:32,LER:24,WGT:50,justice:50},type:0,equipment:[],skill:[],status:0,study:null,sex:1}];t.exports={getrole:function(){var e=arguments[0]+"";return e?o[e]:o},queryrole:function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return Object.assign(o[t])},getRoleData:function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return o[t]},queryroleID:function(e){for(var t=0;t<o.length;t++)if(o[t].id===e)return Object.assign(o[t])},setRole:function(e){for(var t=0;t<o.length;t++)if(o[t].id===e)return o[t]}},cc._RF.pop()},{}],school:[function(e,t,i){"use strict";cc._RF.push(t,"ab4afjZICpI5p5lg3pm9QfI","school");var o=[{id:0,name:"派",army:[0,1],msg:["伽耶正在烹制着美味的三文鱼...","伽耶正在辛苦的健身..."]},{id:1,name:"蓬莱派",army:[2],msg:["温仁厚仰望天空若有所思..."]},{id:2,name:"泰山派",army:[3],msg:["玉磐子好像偷偷下山去了..."]},{id:3,name:"黑风寨",army:[4],msg:["韩青风给山寨众山贼洗脑中...","周文对着镜子坏笑中..."]}];t.exports={getSchool:function(){var e=arguments[0]+"";return e?o[~~e]:o},get:function(){return o},querySchool:function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return Object.assign(o[t])}},cc._RF.pop()},{}],setparms:[function(e,t,i){"use strict";function o(e){var t=["MAXHP","MAXMP","LER","DEF","ATN","SPD","WIL"],i=[];for(var o in e)e.hasOwnProperty(o)&&t.indexOf(o)>-1&&i.push({key:o,num:e[o]});return i}cc._RF.push(t,"5dd5aw0vWZFIpIIF9pmC09c","setparms");var n=e("lead"),a=e("build"),c=e("school"),s=e("role"),r=e("skill"),l=e("prop"),h={getEvent:function(){return n.event},addEvent:function(e){n.event.push(e)},removeEvent:function(e){n.event.forEach(function(t,i){t==e&&n.event.splice(i,1)})},clearEvent:function(){n.event=[],n.event.length=0},getMaster:function(e){return s.queryroleID(c.getSchool(e).army[0])},getAll:function(){return n},getName:function(){return n.name},getMoney:function(){return n.Money},getRepute:function(){return n.repute},getSchool:function(){return n.school},getOptionAll:function(){var e=arguments[0];return e?[].filter.call(n.option,function(t,i){return i<e}):n.option},getAbilityAll:function(){return n.ability},getSkillAll:function(){return n.skill},getEquipmentAll:function(){return n.equipment},getPropAll:function(){return n.prop},getAbility:function(e){switch(e){case"Money":case"repute":return n[e];default:return n.ability[e]}},setAbility:function(e,t,i){var o=i||n;switch(e){case"Money":n[e]+=~~t,n.Money=Math.min(n.Money,99999999);break;case"repute":n[e]+=~~t,n.repute=Math.min(n.repute,99999999);break;case"HP":var a=o.ability.MAXHP;o.ability[e]=Math.min(a,~~o.ability[e]+t);break;case"MP":var c=o.ability.MAXMP;o.ability[e]=Math.min(c,~~o.ability[e]+t);break;default:o.ability[e]+=~~t}},setOption:function(e){n.option.push(e)},setSkill:function(e,t,i,o){var a=r.querySkill(e);"string"==typeof t&&(t=s.getRoleData(t)),a&&(a.Exp=o||0,a.level=i||1,t?t.skill.push(a):n.skill.push(a))},getPropData:function(){return l.getData()},setPropData:function(e){l.setData(e)},removeProp:function(e,t){var i=n.prop;t?i.forEach(function(t,o){t.id==e.id&&i.splice(o,1)}):i.forEach(function(t,o){t.name==e.name&&i.splice(o,1)})},setProp:function(){var e=n.prop,t=!1,i=Object.assign(arguments[0]);e.forEach(function(e){e.name==i.name&&4!=e.type&&6!=e.type&&(e.num++,t=!0)}),t||(l.add(i),i.num=1,i.id=l.getLen()+1,e.push(i))},setEquipment:function(e,t){var i=t||n,a=e.owner,c=null;a&&(c=s.getRoleData(a)).equipment.forEach(function(t,i){t.id==e.id&&(o(t).forEach(function(e){c.ability[e.key]-=e.num}),c.equipment.splice(i,1))}),i.equipment.forEach(function(t,o){t.type==e.type&&(t.owner="",i.equipment.splice(o,1))}),e.owner=i.name,i.equipment.push(e)},setName:function(e){n.name=e},setSchool:function(e){n.school=e},setMyBuild:function(e){var t=a.queryBuild(e);t.level=1,n.build.push(t)},upMyBuild:function(e){var t=a.queryBuild(e);t.level<t.maxlevel&&(t.level+=1)},getMyBuild:function(e){return e?a.queryBuild(e):n.build},getMyHeadpic:function(){return n.headpic}};t.exports=h,cc._RF.pop()},{build:"build",lead:"lead",prop:"prop",role:"role",school:"school",skill:"skill"}],skill:[function(e,t,i){"use strict";cc._RF.push(t,"84e28ntB3VFFaJDdpg2nn38","skill");var o=[{id:0,name:"太祖长拳",icon:"001.png",type:0,status:0,Max:80},{id:1,name:"御剑术",icon:"002.png",type:0,status:0,Max:80},{id:2,name:"柴刀十八路",icon:"003.png",type:0,status:0,Max:80},{id:3,name:"太祖棍法",icon:"004.png",type:0,status:0,Max:80},{id:4,name:"吐纳心法",icon:"005.png",type:1,status:0,Max:80},{id:5,name:"如影随形",icon:"006.png",type:2,status:0,Max:480},{id:6,name:"抱元劲",icon:"007.png",type:1,status:0,Max:240},{id:7,name:"拈花指",icon:"008.png",type:0,status:0,Max:860},{id:8,name:"聚元功",icon:"009.png",type:1,status:0,Max:270},{id:9,name:"气疗术",icon:"010.png",type:0,status:0,Max:80}];t.exports={getSkill:function(){var e=arguments[0];return e?o[e]:o},querySkill:function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return Object.assign(o[t])}},cc._RF.pop()},{}],system:[function(e,t,i){"use strict";cc._RF.push(t,"0e21bv3UyBAhaHbWYI4xoyC","system"),t.exports={progress:0,around:1,unit:"两",active:!1,player:0},cc._RF.pop()},{}]},{},["BuildSystem","DiplomacySystem","GoEvent","PropSystem","RoleInfo","RoleSystem","ShopSystem","bindBack","common","system","loadGame","loadTALK","build","lead","option","prop","role","school","setparms","skill"]);
//# sourceMappingURL=project.js.map