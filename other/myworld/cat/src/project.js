window.__require=function t(e,o,i){function n(a,s){if(!o[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var d="function"==typeof __require&&__require;if(!s&&d)return d(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+a+"'")}}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return n(e[a][1][t]||t)},p,p.exports,t,e,o,i)}return o[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({albumBox:[function(t,e,o){"use strict";cc._RF.push(e,"3426cxdoz5JEZR5W2H6lf3o","albumBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./photoItem"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.photoItem=null,e.photoData=[],e.photo=[],e.index=0,e.max=0,e.n=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.init=function(t){var e=this;this.max>0?t&&t():(this.max=this.photoData.length,0!=this.max&&this.photoData.map(function(o){e.setSpriteFrame(o,t)}))},e.prototype.render=function(t){var e=this,o=0,n=this.photo.length;this.max=n,this.photo.map(function(t,c){var a=cc.instantiate(e.photoItem).getComponent(i.default);a.setSprite(t),a.node.zIndex=n-c,0==c&&(a.active=!0),a.parent=e,a.node.rotation=o,o+=5,a.node.setParent(e.box)}),t&&t()},e.prototype.setSpriteFrame=function(t,e){var o=this;this.node.getComponents(cc.Sprite)[0];cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){o.photo.push(i),o.photo.length==o.max&&o.render(e)})},e.prototype.changePhotoRotation=function(){this.box.children.map(function(t){t.runAction(cc.rotateBy(.2,-5))})},e.prototype.getMaxZIndex=function(){for(var t=this.box.children[0],e=this.box.children[0].zIndex,o=1;o<this.box.children.length;o++){var n=this.box.children[o];n.zIndex>e&&(t=n)}return t.getComponent(i.default)},__decorate([a(cc.Node)],e.prototype,"box",void 0),__decorate([a(cc.Prefab)],e.prototype,"photoItem",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./photoItem":"photoItem"}],api:[function(t,e,o){"use strict";cc._RF.push(e,"bf0ea4GfHVIT555Z3byDSZJ","api"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=function(){function t(){}return t.ajax=function(t,e){var o=i.default.REQUIRE_URL+t.url,n=cc.loader.getXMLHttpRequest(),c=t.data||{},a=t.type.toUpperCase(),s="";if(0!=Object.keys(c).length){for(var r in s="?",c){var d=r+"="+c[r];s+=""==s?d:d+"&"}s=s.substring(0,s.length-1)}"POST"==a&&n.open("POST",o+s),"GET"==a&&n.open("GET",o+s),n.timeout=5e3,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.onreadystatechange=function(){if(4===n.readyState&&200==n.status){var t=n.responseText;e(JSON.parse(t))}},n.send()},t.toast=function(t){var e=document.createElement("div");e.innerHTML=t,e.style.width="160px",e.style.boxSizing="border-box",e.style.height="40px",e.style.position="fixed",e.style.color="#ffffff",e.style.bottom="100px",e.style.left="50%",e.style.marginLeft="-80px",e.style.textAlign="center",e.style.lineHeight="40px",e.style.backgroundColor="rgba(0,0,0,.6)",e.style.opacity="0",e.style.fontSize="14px",e.style.borderRadius="2px";var o=0,i=.01,n=setInterval(function(){o+=i,e.style.opacity=o+"",o>=1&&(i*=-1.2),o<=0&&(clearInterval(n),e.remove())},16);document.body.appendChild(e)},t}();o.default=n,cc._RF.pop()},{"./config":"config"}],buff:[function(t,e,o){"use strict";cc._RF.push(e,"ae956lWwkxJVpBHCixbUomS","buff"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconArr=[],e.icon=null,e.txt=null,e.type="",e.num=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.init=function(){return this.type==i.default.GOODSTYPE.FOOD&&(this.icon.spriteFrame=this.iconArr[0],this.icon.node.setContentSize(cc.size(30,40))),this.type==i.default.GOODSTYPE.TOY&&(this.icon.spriteFrame=this.iconArr[1],this.icon.node.setContentSize(cc.size(36,30))),this.txt.string="+"+this.num,this.node.opacity=0,this},e.prototype.show=function(t,e){var o=this;this.node.setPosition(cc.v2(t.x,t.y+100)),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,cc.v2(t.x,t.y+240)),cc.fadeIn(.1)),cc.callFunc(function(){o.hide(),e&&e()})))},e.prototype.hide=function(){var t=this;this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.node.destroy()})))},__decorate([a([cc.SpriteFrame])],e.prototype,"iconArr",void 0),__decorate([a(cc.Sprite)],e.prototype,"icon",void 0),__decorate([a(cc.Label)],e.prototype,"txt",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],catHomeBox:[function(t,e,o){"use strict";cc._RF.push(e,"950506xROFErKhgqp7zrgmd","catHomeBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./catItem"),n=t("./main"),c=t("./config"),a=cc._decorator,s=a.ccclass,r=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.main=null,e.nickname=null,e.age=null,e.VIT=null,e.Mood=null,e.breed=null,e.pic=null,e.VITRateNum=null,e.MoodRateNum=null,e.editBtn=null,e.content=null,e.catItem=null,e.catBreedArr=[],e.catTemp=null,e.catData=[],e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.editBtn.on(cc.Node.EventType.TOUCH_END,function(){t.main&&t.catTemp&&t.main.openEditCatName(t.catTemp)})},e.prototype.start=function(){},e.prototype.init=function(){this.catData=this.main.catData;for(var t=0;t<this.catData.length;t++){var e=this.catData[t];if(e.isActive)return this.catTemp=e,this.setInfo(),this}},e.prototype.setInfo=function(){this.nickname.string=this.catTemp.name,this.age.string=c.default.getAgeString(this.catTemp.age),this.VIT.string=this.catTemp.VIT+"/"+this.catTemp.MAXVIT,this.Mood.string=this.catTemp.Mood+"/"+this.catTemp.MAXMood,this.VITRateNum.fillRange=this.catTemp.VIT/this.catTemp.MAXVIT,this.MoodRateNum.fillRange=this.catTemp.Mood/this.catTemp.MAXMood,this.breed.string=c.default.getBreed(this.catTemp.breed).name+" \u4f18\u96c5",this.pic.spriteFrame=this.catBreedArr[this.catTemp.breed]},e.prototype.removeList=function(){this.content.children.forEach(function(t){t.destroy()})},e.prototype.createList=function(){var t=this;this.removeList(),this.catData.forEach(function(e){t.createCatItem(e)})},e.prototype.createCatItem=function(t){var e=cc.instantiate(this.catItem).getComponent(i.default);return e.home=this,e.init(t),e.node.setParent(this.content),e},e.prototype.selectItem=function(t){var e=this;this.content.children.map(function(o,n){var c=o.getComponent(i.default);c.catTemp.cid==t?(e.catTemp=e.main.catData[n],e.setInfo(),o.getComponent(cc.Sprite).spriteFrame=c.activePic[1]):o.getComponent(cc.Sprite).spriteFrame=c.activePic[0]})},__decorate([r(n.default)],e.prototype,"main",void 0),__decorate([r(cc.Label)],e.prototype,"nickname",void 0),__decorate([r(cc.Label)],e.prototype,"age",void 0),__decorate([r(cc.Label)],e.prototype,"VIT",void 0),__decorate([r(cc.Label)],e.prototype,"Mood",void 0),__decorate([r(cc.Label)],e.prototype,"breed",void 0),__decorate([r(cc.Sprite)],e.prototype,"pic",void 0),__decorate([r(cc.Sprite)],e.prototype,"VITRateNum",void 0),__decorate([r(cc.Sprite)],e.prototype,"MoodRateNum",void 0),__decorate([r(cc.Node)],e.prototype,"editBtn",void 0),__decorate([r(cc.Node)],e.prototype,"content",void 0),__decorate([r(cc.Prefab)],e.prototype,"catItem",void 0),__decorate([r([cc.SpriteFrame])],e.prototype,"catBreedArr",void 0),e=__decorate([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./catItem":"catItem","./config":"config","./main":"main"}],catItem:[function(t,e,o){"use strict";cc._RF.push(e,"9e6bercFQRJfqO9uQ7gio7s","catItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nickname=null,e.age=null,e.breed=null,e.btn=null,e.pic=null,e.activePic=[],e.catBreedArr=[],e.btnArr=[],e.catTemp=null,e.home=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){t.home.selectItem(t.catTemp.cid)}),this.btn.on(cc.Node.EventType.TOUCH_END,function(){t.catTemp.isActive||t.home.main.onLetOut(t.catTemp.cid)})},e.prototype.start=function(){},e.prototype.init=function(t){t.isActive?this.node.getComponent(cc.Sprite).spriteFrame=this.activePic[1]:this.node.getComponent(cc.Sprite).spriteFrame=this.activePic[0],this.catTemp=t,this.nickname.string=this.catTemp.name,this.age.string=i.default.getAgeString(this.catTemp.age),this.pic.spriteFrame=this.catBreedArr[t.breed],this.btn.getComponent(cc.Sprite).spriteFrame=this.btnArr[this.catTemp.isActive?1:0]},__decorate([a(cc.Label)],e.prototype,"nickname",void 0),__decorate([a(cc.Label)],e.prototype,"age",void 0),__decorate([a(cc.Label)],e.prototype,"breed",void 0),__decorate([a(cc.Node)],e.prototype,"btn",void 0),__decorate([a(cc.Sprite)],e.prototype,"pic",void 0),__decorate([a([cc.SpriteFrame])],e.prototype,"activePic",void 0),__decorate([a([cc.SpriteFrame])],e.prototype,"catBreedArr",void 0),__decorate([a([cc.SpriteFrame])],e.prototype,"btnArr",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],cat:[function(t,e,o){"use strict";cc._RF.push(e,"fcf84nHWUJJk7p5Mu1iT83Y","cat"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./move"),n=t("./tipsname"),c=cc._decorator,a=c.ccclass,s=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipsName=null,e.cid="",e.name="",e.breed=0,e.sex=0,e.age=1,e.VIT=0,e.Mood=0,e.MAXVIT=500,e.MAXMood=450,e.isHunger=!1,e.isAngry=!1,e.isFirstName=!0,e.anim=null,e.animType="",e.isPlaying=!1,e.isActive=!1,e.main=null,e.visitMain=null,e.move=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.active=!1,this.anim=this.getComponent(cc.Animation),this.move=this.node.getComponent(i.default)},e.prototype.start=function(){},e.prototype.render=function(t){this.cid=t.cid,this.name=t.name,this.breed=t.breed,this.sex=t.sex,this.age=t.age,this.VIT=t.VIT,this.Mood=t.Mood,this.MAXVIT=t.MAXVIT,this.MAXMood=t.MAXMood,this.isHunger=t.isHunger,this.isAngry=t.isAngry,this.isFirstName=t.isFirstName,this.isActive=t.isActive,this.createTipsName()},e.prototype.setMoveActive=function(t){this.move.active=t},e.prototype.upLevel=function(){this.age>=36||(this.VIT=0,this.Mood=0,this.MAXVIT+=10,this.MAXMood+=5,this.age+=1,this.main&&this.main.showUpLevel(),this.visitMain&&this.visitMain.showUpLevel())},e.prototype.checkMood=function(){this.Mood=Math.max(0,Math.min(this.Mood,this.MAXMood))},e.prototype.checkVIT=function(){this.VIT=Math.max(0,Math.min(this.VIT,this.MAXVIT))},e.prototype.init=function(t,e){var o=this;this.cid=t.cid,this.name=t.name,this.breed=t.breed,this.sex=t.sex,this.age=t.age,this.VIT=t.VIT,this.Mood=t.Mood,this.MAXVIT=t.MAXVIT,this.MAXMood=t.MAXMood,this.isHunger=t.isHunger,this.isAngry=t.isAngry,this.isFirstName=t.isFirstName,this.isActive=t.isActive,this.move.pos=e,this.action("Normal"),this.node.active=!0,this.move.active=!1,this.node.setPosition(cc.v2(e.x,e.y+150)),this.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(e)),cc.callFunc(function(){o.move.active=!0,o.createTipsName()})))},e.prototype.createTipsName=function(){cc.instantiate(this.tipsName).getComponent(n.default).init(this).show()},e.prototype.action=function(t,e){switch(this.removeAnim(),t){case"Angry":case"Befed":case"Drag":case"Hunger":case"Normal":case"Play":case"Blink":this.animType=t,this.isPlaying=!0,this.playAnim(t,e)}},e.prototype.removeAnim=function(){this.isPlaying=!1,this.anim.stop(),this.unscheduleAllCallbacks()},e.prototype.playAnim=function(t,e){this["on"+(this.animType||t)](),e&&this.anim.on("finished",this.finishedAnim.bind(this,e),this)},e.prototype.finishedAnim=function(t){this.scheduleOnce(function(){t&&t()},.05),this.isPlaying=!1,this.anim.off("finished")},e.prototype.onAngry=function(){this.anim.play("angry").wrapMode=cc.WrapMode.PingPong},e.prototype.onDrag=function(){this.anim.play("drag")},e.prototype.onPlay=function(){this.anim.play("play")},e.prototype.onHunger=function(){this.anim.play("hunger").wrapMode=cc.WrapMode.PingPong},e.prototype.onNormal=function(){var t=this;if(this.setMoveActive(!0),this.main&&this.main.content.setActive(!0),this.visitMain&&this.visitMain.content.setActive(!0),this.checkStatus()){this.anim.play("normal").wrapMode=cc.WrapMode.PingPong;var e=2+~~(8*Math.random());this.scheduleOnce(function(){t.action("Blink",function(){t.action("Normal")})},e)}},e.prototype.onBefed=function(){this.anim.play("befed")},e.prototype.onBlink=function(){this.anim.play("blink").wrapMode=cc.WrapMode.Normal},e.prototype.checkStatus=function(t){return void 0===t&&(t=!0),this.isAngry?(t&&this.action("Angry"),!1):!this.isHunger||(t&&this.action("Hunger"),!1)},e.prototype.checkIsUpLevel=function(){return this.Mood>=this.MAXMood&&this.VIT>=this.MAXVIT&&this.age<36&&this.VIT*this.Mood!=0},e.prototype.update=function(t){this.checkStatus(!1)||"Normal"!=this.animType||this.checkStatus(),this.checkIsUpLevel()&&this.upLevel(),this.checkMood(),this.checkVIT()},__decorate([s(cc.Prefab)],e.prototype,"tipsName",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./move":"move","./tipsname":"tipsname"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"0d9a4hZUsBFAa4tAenjL6E2","config"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.getBreed=function(t){return this.breedData[""+this.breedType]},t.getAgeString=function(t){var e="",o=~~(t/12),i=t%12;return o>0&&(e+=o+"\u5c81"),i>0&&(e+=i+"\u4e2a\u6708"),e},t.checkPos=function(t,e){return t.x==e.x&&t.y==e.y},t.getRandElem=function(t){return t[~~(t.length*Math.random())]},t.getLocalStorage=function(t){return window.localStorage.getItem(t)},t.setLocalStorage=function(t,e){window.localStorage.setItem(t,e.toString())},t.REQUIRE_URL="",t.GOODSTYPE={FOOD:"food",TOY:"toy"},t.VisitData=null,t.GlobalData=null,t.breedType=["BOM"],t.breedData={BOM:{id:0,name:"\u5e03\u5076\u732b",pic:"cat0"}},t.userLevelData=[{name:"\u65b0\u664b\u94f2\u5c4e\u5b98",color:[114,114,114],bgColor:[216,216,216]},{name:"\u7231\u732b\u8fbe\u4eba",color:[255,255,255],bgColor:[0,211,163]},{name:"\u8d44\u6df1\u732b\u5974",color:[255,255,255],bgColor:[29,154,255]},{name:"\u9aa8\u7070\u7ea7\u732b\u5974",color:[255,255,255],bgColor:[255,170,0]}],t}();o.default=i,cc._RF.pop()},{}],drag:[function(t,e,o){"use strict";cc._RF.push(e,"8d511lZaIxEw7FMeoqDdHHa","drag"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMove=!1,e.canvasWidth=0,e.canvasHeight=0,e.active=!0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.canvasWidth=cc.view.getVisibleSize().width,this.canvasHeight=cc.view.getVisibleSize().height,this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.active&&(t.isMove=!0)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.active&&e.target.name==t.node.name&&t.isMove&&(t.node.x+=1.5*e.getDeltaX(),t.node.y+=1.5*e.getDeltaY())},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.active&&(t.isMove=!1)},this)},e.prototype.start=function(){},e.prototype.moveTo=function(t,e){if(this.node.position.x==t.x&&this.node.position.y==t.y)return e&&e(),!1;this.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,0)),cc.callFunc(function(){e&&e()})))},e.prototype.setActive=function(t){this.active=t},e.prototype.update=function(t){this.node.x<=-(this.node.width-this.canvasWidth)/2&&(this.node.x=-(this.node.width-this.canvasWidth)/2),this.node.x>=(this.node.width-this.canvasWidth)/2&&(this.node.x=(this.node.width-this.canvasWidth)/2),this.node.y<=-(this.node.height-this.canvasHeight)/2+350&&(this.node.y=-(this.node.height-this.canvasHeight)/2+350),this.node.y>=(this.node.height-this.canvasHeight)/2&&(this.node.y=(this.node.height-this.canvasHeight)/2)},e=__decorate([n],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],editBox:[function(t,e,o){"use strict";cc._RF.push(e,"53b81wuld1ADKKaJoO7oqWq","editBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./main"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg=null,e.editBox=null,e.btn=null,e.main=null,e.catTemp=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.btn.on(cc.Node.EventType.TOUCH_END,function(){t.catTemp&&(t.main.changeCatName(t.editBox.string,t.catTemp),t.editBox.string="")})},e.prototype.start=function(){},e.prototype.init=function(t){this.catTemp=t,this.setMsg()},e.prototype.setMsg=function(){if(this.catTemp){var t=["\u9996\u6b21\u514d\u8d39","\u6d88\u8017200\u91d1\u5e01"];this.catTemp.isFirstName?this.msg.string=t[0]:this.msg.string=t[1]}},__decorate([a(cc.Label)],e.prototype,"msg",void 0),__decorate([a(cc.EditBox)],e.prototype,"editBox",void 0),__decorate([a(cc.Node)],e.prototype,"btn",void 0),__decorate([a(i.default)],e.prototype,"main",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./main":"main"}],fadebox:[function(t,e,o){"use strict";cc._RF.push(e,"bdeecwqZA9Kl59Zo/l/R+/B","fadebox"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeBtn=null,e.scale=.2,e.speed=.2,e.type=0,e.isTouch=!1,e}return __extends(e,t),e.prototype.onLoad=function(){0==this.type&&this.node.setScale(this.scale),1==this.type&&this.node.setPosition(cc.v2(this.node.getPosition().x,this.node.getPosition().y-this.node.height/2)),this.closeBtn&&this.closeBtn.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},e.prototype.start=function(){},e.prototype.onFadeInUp=function(t){this.node.parent.active=!0,this.node.active=!0,this.node.setScale(1),this.node.opacity=0,this.node.runAction(cc.sequence(cc.spawn(cc.fadeIn(this.speed),cc.moveBy(this.speed,cc.v2(0,this.node.height/2))),cc.callFunc(function(){t&&t()})))},e.prototype.onFadeOutDown=function(t){var e=this;this.node.setScale(1),this.node.parent.active=!0,this.node.active=!0;this.node.position;this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(this.speed-.1),cc.moveBy(this.speed,cc.v2(0,-this.node.height/2))),cc.callFunc(function(){e.node.active&&(e.node.active=!1),e.node.parent.active&&(e.node.parent.active=!1),t&&t()})))},e.prototype.onFadeIn=function(t){this.node.parent.active=!0,this.node.active=!0,this.node.runAction(cc.sequence(cc.spawn(cc.fadeIn(this.speed),cc.scaleTo(this.speed,1)),cc.callFunc(function(){t&&t()})))},e.prototype.onFadeOut=function(t){var e=this;this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(this.speed),cc.scaleTo(this.speed,this.scale)),cc.callFunc(function(){e.node.active&&(e.node.active=!1),e.node.parent.active&&(e.node.parent.active=!1),t&&t()})))},e.prototype.onTouchStart=function(t){var e=this;this.isTouch||(this.isTouch=!0,0==this.type&&this.onFadeOut(function(){e.isTouch=!1}),1==this.type&&this.onFadeOutDown(function(){e.isTouch=!1}))},__decorate([c(cc.Node)],e.prototype,"closeBtn",void 0),__decorate([c(Number)],e.prototype,"scale",void 0),__decorate([c(Number)],e.prototype,"speed",void 0),__decorate([c(Number)],e.prototype,"type",void 0),e=__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],friendBox:[function(t,e,o){"use strict";cc._RF.push(e,"ec30e8bw+VEMpz8uqx6B5+5","friendBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./friendItem"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.data=[],e.visitorFunc=null,e.showUserInfo=null,e.invitationFunc=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.clearList=function(){this.content.children.forEach(function(t){t.destroy()})},e.prototype.createList=function(){var t=this;this.data.forEach(function(e){t.createItem({uid:e.user_id,nickname:e.nickname,sex:e.sex,type:e.type,pic:e.head_pic})})},e.prototype.createItem=function(t){var e=cc.instantiate(this.item).getComponent(i.default);return e.init(t),e.visitorFunc=this.visitorFunc,e.showUserInfo=this.showUserInfo,e.invitationFunc=this.invitationFunc,e.node.setParent(this.content),e},__decorate([a(cc.Node)],e.prototype,"content",void 0),__decorate([a(cc.Prefab)],e.prototype,"item",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./friendItem":"friendItem"}],friendItem:[function(t,e,o){"use strict";cc._RF.push(e,"29195byEAFPMaf6ibfF0ys5","friendItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nickname=null,e.sex=null,e.btn=null,e.pic=null,e.btnArr=[],e.sexArr=[],e.uid="",e.funcType=0,e.invitationFunc=null,e.visitorFunc=null,e.showUserInfo=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.btn.node.on(cc.Node.EventType.TOUCH_END,function(){t.uid&&(1==t.funcType&&t.invitationFunc&&t.invitationFunc(t.uid),2==t.funcType&&t.visitorFunc&&t.visitorFunc(t.uid))}),this.pic.node.on(cc.Node.EventType.TOUCH_END,function(){t.showUserInfo&&t.uid&&t.showUserInfo(t.uid)})},e.prototype.start=function(){},e.prototype.init=function(t){this.uid=t.uid,this.setNickname(t.nickname),this.setSex(t.sex),this.setBtn(t.type),this.funcType=t.type,this.setBtn(this.funcType),t.pic&&this.setPic(t.pic)},e.prototype.setNickname=function(t){this.nickname.string=t},e.prototype.setPic=function(t){var e=this;cc.loader.loadRes(t,cc.SpriteFrame,function(t,o){t||(e.pic.spriteFrame=o)})},e.prototype.setSex=function(t){1==t&&(this.sex.spriteFrame=this.sexArr[0]),2==t&&(this.sex.spriteFrame=this.sexArr[1])},e.prototype.setBtn=function(t){1==t&&(this.btn.spriteFrame=this.btnArr[0]),2==t&&(this.btn.spriteFrame=this.btnArr[1])},__decorate([c(cc.Label)],e.prototype,"nickname",void 0),__decorate([c(cc.Sprite)],e.prototype,"sex",void 0),__decorate([c(cc.Sprite)],e.prototype,"btn",void 0),__decorate([c(cc.Sprite)],e.prototype,"pic",void 0),__decorate([c([cc.SpriteFrame])],e.prototype,"btnArr",void 0),__decorate([c([cc.SpriteFrame])],e.prototype,"sexArr",void 0),e=__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],garbage:[function(t,e,o){"use strict";cc._RF.push(e,"928b7OU6yRArpc2HE+91piL","garbage"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e.isTouch=!1,e.main=null,e.visitMain=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.start=function(){},e.prototype.onTouch=function(){var t=this;this.isTouch||(this.isTouch=!0,(this.main||this.visitMain).clearGarbage(this,function(){var e=t.node.getComponent(cc.Animation).play();0==t.type&&(t.node.setPosition(t.node.getPosition().x-50,t.node.getPosition().y+200),e.repeatCount=3,e.speed=.5),1==t.type&&(t.node.setPosition(t.node.getPosition().x,t.node.getPosition().y-38),e.repeatCount=1),t.onPlay(function(){t.isTouch=!1,t.onDestroy()})}))},e.prototype.onPlay=function(t){var e=this.getComponent(cc.Animation);e&&(this.type,this.type,e.on("finished",function(){t&&t(),e.off("finished")},this))},e.prototype.onDestroy=function(){this.node.destroy()},__decorate([c(Number)],e.prototype,"type",void 0),e=__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],goodsData:[function(t,e,o){"use strict";cc._RF.push(e,"e2d1bFMyqRGBKkRBPc4Lgyh","goodsData"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./goodsItem"),n=t("./config"),c=cc._decorator,a=c.ccclass,s=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.noneTxt=null,e.shopBtn=null,e.closeBtn=null,e.goodsList=null,e.goodsPreb=null,e.foodData=[],e.toyData=[],e.type="",e.main=null,e.visitMain=null,e.isShow=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.active=!1,this.node.active=!1,this.closeBtn.on(cc.Node.EventType.TOUCH_START,function(){t.hide()},this),this.node.getChildByName("tab_a_0").on(cc.Node.EventType.TOUCH_END,function(e){t.setList(n.default.GOODSTYPE.TOY)},this),this.node.getChildByName("tab_b_0").on(cc.Node.EventType.TOUCH_END,function(e){t.setList(n.default.GOODSTYPE.FOOD)},this)},e.prototype.start=function(){},e.prototype.showNone=function(){this.shopBtn.active=!0,this.noneTxt.node.active=!0},e.prototype.hideNone=function(){this.shopBtn.active=!1,this.noneTxt.node.active=!1},e.prototype.remove=function(){this.goodsList.children.forEach(function(t){"goodsItem"==t.name&&t.destroy()})},e.prototype.checkType=function(){switch(this.type){case n.default.GOODSTYPE.FOOD:this.node.getChildByName("tab_a_1").active=!1,this.node.getChildByName("tab_b_1").active=!0;break;case n.default.GOODSTYPE.TOY:this.node.getChildByName("tab_a_1").active=!0,this.node.getChildByName("tab_b_1").active=!1}},e.prototype.setList=function(t){var e=this;void 0===t&&(t=n.default.GOODSTYPE.FOOD),this.type!=t&&(this.type=t,this.checkType(),this.remove(),this.hideNone(),0!=this[t+"Data"].length?this[t+"Data"].forEach(function(t){if(0!=t.num){var o=cc.instantiate(e.goodsPreb).getComponent(i.default);o.setId(t.id),o.setName(t.name),o.setNum(t.num),o.setPic(t.pic),o.setType(e.type),o.setBuff(t.buff),e.main?o.main=e.main:o.visitMain=e.visitMain,o.node.setParent(e.goodsList)}}):this.showNone())},e.prototype.getChildrenNum=function(){var t=0;return this.goodsList.children.forEach(function(e){"goodsItem"==e.name&&t++}),t},e.prototype.show=function(t){this.isShow||this.node.active||(this.node.active=!0,this.isShow=!0,this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(.25,cc.v2(0,this.node.height)),cc.fadeIn(.25)),cc.callFunc(function(){t&&t()}))))},e.prototype.hide=function(t){var e=this;this.isShow&&(this.isShow=!1,this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(.25,cc.v2(0,-this.node.height)),cc.fadeOut(.25)),cc.callFunc(function(){t&&t(),e.node.active=!1}))))},e.prototype.update=function(t){0!=this.getChildrenNum()||this.shopBtn.active||this.showNone()},__decorate([s(cc.Label)],e.prototype,"noneTxt",void 0),__decorate([s(cc.Node)],e.prototype,"shopBtn",void 0),__decorate([s(cc.Node)],e.prototype,"closeBtn",void 0),__decorate([s(cc.Node)],e.prototype,"goodsList",void 0),__decorate([s(cc.Prefab)],e.prototype,"goodsPreb",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./config":"config","./goodsItem":"goodsItem"}],goodsItem:[function(t,e,o){"use strict";cc._RF.push(e,"861db9/2O1CMpTs7RBgyA9Q","goodsItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goodsNumLabel=null,e.goodsNameLabel=null,e.goodsPicSprite=null,e.goodsId="",e.goodsNum=0,e.goodsName="",e.goodsPic="",e.goodsType="food",e.goodsBuff=0,e.isTouch=!1,e.main=null,e.visitMain=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.isTouch||(t.isTouch=!0)}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){if(t.isTouch=!1,t.main){if(t.goodsNum<=0)return;t.goodsType==i.default.GOODSTYPE.FOOD&&t.main.onBefed(e,t),t.goodsType==i.default.GOODSTYPE.TOY&&t.main.onPlay(e,t)}if(t.visitMain){if(t.goodsNum<=0)return;t.goodsType==i.default.GOODSTYPE.FOOD&&t.visitMain.onBefed(e,t),t.goodsType==i.default.GOODSTYPE.TOY&&t.visitMain.onPlay(e,t)}},this)},e.prototype.start=function(){},e.prototype.setBuff=function(t){this.goodsBuff=t},e.prototype.setType=function(t){this.goodsType=t},e.prototype.setId=function(t){this.goodsId=t},e.prototype.setPic=function(t){var e=this;this.goodsPic=t,cc.loader.loadRes(t,cc.SpriteFrame,function(t,o){t||(e.goodsPicSprite.spriteFrame=o)})},e.prototype.setName=function(t){this.goodsNameLabel.string=this.goodsName=""+t},e.prototype.setNum=function(t){this.goodsNum=t,this.goodsNumLabel.string=""+(this.goodsNum>99?"99+":this.goodsNum),this.getGoods()},e.prototype.getGoods=function(){var t=this;this.main&&this.main.goodsBox[this.goodsType+"Data"].forEach(function(e){e.id==t.goodsId&&(e.num=t.goodsNum)}),this.visitMain&&this.visitMain.goodsBox[this.goodsType+"Data"].forEach(function(e){e.id==t.goodsId&&(e.num=t.goodsNum)})},e.prototype.update=function(t){0==this.goodsNum&&this.node.destroy()},__decorate([a(cc.Label)],e.prototype,"goodsNumLabel",void 0),__decorate([a(cc.Label)],e.prototype,"goodsNameLabel",void 0),__decorate([a(cc.Sprite)],e.prototype,"goodsPicSprite",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],goods:[function(t,e,o){"use strict";cc._RF.push(e,"0d0edR7tCZHzYZ0VfkzL3mE","goods"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,c=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="",e}return __extends(e,t),e.prototype.onLoad=function(){this.node.active=!1,this.node.setScale(1)},e.prototype.start=function(){},e.prototype.init=function(t,e,o){this.node.setScale(1),this.setSpriteFrame(t),this.node.setPosition(e),this.type=o},e.prototype.setSpriteFrame=function(t){var e=this;this.node.opacity=0;var o=this.node.getComponents(cc.Sprite)[0];cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){o.spriteFrame=i,e.node.opacity=255})},e.prototype.show=function(t,e,o){this.node.active=!0;var n=300*Math.random()-150,c=36;this.type==i.default.GOODSTYPE.TOY&&(c=136),this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(.5,[this.node.getPosition(),cc.v2(this.node.getPosition().x+n,this.node.getPosition().y+n),cc.v2(t.x,t.y-c)]),cc.scaleTo(.5,.5)),cc.spawn(cc.fadeOut(.5),cc.callFunc(function(){e&&e()})),cc.callFunc(function(){o&&o()})))},e=__decorate([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./config":"config"}],headInfo:[function(t,e,o){"use strict";cc._RF.push(e,"5b6ccdOIl9ObJKEtcCpDXTd","headInfo"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./main"),c=cc._decorator,a=c.ccclass,s=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.main=null,e.nickname=null,e.level=null,e.pic=null,e.duration=null,e.agreeNum=null,e.catNum=null,e.isNickLimit=!0,e.btn=null,e.btnArr=[],e.uid="",e.btnType=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.btn&&this.btn.on(cc.Node.EventType.TOUCH_END,function(){""!=t.uid&&t.main.getComponent(n.default).changeRelation(t)})},e.prototype.start=function(){},e.prototype.init=function(t){this.uid=t.uid,this.setName(t.name),this.setLevel(t.level),t.duration&&this.setDuration(t.duration),t.agreeNum&&this.setCatNum(t.catNum),t.agreeNum&&this.setAgreeNum(t.agreeNum),t.pic&&this.setPic(t.pic),t.btnType&&(this.btnType=t.btnType),this.setBtnPic()},e.prototype.setBtnPic=function(){this.btn&&(this.btn.getComponent(cc.Sprite).spriteFrame=this.btnArr[this.btnType])},e.prototype.setName=function(t){if(this.nickname){var e=t;t.length>6&&this.isNickLimit&&(e=t.split("").splice(0,6).join("")+"..."),this.nickname.string=e}},e.prototype.setLevel=function(t){var e=this;this.level&&(this.level.getChildByName("label").getComponent(cc.Label).string=t,i.default.userLevelData.forEach(function(o){var i,n;if(o.name==t)return e.level.getChildByName("label").color=new((i=cc.Color).bind.apply(i,[void 0].concat(o.color))),void(e.level.color=new((n=cc.Color).bind.apply(n,[void 0].concat(o.bgColor))))}))},e.prototype.setPic=function(t){this.pic&&cc.loader.load(t,function(t,e){t||(this.pic.spriteFrame=new cc.SpriteFrame(e))})},e.prototype.setDuration=function(t){this.duration&&(this.duration.string=t+"h")},e.prototype.setAgreeNum=function(t){this.agreeNum&&(this.agreeNum.string=t+"\u6b21")},e.prototype.setCatNum=function(t){this.catNum&&(this.catNum.string=t+"\u53ea")},__decorate([s(cc.Node)],e.prototype,"main",void 0),__decorate([s(cc.Label)],e.prototype,"nickname",void 0),__decorate([s(cc.Node)],e.prototype,"level",void 0),__decorate([s(cc.Sprite)],e.prototype,"pic",void 0),__decorate([s(cc.Label)],e.prototype,"duration",void 0),__decorate([s(cc.Label)],e.prototype,"agreeNum",void 0),__decorate([s(cc.Label)],e.prototype,"catNum",void 0),__decorate([s(Boolean)],e.prototype,"isNickLimit",void 0),__decorate([s(cc.Node)],e.prototype,"btn",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"btnArr",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./config":"config","./main":"main"}],main:[function(t,e,o){"use strict";cc._RF.push(e,"9a8e3PGq1JKrpDW6Ij9QBV2","main"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./cat"),c=t("./garbage"),a=t("./goods"),s=t("./fadebox"),r=t("./drag"),d=t("./goodsData"),p=t("./buff"),u=t("./statusBox"),h=t("./uplevelBox"),l=t("./headInfo"),f=t("./visitorBox"),v=t("./friendBox"),g=t("./editBox"),y=t("./catHomeBox"),m=t("./albumBox"),_=t("./novice"),x=cc._decorator,b=x.ccclass,T=x.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goodsBox=null,e.content=null,e.catStage=null,e.catPrefab=[],e.goodsPrefab=null,e.garbagePrefab=[],e.buffPrefab=null,e.mask=null,e.catStausBox=null,e.uplevelBox=null,e.headInfo=null,e.headInfoBox=null,e.headInfoBox2=null,e.visitorBox=null,e.redSign=null,e.load=null,e.friendBox=null,e.catHomeBox=null,e.editNameBox=null,e.albumBox=null,e.garbageArr=[],e.catArr=[],e.catData=[],e.goodsPool=null,e.catActiveIndex=0,e}return __extends(e,t),e.prototype.onLoad=function(){if(this.catData=[{cid:"001",name:"\u963f\u5409",breed:0,age:1,sex:1,VIT:51,MAXVIT:500,Mood:46,MAXMood:450,isFirstName:!0,isHunger:!1,isAngry:!1,isActive:!0},{cid:"002",name:"\u828b\u5934",breed:0,age:5,sex:1,VIT:151,MAXVIT:500,Mood:146,MAXMood:450,isFirstName:!0,isHunger:!0,isAngry:!1,isActive:!1},{cid:"003",name:"\u4e91\u72d0",breed:0,age:25,sex:1,VIT:151,MAXVIT:500,Mood:146,MAXMood:450,isFirstName:!1,isHunger:!1,isAngry:!0,isActive:!1}],i.default.GlobalData={user_id:"001",nickName:"\u5229\u59c6\u9c81",level:"\u7231\u732b\u8fbe\u4eba",head_pic:"",duration:18,agree_num:23,cat_num:3,hasGarbage:[0,1],isRookie:!1},this.initUserInfo(),i.default.GlobalData.isRookie){var t=this.node.getChildByName("novice").getComponent(_.default);t.node.active=!0,t.main=this,t.init()}else this.render()},e.prototype.render=function(){var t=this;i.default.GlobalData.hasGarbage.includes(0)&&this.createGarbage(0),i.default.GlobalData.hasGarbage.includes(1)&&this.createGarbage(1),this.onCloud("open",function(){t.createCat()}),this.createGoodsPool(),this.addGoodsData()},e.prototype.start=function(){},e.prototype.onCloud=function(t,e){var o=this;void 0===t&&(t="open");var i=this.node.getChildByName("cloud").getComponent(cc.Animation);i.node.active=!0,this.node.getChildByName("cloud_pic").active=!1;var n=i.play("cloud");n.speed=.3,"open"==t&&(n.wrapMode=cc.WrapMode.Reverse),"close"==t&&(n.wrapMode=cc.WrapMode.Normal),n.repeatCount=1,i.on("finished",function(){"close"==t&&(o.node.getChildByName("cloud_pic").active=!0),i.off("finished"),i.node.active=!1,e&&e()},this)},e.prototype.onBack=function(){cc.log("\u8fd4\u56de")},e.prototype.onShop=function(){cc.log("\u55b5\u8d27\u94fa")},e.prototype.onVisit=function(t){var e=this;"string"==typeof t?cc.log("\u62dc\u8bbf"+t):cc.log("\u4e32\u95e8"),this.showLoad(!1),i.default.VisitData={user_id:"001",nickName:"\u9759",level:"\u9aa8\u7070\u7ea7\u732b\u5974",head_pic:"",duration:99,agree_num:83,cat_num:13,hasGarbage:[0,1],isEncourage:!1},this.onCloud("close",function(){e.removeCat(),e.hideLoad(),cc.director.loadScene("visit_main")})},e.prototype.onInvitation=function(t){cc.log("\u9080\u8bf7"+t)},e.prototype.getUserInfo=function(t,e){var o=this;this.showLoad(),cc.loader.loadRes("data",function(t,i){e&&e(i.json.visitorInfo),o.hideLoad()})},e.prototype.changeCatName=function(t,e){if(""!=t){cc.log("cid:"+e.cid+","+e.name+"\u6539\u540d\u6210"+t);var o=this.getSelectCat(e.cid),i=this.catData[o];i.name=t,i.isFirstName=!1,i.isActive&&this.catArr[0].render(i),this.editNameBox.onFadeOut()}},e.prototype.openAlbumBox=function(){var t=this;this.goodsBox.node.active&&this.goodsBox.hide(),this.getPhotoData(function(){t.albumBox.onFadeIn()})},e.prototype.getPhotoData=function(t){var e=this;this.showLoad(),cc.loader.loadRes("data",function(o,i){e.albumBox.getComponent(m.default).photoData=i.json.photoData,e.albumBox.getComponent(m.default).init(function(){t&&t(),e.hideLoad()})})},e.prototype.openEditCatName=function(t){var e=this;this.editNameBox.getComponent(g.default).init(t),this.catHomeBox.node.active?this.catHomeBox.onFadeOutDown(function(){e.editNameBox.onFadeIn()}):this.editNameBox.onFadeIn()},e.prototype.openCatHomeBox=function(){this.catHomeBox.getComponent(y.default).init().createList(),this.goodsBox.node.active&&this.goodsBox.hide(),this.catHomeBox.onFadeInUp()},e.prototype.openVisitorBox=function(t){var e=this;this.redSign.active&&(this.redSign.active=!1),this.goodsBox.node.active&&this.goodsBox.hide(),this.getVisitorList(function(){e.visitorBox.onFadeIn()})},e.prototype.openFriendBox=function(t){var e=this;this.goodsBox.node.active&&this.goodsBox.hide(),this.getFriendList(function(){e.friendBox.onFadeIn()})},e.prototype.getFriendList=function(t){var e=this;this.showLoad(),cc.loader.loadRes("data",function(o,i){if(e.hideLoad(),!o){var n=e.friendBox.node.getComponent(v.default);n.data=i.json.friendData,n.visitorFunc=e.onVisit.bind(e),n.showUserInfo=e.openHeadInfoOtherBox.bind(e),n.invitationFunc=e.onInvitation.bind(e),n.clearList(),n.createList(),t&&t()}})},e.prototype.getVisitorList=function(t){var e=this;this.showLoad(),cc.loader.loadRes("data",function(o,i){if(e.hideLoad(),!o){var n=e.visitorBox.node.getComponent(f.default);n.data=i.json.visitorData,n.visitorFunc=e.onVisit.bind(e),n.showUserInfo=e.openHeadInfoOtherBox.bind(e),n.clearList(),n.createList(),t&&t()}})},e.prototype.showLoad=function(t){void 0===t&&(t=!0),this.load.children.map(function(e){e.active=t}),this.load.active||(this.load.active=!0)},e.prototype.hideLoad=function(){this.load.active&&(this.load.active=!1)},e.prototype.openHeadInfoMyBox=function(){this.goodsBox.node.active&&this.goodsBox.hide(),this.headInfoBox.onFadeIn()},e.prototype.clearVisitorHistory=function(){this.visitorBox.node.getComponent(f.default).clearList()},e.prototype.openHeadInfoOtherBox=function(t){var e=this;this.getUserInfo(t,function(t){e.headInfoBox2&&e.headInfoBox2.node.getComponent(l.default).init({uid:t.user_id,name:t.nickName,level:t.level,duration:t.duration,agreeNum:t.agree_num,catNum:t.cat_num,pic:t.head_pic,btnType:t.type}),e.goodsBox.node.active&&e.goodsBox.hide(),e.visitorBox.node.active?e.visitorBox.onFadeOut(function(){e.headInfoBox2.onFadeIn()}):e.friendBox.node.active?e.friendBox.onFadeOut(function(){e.headInfoBox2.onFadeIn()}):e.headInfoBox2.onFadeIn()})},e.prototype.onLetOut=function(t){var e=this;cc.log("\u653e\u51fa"),this.removeCat(),this.catActiveIndex=this.getActiveCat(t),this.catHomeBox.node.active&&this.catHomeBox.onFadeOutDown(function(){e.createCat()})},e.prototype.changeRelation=function(t){cc.log(t.uid),t.btnType=0,t.setBtnPic()},e.prototype.initUserInfo=function(){this.headInfoBox&&this.headInfoBox.node.getComponent(l.default).init({uid:i.default.GlobalData.user_id,name:i.default.GlobalData.nickName,level:i.default.GlobalData.level,duration:i.default.GlobalData.duration,agreeNum:i.default.GlobalData.agree_num,catNum:i.default.GlobalData.cat_num,pic:i.default.GlobalData.head_pic}),this.headInfo&&this.headInfo.getComponent(l.default).init({uid:i.default.GlobalData.user_id,name:i.default.GlobalData.nickName,level:i.default.GlobalData.level,pic:i.default.GlobalData.head_pic})},e.prototype.showUpLevel=function(){var t=this,e=this.uplevelBox.node.getComponent(h.default);e.setAge(this.catArr[0].age-1,this.catArr[0].age),e.setVIT(this.catArr[0].MAXVIT-10,this.catArr[0].MAXVIT),e.setMood(this.catArr[0].MAXMood-5,this.catArr[0].MAXMood),this.catStausBox.node.active?this.catStausBox.onFadeOut(function(){return t.openUpLevel()}):this.openUpLevel()},e.prototype.openUpLevel=function(){this.mask.active=!0,this.uplevelBox.node.active=!0,this.uplevelBox.onFadeIn()},e.prototype.createBuff=function(t,e,o){var i=cc.instantiate(this.buffPrefab).getComponent(p.default);return i.type=e,i.num=o,i.init().show(t),i.node.setParent(this.catStage),i},e.prototype.createGoodsPool=function(){this.goodsPool=new cc.NodePool;for(var t=0;t<3;++t){var e=cc.instantiate(this.goodsPrefab);this.goodsPool.put(e)}},e.prototype.addGoodsData=function(){var t=this;this.goodsBox.main=this,cc.loader.loadRes("data",function(e,o){e||(t.goodsBox.foodData=o.json.foodData,t.goodsBox.toyData=o.json.toyData)})},e.prototype.onBefed=function(t,e,o){var n=this;if(!(this.catArr.length<=0)){var c=this.createGoods({pos:this.node.convertToNodeSpaceAR(t.getLocation()),src:e.goodsPic,type:e.goodsType});e.setNum(--e.goodsNum),this.catArr[0].setMoveActive(!1),this.content.setActive(!1),this.catArr[0].VIT+=e.goodsBuff,this.catArr[0].isHunger=!1,c.show(this.node.convertToNodeSpaceAR(this.catStage.convertToWorldSpaceAR(this.catArr[0].node.position)),function(){n.createBuff(n.catArr[0].node.getPosition(),i.default.GOODSTYPE.FOOD,e.goodsBuff),n.catArr[0].action("Befed",function(){n.catArr[0].setMoveActive(!0),n.content.setActive(!0),n.catArr[0].action("Normal")})},this.retrieveGoodsPol.bind(this,c.node)),o&&o()}},e.prototype.onPlay=function(t,e,o){var n=this;if(!(this.catArr.length<=0)){var c=this.createGoods({pos:this.node.convertToNodeSpaceAR(t.getLocation()),src:e.goodsPic,type:e.goodsType});e.setNum(--e.goodsNum),this.catArr[0].setMoveActive(!1),this.content.setActive(!1),this.catArr[0].Mood+=e.goodsBuff,this.catArr[0].isAngry=!1,c.show(this.node.convertToNodeSpaceAR(this.catStage.convertToWorldSpaceAR(this.catArr[0].node.position)),function(){n.createBuff(n.catArr[0].node.getPosition(),i.default.GOODSTYPE.TOY,e.goodsBuff),n.catArr[0].action("Play",function(){n.catArr[0].setMoveActive(!0),n.content.setActive(!0),n.catArr[0].action("Normal")})},this.retrieveGoodsPol.bind(this,c.node)),o&&o()}},e.prototype.retrieveGoodsPol=function(t){this.goodsPool.put(t)},e.prototype.onTap=function(t,e){var o=this;if(!(this.catArr.length<=0)){if("Befed"==e){if(this.goodsBox.node.active)return;return this.catStausBox.onFadeOut(),this.goodsBox.setList(i.default.GOODSTYPE.FOOD),void this.goodsBox.show()}if("Play"==e){if(this.goodsBox.node.active)return;return this.catStausBox.onFadeOut(),this.goodsBox.setList(i.default.GOODSTYPE.TOY),void this.goodsBox.show()}this.catArr[0].action(e,function(){o.catArr[0].action("Normal")})}},e.prototype.createGoods=function(t){var e=null;return(e=this.goodsPool.size()>0?this.goodsPool.get().getComponents(a.default)[0]:cc.instantiate(this.goodsPrefab).getComponents(a.default)[0]).init(t.src,t.pos,t.type),e.node.setParent(this.node),e},e.prototype.createCat=function(){var t=this;this.catArr.length>0||this.content.moveTo(cc.v2(0,0),function(){var e=cc.instantiate(t.catPrefab[t.catData[t.catActiveIndex].breed]).getComponent(n.default);e.node.setParent(t.catStage),e.main=t,e.init(t.catData[t.catActiveIndex],cc.v2(0,180)),t.catArr.push(e)})},e.prototype.getActiveCat=function(t){var e=0;return this.catData.map(function(o,i){o.cid==t?(e=i,o.isActive=!0):o.isActive=!1}),e},e.prototype.getSelectCat=function(t){for(var e=0;e<this.catData.length;e++){if(this.catData[e].cid==t)return e}return-1},e.prototype.showCatStatusInfo=function(){this.goodsBox.node.active&&this.goodsBox.hide(),this.catStausBox.node.getComponent(u.default).setCat(this.catArr[0]).changeStatus(),this.catStausBox.node.active=!0,this.catStausBox.node.parent.active=!0,this.catStausBox.onFadeIn()},e.prototype.removeCat=function(t){void 0===t&&(t=0),this.catArr.length<=0||("number"!=typeof t&&(t=0),this.catArr[t].node.destroy(),this.catArr.splice(t,1))},e.prototype.createGarbage=function(t){if(0!=this.garbagePrefab.length){for(var e=0;e<this.garbageArr.length;e++)if(this.garbageArr[e].type==t)return!1;var o=cc.instantiate(this.garbagePrefab[t]).getComponent(c.default);o.type=t,o.main=this,o.node.setParent(this.catStage),o.node.setPosition(cc.v2(.2*this.catStage.width-Math.random()*(.4*this.catStage.width),0==t?280:-120)),this.garbageArr.push(o)}},e.prototype.clearGarbage=function(t,e){cc.log("\u89e6\u53d1\u6e05\u7406\u4e8b\u4ef6"+t.type),e()},__decorate([T(d.default)],e.prototype,"goodsBox",void 0),__decorate([T(r.default)],e.prototype,"content",void 0),__decorate([T(cc.Node)],e.prototype,"catStage",void 0),__decorate([T([cc.Prefab])],e.prototype,"catPrefab",void 0),__decorate([T(cc.Prefab)],e.prototype,"goodsPrefab",void 0),__decorate([T([cc.Prefab])],e.prototype,"garbagePrefab",void 0),__decorate([T(cc.Prefab)],e.prototype,"buffPrefab",void 0),__decorate([T(cc.Node)],e.prototype,"mask",void 0),__decorate([T(s.default)],e.prototype,"catStausBox",void 0),__decorate([T(s.default)],e.prototype,"uplevelBox",void 0),__decorate([T(cc.Node)],e.prototype,"headInfo",void 0),__decorate([T(s.default)],e.prototype,"headInfoBox",void 0),__decorate([T(s.default)],e.prototype,"headInfoBox2",void 0),__decorate([T(s.default)],e.prototype,"visitorBox",void 0),__decorate([T(cc.Node)],e.prototype,"redSign",void 0),__decorate([T(cc.Node)],e.prototype,"load",void 0),__decorate([T(s.default)],e.prototype,"friendBox",void 0),__decorate([T(s.default)],e.prototype,"catHomeBox",void 0),__decorate([T(s.default)],e.prototype,"editNameBox",void 0),__decorate([T(s.default)],e.prototype,"albumBox",void 0),e=__decorate([b],e)}(cc.Component);o.default=B,cc._RF.pop()},{"./albumBox":"albumBox","./buff":"buff","./cat":"cat","./catHomeBox":"catHomeBox","./config":"config","./drag":"drag","./editBox":"editBox","./fadebox":"fadebox","./friendBox":"friendBox","./garbage":"garbage","./goods":"goods","./goodsData":"goodsData","./headInfo":"headInfo","./novice":"novice","./statusBox":"statusBox","./uplevelBox":"uplevelBox","./visitorBox":"visitorBox"}],move:[function(t,e,o){"use strict";cc._RF.push(e,"1ac1cGGbT1LRavmc4BrnxE9","move"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./cat"),n=cc._decorator,c=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMove=!1,e.isTouch=!1,e.pos=cc.v2(0,0),e.scale=1,e.bg=null,e.cat=null,e.active=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.scale=this.checkScale(),this.node.setScale(this.scale),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this);try{this.cat=this.getComponent(i.default)}catch(t){}this.bg=this.node.getParent().getParent()},e.prototype.start=function(){},e.prototype.onTouchStart=function(t){this.active&&(this.isTouch=!0)},e.prototype.onTouchMove=function(t){this.active&&(this.isMove=0!=t.getDeltaX()||0!=t.getDeltaY(),this.isTouch&&this.checkLimits(t.getLocation())&&(this.isMove&&"Drag"!=this.cat.animType&&this.cat.action("Drag"),"content"==this.bg.name&&(this.bg.x-=2*t.getDeltaX(),this.bg.y-=2*t.getDeltaY()),this.pos=this.checkPos(t.getLocation()),this.scale=this.checkScale(),this.node.setPosition(this.pos),this.node.setScale(this.scale)))},e.prototype.onTouchEnd=function(t){this.active&&(this.isMove?this.cat.action("Normal"):this.cat&&(this.cat.main&&this.cat.main.showCatStatusInfo(),this.cat.visitMain&&this.cat.visitMain.showCatStatusInfo()),this.isTouch=!1,this.isMove=!1)},e.prototype.checkPos=function(t){var e=this.node.parent.convertToNodeSpaceAR(t);return e.y<-this.node.parent.height/2+this.node.height/2*this.scale&&(e.y=-this.node.parent.height/2+this.node.height/2*this.scale),e.y>this.node.parent.height/2-this.node.height/2*this.scale&&(e.y=this.node.parent.height/2-this.node.height/2*this.scale),e.x<-this.node.parent.width/2+this.node.width/2*this.scale&&(e.x=-this.node.parent.width/2+this.node.width/2*this.scale),e.x>this.node.parent.width/2-this.node.width/2*this.scale&&(e.x=this.node.parent.width/2-this.node.width/2*this.scale),e},e.prototype.checkLimits=function(t){var e=this.node.parent.convertToNodeSpaceAR(t);return!(e.y<-this.node.parent.height/2)&&(!(e.y>this.node.parent.height/2)&&(!(e.x<-this.node.parent.width/2)&&!(e.x>this.node.parent.width/2)))},e.prototype.checkScale=function(){var t=this.pos.y,e=this.node.parent.height;return 1.2+(-e/2-t)/e*.3},e.prototype.update=function(t){this.active&&this.pos&&this.node.setPosition(this.pos)},e=__decorate([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./cat":"cat"}],novice:[function(t,e,o){"use strict";cc._RF.push(e,"cacf7GoSMRAm7llKQ8OK2G6","novice"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skip=null,e.noviceData=[],e.activeIndex=0,e.main=null,e.max=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.max=this.noviceData.length,this.noviceData.map(function(e,o){e.on(cc.Node.EventType.TOUCH_END,function(){t.activeIndex++,t.init()})}),this.skip.on(cc.Node.EventType.TOUCH_END,function(){t.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.noviceData[t.max-1].active=!1,t.node.active=!1,t.main.render()})))})},e.prototype.init=function(){var t=this;i.default.GlobalData.isRookie=!1,this.activeIndex!=this.max?(this.noviceData[0].active=!0,this.noviceData.map(function(e,o){o==t.activeIndex?e.active=!0:e.active=!1})):this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.noviceData[t.max-1].active=!1,t.node.active=!1,t.main.render()})))},e.prototype.start=function(){},__decorate([a(cc.Node)],e.prototype,"skip",void 0),__decorate([a([cc.Node])],e.prototype,"noviceData",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],photoItem:[function(t,e,o){"use strict";cc._RF.push(e,"d0a37KxxctM04tFTdxaOYPy","photoItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.active=!1,e.startPoint=null,e.endPoint=null,e.isDrag=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.active&&(t.isDrag||(t.isDrag=!0,t.startPoint=cc.v2(e.getLocation().x,e.getLocation().y)))}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.isDrag&&(t.isDrag=!1)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.active&&t.isDrag&&t.node.setPosition(t.node.position.x+e.getDeltaX(),t.node.position.y+e.getDeltaY())}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){if(t.active){t.endPoint=cc.v2(e.getLocation().x,e.getLocation().y);var o=t.endPoint.sub(t.startPoint);if(o.mag()<100)t.node.runAction(cc.sequence(cc.moveTo(.1,cc.v2(0,0)),cc.callFunc(function(){t.isDrag=!1})));else{var i=cc.v2(0,0);o.x>=0&&o.y>=0&&(i=cc.v2(500,250)),o.x<=0&&o.y>=0&&(i=cc.v2(-500,250)),o.x>=0&&o.y<=0&&(i=cc.v2(500,-250)),o.x<=0&&o.y<=0&&(i=cc.v2(-500,-250)),t.parent.getMaxZIndex().active=!1,t.node.runAction(cc.sequence(cc.spawn(cc.moveBy(.3,i),cc.scaleTo(.3,.4),cc.rotateBy(.2,5*t.parent.max)),cc.callFunc(function(){t.node.zIndex-=t.parent.max,t.parent.changePhotoRotation()}),cc.spawn(cc.moveTo(.2,cc.v2(0,0)),cc.scaleTo(.2,1)),cc.callFunc(function(){t.isDrag=!1,t.parent.getMaxZIndex().active=!0})))}}})},e.prototype.start=function(){},e.prototype.setSprite=function(t){this.node.getComponent(cc.Sprite).spriteFrame=t},e=__decorate([n],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],statusBox:[function(t,e,o){"use strict";cc._RF.push(e,"81141TS1+ROhqx/00MjnXo2","statusBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.VIT=null,e.Mood=null,e.VITTabar=null,e.MoodTabar=null,e.cat=null,e.timer=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.setCat=function(t){return this.cat=t,this},e.prototype.setVIT=function(t,e){this.VIT.string=t+"/"+e},e.prototype.setMood=function(t,e){this.Mood.string=t+"/"+e},e.prototype.changeStatus=function(){this.cat&&(this.setMood(this.cat.Mood,this.cat.MAXMood),this.setVIT(this.cat.VIT,this.cat.MAXVIT),this.MoodTabar.fillRange=this.cat.Mood/this.cat.MAXMood,this.VITTabar.fillRange=this.cat.VIT/this.cat.MAXVIT)},e.prototype.update=function(t){this.timer++,this.timer>1&&(this.changeStatus(),this.timer=0)},__decorate([c(cc.Label)],e.prototype,"VIT",void 0),__decorate([c(cc.Label)],e.prototype,"Mood",void 0),__decorate([c(cc.Sprite)],e.prototype,"VITTabar",void 0),__decorate([c(cc.Sprite)],e.prototype,"MoodTabar",void 0),e=__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],temp:[function(t,e,o){"use strict";cc._RF.push(e,"f0e0bOHVK5P7Lc9yklySLBA","temp"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){return function(){}}();o.default=i,cc._RF.pop()},{}],tipsname:[function(t,e,o){"use strict";cc._RF.push(e,"751c0a9jztJwojIpWjvA8zB","tipsname"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg=null,e.cat=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(t){return this.cat=t,this.msg.string=this.cat.name+" "+i.default.getAgeString(this.cat.age),this.node.opacity=0,this.node.setParent(this.cat.node),this.node.setPosition(0,-200),this},e.prototype.show=function(){var t=this;this.node.runAction(cc.sequence(cc.fadeIn(1),cc.delayTime(3),cc.fadeOut(1),cc.callFunc(function(){t.node.destroy()})))},__decorate([a(cc.Label)],e.prototype,"msg",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./config":"config"}],uplevelBox:[function(t,e,o){"use strict";cc._RF.push(e,"fa1c4+TIedFV48Kxs4jpQHA","uplevelBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.age=null,e.VIT=null,e.Mood=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.setAge=function(t,e){this.age.string="\u5e74\u9f84\uff1a"+t+"\u4e2a\u6708 \u2192 "+e+"\u4e2a\u6708"},e.prototype.setVIT=function(t,e){this.VIT.string=t+" \u2192 "+e},e.prototype.setMood=function(t,e){this.Mood.string=t+" \u2192 "+e},__decorate([c(cc.Label)],e.prototype,"age",void 0),__decorate([c(cc.Label)],e.prototype,"VIT",void 0),__decorate([c(cc.Label)],e.prototype,"Mood",void 0),e=__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],visitMain:[function(t,e,o){"use strict";cc._RF.push(e,"974181l3RZDFKNKnAAa/kol","visitMain"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./config"),n=t("./cat"),c=t("./garbage"),a=t("./goods"),s=t("./fadebox"),r=t("./drag"),d=t("./goodsData"),p=t("./buff"),u=t("./statusBox"),h=t("./uplevelBox"),l=t("./headInfo"),f=cc._decorator,v=f.ccclass,g=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goodsBox=null,e.content=null,e.catStage=null,e.catPrefab=[],e.goodsPrefab=null,e.garbagePrefab=[],e.buffPrefab=null,e.mask=null,e.catStausBox=null,e.uplevelBox=null,e.headInfo=null,e.headInfoBox=null,e.encourageFrameArr=[],e.encourageBtn=null,e.load=null,e.garbageArr=[],e.catArr=[],e.catData=[],e.goodsPool=null,e.catActiveIndex=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.catData=[{cid:"023",name:"\u795e\u4e50",breed:0,age:36,sex:1,VIT:151,MAXVIT:500,Mood:146,MAXMood:450,isFirstName:!0,isHunger:!0,isAngry:!1,isActive:!0}],this.initUserInfo(),null!=i.default.VisitData&&(i.default.VisitData.hasGarbage.includes(0)&&this.createGarbage(0),i.default.VisitData.hasGarbage.includes(1)&&this.createGarbage(1),this.createGoodsPool(),this.addGoodsData(),this.onCloud("open",function(){t.createCat()}))},e.prototype.start=function(){},e.prototype.initUserInfo=function(){cc.log(i.default.VisitData),null!=i.default.VisitData?(this.headInfoBox&&this.headInfoBox.node.getComponent(l.default).init({uid:i.default.VisitData.user_id,name:i.default.VisitData.nickName,level:i.default.VisitData.level,duration:i.default.VisitData.duration,agreeNum:i.default.VisitData.agree_num,catNum:i.default.VisitData.cat_num,pic:i.default.VisitData.head_pic}),this.headInfo&&this.headInfo.getComponent(l.default).init({uid:i.default.VisitData.user_id,name:i.default.VisitData.nickName,level:i.default.VisitData.level,pic:i.default.VisitData.head_pic}),this.checkEncourageBtn()):this.goHome()},e.prototype.onEncourage=function(){i.default.VisitData.isEncourage||(i.default.VisitData.isEncourage=!0,this.checkEncourageBtn())},e.prototype.checkEncourageBtn=function(){i.default.VisitData.isEncourage?this.encourageBtn.getComponent(cc.Sprite).spriteFrame=this.encourageFrameArr[1]:this.encourageBtn.getComponent(cc.Sprite).spriteFrame=this.encourageFrameArr[0]},e.prototype.showLoad=function(t){void 0===t&&(t=!0),this.load.children.map(function(e){e.active=t}),this.load.active||(this.load.active=!0)},e.prototype.hideLoad=function(){this.load.active&&(this.load.active=!1)},e.prototype.onCloud=function(t,e){var o=this;void 0===t&&(t="open");var i=this.node.getChildByName("cloud").getComponent(cc.Animation);i.node.active=!0,this.node.getChildByName("cloud_pic").active=!1;var n=i.play("cloud");n.speed=.3,"open"==t&&(n.wrapMode=cc.WrapMode.Reverse),"close"==t&&(n.wrapMode=cc.WrapMode.Normal),n.repeatCount=1,i.on("finished",function(){"close"==t&&(o.node.getChildByName("cloud_pic").active=!0),i.off("finished"),i.node.active=!1,e&&e()},this)},e.prototype.onBack=function(){cc.log("\u8fd4\u56de")},e.prototype.onShop=function(){cc.log("\u55b5\u8d27\u94fa")},e.prototype.goHome=function(){var t=this;i.default.VisitData=null,this.showLoad(!1),this.onCloud("close",function(){t.removeCat(),t.hideLoad(),cc.director.loadScene("main")})},e.prototype.openHeadInfoMyBox=function(){this.goodsBox.node.active&&this.goodsBox.hide(),this.headInfoBox.onFadeIn()},e.prototype.showUpLevel=function(){var t=this,e=this.uplevelBox.node.getComponent(h.default);e.setAge(this.catArr[0].age-1,this.catArr[0].age),e.setVIT(this.catArr[0].MAXVIT-10,this.catArr[0].MAXVIT),e.setMood(this.catArr[0].MAXMood-5,this.catArr[0].MAXMood),this.catStausBox.node.active?this.catStausBox.onFadeOut(function(){return t.openUpLevel()}):this.openUpLevel()},e.prototype.openUpLevel=function(){this.mask.active=!0,this.uplevelBox.node.active=!0,this.uplevelBox.onFadeIn()},e.prototype.createBuff=function(t,e,o){var i=cc.instantiate(this.buffPrefab).getComponent(p.default);return i.type=e,i.num=o,i.init().show(t),i.node.setParent(this.catStage),i},e.prototype.createGoodsPool=function(){this.goodsPool=new cc.NodePool;for(var t=0;t<3;++t){var e=cc.instantiate(this.goodsPrefab);this.goodsPool.put(e)}},e.prototype.addGoodsData=function(){var t=this;this.goodsBox.visitMain=this,cc.loader.loadRes("data",function(e,o){e||(t.goodsBox.foodData=o.json.foodData,t.goodsBox.toyData=o.json.toyData)})},e.prototype.onBefed=function(t,e,o){var n=this;if(!(this.catArr.length<=0)){var c=this.createGoods({pos:this.node.convertToNodeSpaceAR(t.getLocation()),src:e.goodsPic,type:e.goodsType});e.setNum(--e.goodsNum),this.catArr[0].setMoveActive(!1),this.content.setActive(!1),this.catArr[0].VIT+=e.goodsBuff,this.catArr[0].isHunger=!1,c.show(this.node.convertToNodeSpaceAR(this.catStage.convertToWorldSpaceAR(this.catArr[0].node.position)),function(){n.createBuff(n.catArr[0].node.getPosition(),i.default.GOODSTYPE.FOOD,e.goodsBuff),n.catArr[0].action("Befed",function(){n.catArr[0].setMoveActive(!0),n.content.setActive(!0),n.catArr[0].action("Normal")})},this.retrieveGoodsPol.bind(this,c.node)),o&&o()}},e.prototype.onPlay=function(t,e,o){var n=this;if(!(this.catArr.length<=0)){var c=this.createGoods({pos:this.node.convertToNodeSpaceAR(t.getLocation()),src:e.goodsPic,type:e.goodsType});e.setNum(--e.goodsNum),this.catArr[0].setMoveActive(!1),this.content.setActive(!1),this.catArr[0].Mood+=e.goodsBuff,this.catArr[0].isAngry=!1,c.show(this.node.convertToNodeSpaceAR(this.catStage.convertToWorldSpaceAR(this.catArr[0].node.position)),function(){n.createBuff(n.catArr[0].node.getPosition(),i.default.GOODSTYPE.TOY,e.goodsBuff),n.catArr[0].action("Play",function(){n.catArr[0].setMoveActive(!0),n.content.setActive(!0),n.catArr[0].action("Normal")})},this.retrieveGoodsPol.bind(this,c.node)),o&&o()}},e.prototype.retrieveGoodsPol=function(t){this.goodsPool.put(t)},e.prototype.onTap=function(t,e){var o=this;if(!(this.catArr.length<=0)){if("Befed"==e){if(this.goodsBox.node.active)return;return this.catStausBox.onFadeOut(),this.goodsBox.setList(i.default.GOODSTYPE.FOOD),void this.goodsBox.show()}if("Play"==e){if(this.goodsBox.node.active)return;return this.catStausBox.onFadeOut(),this.goodsBox.setList(i.default.GOODSTYPE.TOY),void this.goodsBox.show()}this.catArr[0].action(e,function(){o.catArr[0].action("Normal")})}},e.prototype.createGoods=function(t){var e=null;return(e=this.goodsPool.size()>0?this.goodsPool.get().getComponents(a.default)[0]:cc.instantiate(this.goodsPrefab).getComponents(a.default)[0]).init(t.src,t.pos,t.type),e.node.setParent(this.node),e},e.prototype.createCat=function(){var t=this;this.catArr.length>0||this.content.moveTo(cc.v2(0,0),function(){var e=cc.instantiate(t.catPrefab[t.catData[t.catActiveIndex].breed]).getComponent(n.default);e.node.setParent(t.catStage),e.visitMain=t,e.init(t.catData[t.catActiveIndex],cc.v2(0,180)),t.catArr.push(e)})},e.prototype.getActiveCat=function(t){var e=0;return this.catData.map(function(o,i){o.cid==t?(e=i,o.isActive=!0):o.isActive=!1}),e},e.prototype.getSelectCat=function(t){for(var e=0;e<this.catData.length;e++){if(this.catData[e].cid==t)return e}return-1},e.prototype.showCatStatusInfo=function(){this.goodsBox.node.active&&this.goodsBox.hide(),this.catStausBox.node.getComponent(u.default).setCat(this.catArr[0]).changeStatus(),this.catStausBox.node.active=!0,this.catStausBox.node.parent.active=!0,this.catStausBox.onFadeIn()},e.prototype.removeCat=function(t){void 0===t&&(t=0),this.catArr.length<=0||("number"!=typeof t&&(t=0),this.catArr[t].node.destroy(),this.catArr.splice(t,1))},e.prototype.createGarbage=function(t){if(0!=this.garbagePrefab.length){for(var e=0;e<this.garbageArr.length;e++)if(this.garbageArr[e].type==t)return!1;var o=cc.instantiate(this.garbagePrefab[t]).getComponent(c.default);o.type=t,o.visitMain=this,o.node.setParent(this.catStage),o.node.setPosition(cc.v2(.2*this.catStage.width-Math.random()*(.4*this.catStage.width),0==t?280:-120)),this.garbageArr.push(o)}},e.prototype.clearGarbage=function(t,e){cc.log("\u89e6\u53d1\u6e05\u7406\u4e8b\u4ef6"+t.type),e()},__decorate([g(d.default)],e.prototype,"goodsBox",void 0),__decorate([g(r.default)],e.prototype,"content",void 0),__decorate([g(cc.Node)],e.prototype,"catStage",void 0),__decorate([g([cc.Prefab])],e.prototype,"catPrefab",void 0),__decorate([g(cc.Prefab)],e.prototype,"goodsPrefab",void 0),__decorate([g([cc.Prefab])],e.prototype,"garbagePrefab",void 0),__decorate([g(cc.Prefab)],e.prototype,"buffPrefab",void 0),__decorate([g(cc.Node)],e.prototype,"mask",void 0),__decorate([g(s.default)],e.prototype,"catStausBox",void 0),__decorate([g(s.default)],e.prototype,"uplevelBox",void 0),__decorate([g(cc.Node)],e.prototype,"headInfo",void 0),__decorate([g(s.default)],e.prototype,"headInfoBox",void 0),__decorate([g([cc.SpriteFrame])],e.prototype,"encourageFrameArr",void 0),__decorate([g(cc.Node)],e.prototype,"encourageBtn",void 0),__decorate([g(cc.Node)],e.prototype,"load",void 0),e=__decorate([v],e)}(cc.Component);o.default=y,cc._RF.pop()},{"./buff":"buff","./cat":"cat","./config":"config","./drag":"drag","./fadebox":"fadebox","./garbage":"garbage","./goods":"goods","./goodsData":"goodsData","./headInfo":"headInfo","./statusBox":"statusBox","./uplevelBox":"uplevelBox"}],visitorBox:[function(t,e,o){"use strict";cc._RF.push(e,"8a68dUykWBHNIdmEWsOqQaj","visitorBox"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./visitorItem"),n=cc._decorator,c=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.data=[],e.visitorFunc=null,e.showUserInfo=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.clearList=function(){this.content.children.forEach(function(t){t.destroy()})},e.prototype.createList=function(){var t=this;this.data.forEach(function(e){t.createItem({uid:e.user_id,nickname:e.nickname,msg:e.msg,date:e.date,pic:e.head_pic})})},e.prototype.createItem=function(t){var e=cc.instantiate(this.item).getComponent(i.default);return e.init(t),e.visitorFunc=this.visitorFunc,e.showUserInfo=this.showUserInfo,e.node.setParent(this.content),e},__decorate([a(cc.Node)],e.prototype,"content",void 0),__decorate([a(cc.Prefab)],e.prototype,"item",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./visitorItem":"visitorItem"}],visitorItem:[function(t,e,o){"use strict";cc._RF.push(e,"af814APe51DlLEDZ2x/lnDj","visitorItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nickname=null,e.msg=null,e.pic=null,e.btn=null,e.uid="",e.visitorFunc=null,e.showUserInfo=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.btn.on(cc.Node.EventType.TOUCH_END,function(){t.visitorFunc&&t.uid&&t.visitorFunc(t.uid)}),this.pic.node.on(cc.Node.EventType.TOUCH_END,function(){t.showUserInfo&&t.uid&&t.showUserInfo(t.uid)})},e.prototype.start=function(){},e.prototype.init=function(t){return this.uid=t.uid,this.setNickName(t.nickname),this.setMsg(t.msg,t.date),t.pic&&this.setPic(t.pic),this},e.prototype.setNickName=function(t){this.nickname.string=""+t},e.prototype.setMsg=function(t,e){this.msg.string=t+"  "+e},e.prototype.setPic=function(t){var e=this;cc.loader.loadRes(t,cc.SpriteFrame,function(t,o){t||(e.pic.spriteFrame=o)})},__decorate([c(cc.Label)],e.prototype,"nickname",void 0),__decorate([c(cc.Label)],e.prototype,"msg",void 0),__decorate([c(cc.Sprite)],e.prototype,"pic",void 0),__decorate([c(cc.Node)],e.prototype,"btn",void 0),e=__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["albumBox","api","buff","cat","catHomeBox","catItem","config","drag","editBox","fadebox","friendBox","friendItem","garbage","goods","goodsData","goodsItem","headInfo","main","move","novice","photoItem","statusBox","temp","tipsname","uplevelBox","visitMain","visitorBox","visitorItem"]);