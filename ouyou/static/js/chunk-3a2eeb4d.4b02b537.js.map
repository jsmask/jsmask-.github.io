{"version":3,"sources":["webpack:///./src/views/normal/Fish.vue?f612","webpack:///src/views/normal/Fish.vue","webpack:///./src/views/normal/Fish.vue?bc19","webpack:///./src/views/normal/Fish.vue","webpack:///./src/views/normal/Fish.vue?5a44"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","_l","item","index","_obj","key","refInFor","class","direction","type","style","x","y","level","_m","staticRenderFns","data","fishNum","fishList","bubbleList","foodList","mounted","init","methods","width","$refs","pool","clientWidth","height","clientHeight","move","foodMove","throw","addFish","random","speed","bTime","bMax","sy","Math","push","obj","addBubble","pow","window","requestAnimationFrame","food","fish","sub","num","foodIndex","i","dx","dy","vx","vy","cos","addEventListener","e","layerX","layerY","min","max","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,IAAI,OAAOC,YAAY,QAAQ,CAACP,EAAIQ,GAAIR,EAAY,UAAE,SAASS,EAAKC,GAC9K,IAAIC,EACJ,OAAOP,EAAG,MAAM,CAACQ,IAAIF,EAAMJ,IAAI,OAAOO,UAAS,EAAKN,YAAY,OAAOO,OAAQH,EAAO,CAAC,MAAwB,GAAjBF,EAAKM,WAAgBJ,EAAKF,EAAKO,OAAQ,EAAML,GAAOM,MAAM,CAAE,UAAY,aAAaR,EAAKS,EAAE,MAAMT,EAAKU,EAAE,QAAS,CAACf,EAAG,MAAM,CAACG,YAAY,YAAYU,MAAM,CAAE,UAAY,UAAU,EAAa,KAAXR,EAAKW,OAAa,MAAO,CAACpB,EAAIqB,GAAG,GAAE,UAAYrB,EAAIQ,GAAIR,EAAc,YAAE,SAASS,GAAM,OAAOL,EAAG,MAAM,CAACQ,IAAIH,EAAKC,MAAMH,YAAY,SAASU,MAAM,CAAE,KAAOR,EAAKS,EAAG,KAAK,IAAMT,EAAKU,EAAE,OAAQ,CAACf,EAAG,MAAM,CAACG,YAAY,qBAAoBP,EAAIQ,GAAIR,EAAY,UAAE,SAASS,GAAM,OAAOL,EAAG,MAAM,CAACQ,IAAIH,EAAKC,MAAMH,YAAY,OAAOU,MAAM,CAAE,KAAOR,EAAKS,EAAG,KAAK,IAAMT,EAAKU,EAAE,OAAQ,CAACf,EAAG,MAAM,CAACG,YAAY,oBAAmB,IACzqBe,EAAkB,CAAC,WAAa,IAAItB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,MAAM,CAACG,YAAY,kBCiCpK,G,UAAA,CACEgB,KADF,WAEI,MAAO,CACLC,QAAS,EACTC,SAAU,GACVC,WAAY,GACZC,SAAU,KAGdC,QATF,WAUI3B,KAAK4B,QAEPC,QAAS,CACPD,KADJ,WAEM5B,KAAK8B,MAAQ9B,KAAK+B,MAAMC,KAAKC,YAC7BjC,KAAKkC,OAASlC,KAAK+B,MAAMC,KAAKG,aAC9B,IAAK,IAAX,uBACA,gBAEMnC,KAAKoC,OACLpC,KAAKqC,WACLrC,KAAKsC,SAEPC,QAXJ,SAWA,GACM,IAAN,GACQ9B,MAAO,QAAf,UACQQ,EAAGjB,KAAKwC,OAAO,EAAGxC,KAAK8B,MAAQ,IAC/BZ,EAAGlB,KAAKwC,OAAO,GAAIxC,KAAKkC,OAAS,IACjCpB,UAAWd,KAAKwC,OAAO,EAAG,GAAK,GAAM,GAAK,EAC1CzB,KAAM,cAAgBf,KAAKwC,OAAO,EAAG,GACrCC,MAAOzC,KAAKwC,OAAO,EAAG,GACtBE,MAA2B,IAApB1C,KAAKwC,OAAO,EAAG,GACtBG,KAA2B,IAArB3C,KAAKwC,OAAO,EAAG,IACrBI,GAAIC,KAAKL,OAAO,EAAG,IACnBrB,QAASnB,KAAKwC,OAAO,EAAG,IAG1B,OADAxC,KAAKwB,SAASsB,KAAKC,GACZA,GAETC,UA3BJ,SA2BA,OACA,sBACMhD,KAAKyB,WAAWqB,KAAK,CACnB7B,EAAR,EACQC,EAAR,EACQT,MAAOA,EAAQ,OAASoC,KAAKL,SAAWK,KAAKI,IAAI,GAAI,OAGzDZ,SAnCJ,WAmCA,WACMa,OAAOC,uBAAsB,WAC3B,EAAR,gCACUC,EAAKlC,IACDkC,EAAKlC,EAAI,EAAvB,QACY,EAAZ,wBAGQ,EAAR,eAGIkB,KA9CJ,WA8CA,WACMc,OAAOC,uBAAsB,WAC3B,EAAR,8BAMU,KALME,EAAKX,MAAQW,EAAKV,OACtBU,EAAKX,MAAQ,EACb,EAAZ,cAGc,EAAd,mBACY,IAAZ,IAEY,GAAI,EAAhB,kBACc,IAAK,IAAnB,oCACgB,IAAhB,gCAC2B,MAAPY,IAAaA,EAAMC,GACnBA,EAAMD,IACRA,EAAMC,EACNC,EAAYC,GAKlB,IAAZ,gBAEA,UACA,UAEcJ,EAAKvC,UADH4C,GAAM,EACS,GAEC,EAGpB,IAAZ,kBAEY,GAAIA,EAAK,IAAMA,GAAM,IAAMC,EAAK,IAAMA,GAAM,GAC1CN,EAAKlC,QACL,EAAd,qBACckC,EAAKvC,UAAY+B,KAAKL,SAAW,GAAM,GAAK,MAC1D,CACc,IAAd,0BACA,0BACca,EAAKpC,GAAK2C,EACVP,EAAKnC,GAAK2C,QAGZR,EAAKpC,GAAKoC,EAAKZ,MAAQY,EAAKvC,UAC5BuC,EAAKT,IAAM,IACXS,EAAKnC,GAAyB,EAApB2B,KAAKiB,IAAIT,EAAKT,IAGtBS,EAAKpC,GAAK,KACZoC,EAAKpC,GAAK,GACVoC,EAAKvC,YAAc,EACnBuC,EAAKZ,MAAQ,EAAzB,aAEcY,EAAKpC,EAAI,EAAvB,WACYoC,EAAKpC,EAAI,EAArB,SACYoC,EAAKvC,YAAc,EACnBuC,EAAKZ,MAAQ,EAAzB,aAEcY,EAAKnC,EAAI,IACXmC,EAAKnC,EAAI,GAEPmC,EAAKnC,EAAI,EAAvB,YACYmC,EAAKnC,EAAI,EAArB,cAIQ,EAAR,WAGIoB,MArHJ,WAqHA,WACMtC,KAAK+B,MAAMC,KAAK+B,iBAAiB,SAAS,SAAhD,GACQ,IAAR,GACU9C,EAAG+C,EAAEC,OACL/C,EAAG8C,EAAEE,QAEf,uBAGI1B,OA9HJ,SA8HA,KACM,OAAO2B,EAAMtB,KAAKL,SAAW4B,MC/K0T,I,wBCQzVC,EAAY,eACd,EACAvE,EACAuB,GACA,EACA,KACA,WACA,MAIa,aAAAgD,E,kECnBf,yBAAkf,EAAG","file":"static/js/chunk-3a2eeb4d.4b02b537.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"pool\",staticClass:\"main\"},[_vm._l((_vm.fishList),function(item,index){\nvar _obj;\nreturn _c('div',{key:index,ref:\"fish\",refInFor:true,staticClass:\"fish\",class:( _obj = {'left':item.direction==-1}, _obj[item.type] = true, _obj ),style:({'transform':'translate('+item.x+'px,'+item.y+'px)'})},[_c('div',{staticClass:\"fish-main\",style:({'transform':'scale('+(1+item.level*0.025)+')'})},[_vm._m(0,true)])])}),_vm._l((_vm.bubbleList),function(item){return _c('div',{key:item.index,staticClass:\"bubble\",style:({'left':item.x +'px','top':item.y+'px'})},[_c('div',{staticClass:\"bubble-body\"})])}),_vm._l((_vm.foodList),function(item){return _c('div',{key:item.index,staticClass:\"food\",style:({'left':item.x +'px','top':item.y+'px'})},[_c('div',{staticClass:\"food-body\"})])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fish-body\"},[_c('div',{staticClass:\"fish-fins\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main\" ref=\"pool\">\r\n    <div\r\n      class=\"fish\"\r\n      ref=\"fish\"\r\n      v-for=\"(item,index) in fishList\"\r\n      :key=\"index\"\r\n      :class=\"{'left':item.direction==-1,[item.type]:true}\"\r\n      :style=\"{'transform':'translate('+item.x+'px,'+item.y+'px)'}\"\r\n    >\r\n      <div class=\"fish-main\" :style=\"{'transform':'scale('+(1+item.level*0.025)+')'}\">\r\n        <div class=\"fish-body\">\r\n          <div class=\"fish-fins\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"bubble\"\r\n      :key=\"item.index\"\r\n      v-for=\"item in bubbleList\"\r\n      :style=\"{'left':item.x +'px','top':item.y+'px'}\"\r\n    >\r\n      <div class=\"bubble-body\"></div>\r\n    </div>\r\n    <div\r\n      class=\"food\"\r\n      v-for=\"item in foodList\"\r\n      :key=\"item.index\"\r\n      :style=\"{'left':item.x +'px','top':item.y+'px'}\"\r\n    >\r\n      <div class=\"food-body\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      fishNum: 7,\r\n      fishList: [],\r\n      bubbleList: [],\r\n      foodList: []\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.width = this.$refs.pool.clientWidth;\r\n      this.height = this.$refs.pool.clientHeight;\r\n      for (let i = 0; i < this.fishNum; i++) {\r\n        let fish = this.addFish(i);\r\n      }\r\n      this.move();\r\n      this.foodMove();\r\n      this.throw();\r\n    },\r\n    addFish(i) {\r\n      let obj = {\r\n        index: `fish_${i}`,\r\n        x: this.random(0, this.width - 60),\r\n        y: this.random(15, this.height - 30),\r\n        direction: this.random(0, 1) > 0.5 ? 1 : -1,\r\n        type: \"fish-type\" + ~~this.random(1, 6),\r\n        speed: this.random(1, 3),\r\n        bTime: this.random(1, 3) * 100,\r\n        bMax: this.random(3, 10) * 100,\r\n        sy: Math.random(0, 10),\r\n        level: ~~this.random(0, 2)\r\n      };\r\n      this.fishList.push(obj);\r\n      return obj;\r\n    },\r\n    addBubble(fish) {\r\n      const { index, x, y } = fish;\r\n      this.bubbleList.push({\r\n        x,\r\n        y,\r\n        index: index + \"_\" + ~~(Math.random() * Math.pow(10, 6))\r\n      });\r\n    },\r\n    foodMove() {\r\n      window.requestAnimationFrame(() => {\r\n        this.foodList.forEach((food, index) => {\r\n          food.y++;\r\n          if (food.y > this.height) {\r\n            this.foodList.splice(index, 1);\r\n          }\r\n        });\r\n        this.foodMove();\r\n      });\r\n    },\r\n    move() {\r\n      window.requestAnimationFrame(() => {\r\n        this.fishList.forEach(fish => {\r\n          if (++fish.bTime > fish.bMax) {\r\n            fish.bTime = 0;\r\n            this.addBubble(fish);\r\n          }\r\n\r\n          if (this.foodList.length > 0) {\r\n            let foodIndex = 0;\r\n\r\n            if (this.foodList.length > 1) {\r\n              for (let i = 0, sub = null; i < this.foodList.length; i++) {\r\n                let num = Math.abs(this.foodList[i].x - fish.x);\r\n                if (sub == null) sub = num;\r\n                if (num < sub) {\r\n                  sub = num;\r\n                  foodIndex = i;\r\n                }\r\n              }\r\n            }\r\n\r\n            let food = this.foodList[foodIndex];\r\n\r\n            let dx = food.x - fish.x;\r\n            let dy = food.y - fish.y;\r\n            if (dx >= 0) {\r\n              fish.direction = 1;\r\n            } else {\r\n              fish.direction = -1;\r\n            }\r\n\r\n            let angle = Math.atan2(dy, dx);\r\n\r\n            if (dx < 10 && dx > -10 && dy < 10 && dy > -10) {\r\n              fish.level++;\r\n              this.foodList.splice(foodIndex, 1);\r\n              fish.direction = Math.random() > 0.5 ? 1 : -1;\r\n            } else {\r\n              let vx = fish.speed * 1.2 * Math.cos(angle);\r\n              let vy = fish.speed * 1.2 * Math.sin(angle);\r\n              fish.x += vx;\r\n              fish.y += vy;\r\n            }\r\n          } else {\r\n            fish.x += fish.speed * fish.direction;\r\n            fish.sy += 0.01;\r\n            fish.y += Math.cos(fish.sy) * 2;\r\n          }\r\n\r\n          if (fish.x < -60) {\r\n            fish.x = -60;\r\n            fish.direction *= -1;\r\n            fish.speed = this.random(1, 3);\r\n          }\r\n          if (fish.x > this.width + 30) {\r\n            fish.x = this.width + 30;\r\n            fish.direction *= -1;\r\n            fish.speed = this.random(1, 3);\r\n          }\r\n          if (fish.y < 0) {\r\n            fish.y = 0;\r\n          }\r\n          if (fish.y > this.height - 30) {\r\n            fish.y = this.height - 30;\r\n          }\r\n        });\r\n\r\n        this.move();\r\n      });\r\n    },\r\n    throw() {\r\n      this.$refs.pool.addEventListener(\"click\", e => {\r\n        let food = {\r\n          x: e.layerX,\r\n          y: e.layerY\r\n        };\r\n        let index = this.foodList.push(food);\r\n      });\r\n    },\r\n    random(min, max) {\r\n      return min + Math.random() * max;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: lightblue;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n.fish {\r\n  width: 60px;\r\n  height: 30px;\r\n  position: absolute;\r\n}\r\n\r\n.fish.left .fish-body {\r\n  transform: scaleX(-1);\r\n}\r\n.fish.fish-type1 .fish-body {\r\n  --main-skin: rgb(230, 136, 72);\r\n}\r\n.fish.fish-type2 .fish-body {\r\n  --main-skin: rgb(230, 90, 72);\r\n}\r\n.fish.fish-type3 .fish-body {\r\n  --main-skin: rgb(72, 127, 230);\r\n}\r\n.fish.fish-type4 .fish-body {\r\n  --main-skin: rgb(241, 207, 94);\r\n}\r\n.fish.fish-type5 .fish-body {\r\n  --main-skin: rgb(82, 151, 100);\r\n}\r\n.fish.fish-type6 .fish-body {\r\n  --main-skin: rgb(82, 120, 151);\r\n}\r\n.fish-main {\r\n  transition: 0.3s all;\r\n}\r\n.fish-body {\r\n  position: relative;\r\n  margin-left: 6px;\r\n  width: 50px;\r\n  height: 30px;\r\n  border-radius: 50% 50%;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.12);\r\n  border-top: 1px solid rgba(0, 0, 0, 0.06);\r\n  background-color: var(--main-skin);\r\n  transition: 1s all;\r\n  transform-origin: 50% 50%;\r\n}\r\n.fish-body::before {\r\n  content: \"\";\r\n  display: block;\r\n  position: absolute;\r\n  left: -11px;\r\n  width: 0;\r\n  height: 0;\r\n  border-left: solid 25px var(--main-skin);\r\n  border-top: solid 15px transparent;\r\n  border-bottom: solid 15px transparent;\r\n  animation: move2 0.24s linear infinite;\r\n}\r\n.fish-body::after {\r\n  content: \"\";\r\n  display: block;\r\n  position: absolute;\r\n  top: 8px;\r\n  left: 34px;\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 50%;\r\n  background-color: black;\r\n  box-shadow: 0px 0px 0 2px white;\r\n}\r\n.fish-fins {\r\n  width: 0;\r\n  height: 0;\r\n  border-left: solid 6px var(--main-skin);\r\n  border-top: solid 3px transparent;\r\n  border-bottom: solid 3px transparent;\r\n  position: absolute;\r\n  top: 17px;\r\n  left: 20px;\r\n  filter: brightness(5.5);\r\n  opacity: 0.1;\r\n  animation: move 0.24s linear infinite;\r\n  transform-origin: 100% 100%;\r\n}\r\n.bubble {\r\n  width: 5px;\r\n  height: 5px;\r\n  position: absolute;\r\n  animation: up 5s linear;\r\n  animation-fill-mode: forwards;\r\n}\r\n.bubble-body {\r\n  width: 5px;\r\n  height: 5px;\r\n  border: 1px solid rgb(255, 255, 255);\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  left: 60px;\r\n  top: 10px;\r\n  opacity: 1;\r\n  animation: sway 3s linear infinite;\r\n}\r\n.food {\r\n  width: 10px;\r\n  height: 7px;\r\n  position: absolute;\r\n  opacity: 1;\r\n}\r\n.food-body {\r\n  position: absolute;\r\n  width: 10px;\r\n  height: 7px;\r\n  border-radius: 45% 42%;\r\n  background: rgb(82, 57, 43);\r\n  animation: sway 3s linear infinite;\r\n}\r\n@keyframes move {\r\n  0% {\r\n    opacity: 0.1;\r\n    transform: scaleX(1);\r\n  }\r\n\r\n  50% {\r\n    opacity: 0.15;\r\n    transform: scaleX(1.3);\r\n  }\r\n\r\n  100% {\r\n    opacity: 0.1;\r\n    transform: scaleX(1);\r\n  }\r\n}\r\n@keyframes move2 {\r\n  0% {\r\n    opacity: 0.9;\r\n    transform: scaleX(1);\r\n  }\r\n\r\n  50% {\r\n    opacity: 1;\r\n    transform: scaleX(1.3);\r\n  }\r\n\r\n  100% {\r\n    opacity: 0.9;\r\n    transform: scaleX(1);\r\n  }\r\n}\r\n@keyframes up {\r\n  0% {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n    transform: translateY(-600px);\r\n  }\r\n}\r\n@keyframes sway {\r\n  0%,\r\n  20%,\r\n  40%,\r\n  60%,\r\n  80%,\r\n  100% {\r\n    transform: translateX(0px) rotate(0);\r\n  }\r\n  10%,\r\n  30%,\r\n  50%,\r\n  70%,\r\n  90% {\r\n    transform: translateX(-10px) rotate(30deg);\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fish.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Fish.vue?vue&type=template&id=1a890f98&scoped=true&\"\nimport script from \"./Fish.vue?vue&type=script&lang=js&\"\nexport * from \"./Fish.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Fish.vue?vue&type=style&index=0&id=1a890f98&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a890f98\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fish.vue?vue&type=style&index=0&id=1a890f98&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fish.vue?vue&type=style&index=0&id=1a890f98&scoped=true&lang=css&\""],"sourceRoot":""}